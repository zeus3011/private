!function(){"use strict";var e,t,i={874:function(e,t,i){i.d(t,{Z:function(){return F}});var r=i(145),n=function(e){const t=(0,r.mz)(e.supportedDomRefs),i=(0,r.mz)(e.initState);return Object.seal(t),Object.seal(i),{domRefs:t,state:i,csrOptions:{},promises:[]}};var s=i(277);var a=i(876),o=i(114),c=i(942),l=function({creative:e,errorHandler:t}){return{get:function(i){const n=function(e){const i=document.createElement("iframe");a.Z.setStyle(i,"display","none"),document.body.appendChild(i);try{const e=i.contentWindow.document;e.open(),e.close()}catch(e){t.fireError("Logo Placement: Attempted to open iframe document but failed.",t.WARNING)}return i.contentWindow.updateLogoZones=(...t)=>{e(...t),(0,r.l)(i)},i}(i),s=function(){const t=document.createElement("script");return t.src=e.params.image_url.replace("/?","/lp?"),t}();n.contentWindow.document.body.appendChild(s)}}};const{NW:d,NE:h,SE:u,SW:p}=o.Z,m="revealTrigger",g="logo",f="adchoices",y="muteButton",v="blacklisted",_=[h,d,u,p];class I{constructor({domRefs:e,state:t,creative:i,placement:r,browserInfo:n,errorHandler:s}){this.domRefs=e,this.creative=i,this.placement=r,this.browserInfo=n,this.state=t,this.toConfig=this.toConfig.bind(this),this.errorHandler=s,this.corners={[d]:null,[h]:null,[u]:null,[p]:null},this.elements=[{name:y,isNeeded:()=>!!this.domRefs.muteButton,getCorner:()=>this.getMuteCorner(),getElement:()=>this.domRefs.muteButton.getEl(),getOffsets:()=>this.getMuteOffsets()},{name:m,isNeeded:()=>!!this.domRefs.revealTrigger,getCorner:()=>this.getRevealCorner(),getElement:()=>this.domRefs.revealTrigger,getOffsets:()=>this.getDefaultOffsets(),getCallback:(e,t)=>this.getRevealCallback(e,t)},{name:g,isNeeded:()=>this.needsLogo(),getCorner:()=>this.getLogoCorner(),getElement:()=>this.domRefs.logo||this.domRefs.videoLogo,getOffsets:()=>this.getLogoOffsets()},{name:f,isNeeded:()=>this.needsAdChoices(),getElement:()=>this.domRefs.adchoices,getCorner:()=>this.getAdChoicesCorner(),getOffsets:()=>this.getDefaultOffsets(),getCallback:(e,t)=>this.getAdChoicesCallback(e,t)}]}create(){return this.blackListCorners(),this.elements.filter((e=>e.isNeeded())).slice(0,4).map(this.toConfig)}toConfig(e){const t={};t.element=e.getElement(),t.corner=e.getCorner();const{xOffsetPx:i,yOffsetPx:r}=e.getOffsets();return t.xOffsetPx=i,t.yOffsetPx=r,"function"==typeof e.getCallback&&(t.callback=e.getCallback(t.element,t.corner)),this.corners[t.corner]=e.name,t}async handleNonCSRElements(e){await this.fetchLogoCorner();e(this.create())}fetchLogoCorner(){return new Promise((e=>l({creative:this.creative,errorHandler:this.errorHandler}).get((t=>{this.corners[(0,r.A2)(t.lp)]=g,e()}))))}getAlignment(){return this.creative.isVast()||this.creative.isCinemagraph()?I.CREATIVE_CONTENT:I.MAIN_IMAGE_SLOT}getRevealCorner(){const e=this.getPreferredRevealCorner();return this.getCornerOrOverrideBlacklist(e)}getAdChoicesCorner(){return this.getCornerOrOverrideBlacklist(_)}getLogoCorner(){const e=this.getLogoPreferredCorner()||d;return this.findPreferredCorner(this.getEmptyCorners(),[e])||this.getAnyEmptyCorner()}getLogoPreferredCorner(){return this.getImgServerArgs().queryKey.lp}getImgServerArgs(){const e=this.creative.getParams();return(0,r.EC)("?"+e.img_server_params)}getMuteCorner(){return this.getCornerOrOverrideBlacklist([p])}getAnyEmptyCorner(){return this.getEmptyCorners()[0]}needsAdChoices(){return!(this.state.isAdChoiceFromTemplate||this.creative.isAdChoicesOptOut())}needsLogo(){if(this.areAllCornersLogoBlacklisted())return!1;if(this.creative.isVast()){const e=this.browserInfo.isMobile,t=this.creative.params.logo_image_url,i=this.placement.logoBlackList||"",r=d,n=-1===i.indexOf(r);return t&&n&&!e&&!!this.domRefs.videoLogo}return!!this.domRefs.logo}getEmptyCorners(){return Object.keys(this.corners).filter((e=>null===this.corners[e]))}getBlackListedCorners(){return Object.keys(this.corners).filter((e=>this.corners[e]===v))}getCornerOrOverrideBlacklist(e){return this.findPreferredCorner(this.getEmptyCorners(),e)||this.findPreferredCorner(this.getBlackListedCorners(),e)||this.getAnyEmptyCorner()}blackListCorners(){const{logoBlackList:e}=this.placement;if(e){(0,r.A2)(e).split(",").forEach((e=>{this.corners[e]=v}))}}areAllCornersLogoBlacklisted(){return Object.values(this.corners).every((e=>e===v))}findPreferredCorner(e,t){return t.find((t=>e.indexOf((0,r.A2)(t))>-1))}getPreferredRevealCorner(){let e=[p,u,d,h];const t=this.creative.params.customization.reveal;return t.trigger.corner&&(e=e.filter((e=>e!==(0,r.A2)(t.trigger.corner))),e.unshift((0,r.A2)(t.trigger.corner))),e}getRevealCallback(e,t){const i={[d]:{PEELBACK_URL:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDUiIGhlaWdodD0iNDUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgdHJhbnNmb3JtPSJtYXRyaXgoMSAwIDAgLTEgMCA0NSkiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+PHBhdGggZmlsbD0iIzAwMCIgZD0iTTAgMGw0NSA0NUgweiIvPjxyZWN0IGZpbGw9IiMwMDAiIHg9IjEwIiB5PSIxNCIgd2lkdGg9IjIxIiBoZWlnaHQ9IjIyIiByeD0iMiIvPjxwYXRoIGQ9Ik0yNy40NzkgMTcuMjI1YS44MTYuODE2IDAgMCAwLS41OC0uMjM2SDE3LjYxYS44MTYuODE2IDAgMCAwLS41OC4yMzYuODI3LjgyNyAwIDAgMCAwIDEuMTZsMi4zMjIgMi4zMjMtMi4wMzIgMi4wMzFjLTIuOTc1IDIuOTc2LTYuMTUgNy4yMDItNC4yODEgMTEuNTkzLjU4IDEuMzQyIDEuNTI0IDIuNDg1IDIuNTQgMy41IDEuMjcgMS4yNyAzLjU2NCAyLjI5NiA1LjI0MiAyLjk0LjMwOS4xMDkuNjk5LjI5OSAxLjAyNS4zNTMuMTU0LjAyOC4yODEuMDI4LjQwOC0uMS4xODItLjE4LjE0Ni0uNDM1LS4wMjctLjYwNy0uMTQ1LS4xNDUtLjM0NS0uMjcyLS40OTktLjQwOC0uMzk5LS4zNDUtLjc4OS0uNjk5LTEuMTYtMS4wNy00LjMyNy00LjMyNy0yLjUxMy03LjY0NyAxLjM5Ni0xMS41NTZsMi4wMzItMi4wMzIgMi4zMjIgMi4zMjJhLjgyNy44MjcgMCAwIDAgMS4xNjEgMCAuODE2LjgxNiAwIDAgMCAuMjM2LS41OHYtOS4yODlhLjgxNi44MTYgMCAwIDAtLjIzNi0uNTh6IiBmaWxsPSIjRkZGIi8+PC9nPjwvc3ZnPg=="},[h]:{PEELBACK_URL:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDUiIGhlaWdodD0iNDUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgdHJhbnNmb3JtPSJyb3RhdGUoMTgwIDIyLjUgMjIuNSkiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+PHBhdGggZmlsbD0iIzAwMCIgZD0iTTAgMGw0NSA0NUgweiIvPjxyZWN0IGZpbGw9IiMwMDAiIHg9IjEwIiB5PSIxNCIgd2lkdGg9IjIxIiBoZWlnaHQ9IjIyIiByeD0iMiIvPjxwYXRoIGQ9Ik0yNy40NzkgMTcuMjI1YS44MTYuODE2IDAgMCAwLS41OC0uMjM2SDE3LjYxYS44MTYuODE2IDAgMCAwLS41OC4yMzYuODI3LjgyNyAwIDAgMCAwIDEuMTZsMi4zMjIgMi4zMjMtMi4wMzIgMi4wMzFjLTIuOTc1IDIuOTc2LTYuMTUgNy4yMDItNC4yODEgMTEuNTkzLjU4IDEuMzQyIDEuNTI0IDIuNDg1IDIuNTQgMy41IDEuMjcgMS4yNyAzLjU2NCAyLjI5NiA1LjI0MiAyLjk0LjMwOS4xMDkuNjk5LjI5OSAxLjAyNS4zNTMuMTU0LjAyOC4yODEuMDI4LjQwOC0uMS4xODItLjE4LjE0Ni0uNDM1LS4wMjctLjYwNy0uMTQ1LS4xNDUtLjM0NS0uMjcyLS40OTktLjQwOC0uMzk5LS4zNDUtLjc4OS0uNjk5LTEuMTYtMS4wNy00LjMyNy00LjMyNy0yLjUxMy03LjY0NyAxLjM5Ni0xMS41NTZsMi4wMzItMi4wMzIgMi4zMjIgMi4zMjJhLjgyNy44MjcgMCAwIDAgMS4xNjEgMCAuODE2LjgxNiAwIDAgMCAuMjM2LS41OHYtOS4yODlhLjgxNi44MTYgMCAwIDAtLjIzNi0uNTh6IiBmaWxsPSIjRkZGIi8+PC9nPjwvc3ZnPg=="},[u]:{PEELBACK_URL:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDUiIGhlaWdodD0iNDUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgdHJhbnNmb3JtPSJtYXRyaXgoLTEgMCAwIDEgNDUgMCkiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+PHBhdGggZmlsbD0iIzAwMCIgZD0iTTAgMGw0NSA0NUgweiIvPjxyZWN0IGZpbGw9IiMwMDAiIHg9IjEwIiB5PSIxNCIgd2lkdGg9IjIxIiBoZWlnaHQ9IjIyIiByeD0iMiIvPjxwYXRoIGQ9Ik0yNy40NzkgMTcuMjI1YS44MTYuODE2IDAgMCAwLS41OC0uMjM2SDE3LjYxYS44MTYuODE2IDAgMCAwLS41OC4yMzYuODI3LjgyNyAwIDAgMCAwIDEuMTZsMi4zMjIgMi4zMjMtMi4wMzIgMi4wMzFjLTIuOTc1IDIuOTc2LTYuMTUgNy4yMDItNC4yODEgMTEuNTkzLjU4IDEuMzQyIDEuNTI0IDIuNDg1IDIuNTQgMy41IDEuMjcgMS4yNyAzLjU2NCAyLjI5NiA1LjI0MiAyLjk0LjMwOS4xMDkuNjk5LjI5OSAxLjAyNS4zNTMuMTU0LjAyOC4yODEuMDI4LjQwOC0uMS4xODItLjE4LjE0Ni0uNDM1LS4wMjctLjYwNy0uMTQ1LS4xNDUtLjM0NS0uMjcyLS40OTktLjQwOC0uMzk5LS4zNDUtLjc4OS0uNjk5LTEuMTYtMS4wNy00LjMyNy00LjMyNy0yLjUxMy03LjY0NyAxLjM5Ni0xMS41NTZsMi4wMzItMi4wMzIgMi4zMjIgMi4zMjJhLjgyNy44MjcgMCAwIDAgMS4xNjEgMCAuODE2LjgxNiAwIDAgMCAuMjM2LS41OHYtOS4yODlhLjgxNi44MTYgMCAwIDAtLjIzNi0uNTh6IiBmaWxsPSIjRkZGIi8+PC9nPjwvc3ZnPg=="},[p]:{PEELBACK_URL:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDUiIGhlaWdodD0iNDUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48cGF0aCBmaWxsPSIjMDAwIiBkPSJNMCAwbDQ1IDQ1SDB6Ii8+PHJlY3QgZmlsbD0iIzAwMCIgeD0iMTAiIHk9IjE0IiB3aWR0aD0iMjEiIGhlaWdodD0iMjIiIHJ4PSIyIi8+PHBhdGggZD0iTTI3LjQ3OSAxNy4yMjVhLjgxNi44MTYgMCAwIDAtLjU4LS4yMzZIMTcuNjFhLjgxNi44MTYgMCAwIDAtLjU4LjIzNi44MjcuODI3IDAgMCAwIDAgMS4xNmwyLjMyMiAyLjMyMy0yLjAzMiAyLjAzMWMtMi45NzUgMi45NzYtNi4xNSA3LjIwMi00LjI4MSAxMS41OTMuNTggMS4zNDIgMS41MjQgMi40ODUgMi41NCAzLjUgMS4yNyAxLjI3IDMuNTY0IDIuMjk2IDUuMjQyIDIuOTQuMzA5LjEwOS42OTkuMjk5IDEuMDI1LjM1My4xNTQuMDI4LjI4MS4wMjguNDA4LS4xLjE4Mi0uMTguMTQ2LS40MzUtLjAyNy0uNjA3LS4xNDUtLjE0NS0uMzQ1LS4yNzItLjQ5OS0uNDA4LS4zOTktLjM0NS0uNzg5LS42OTktMS4xNi0xLjA3LTQuMzI3LTQuMzI3LTIuNTEzLTcuNjQ3IDEuMzk2LTExLjU1NmwyLjAzMi0yLjAzMiAyLjMyMiAyLjMyMmEuODI3LjgyNyAwIDAgMCAxLjE2MSAwIC44MTYuODE2IDAgMCAwIC4yMzYtLjU4di05LjI4OWEuODE2LjgxNiAwIDAgMC0uMjM2LS41OHoiIGZpbGw9IiNGRkYiLz48L2c+PC9zdmc+"}},{trigger:r}=this.creative.params.customization.reveal;return"peelback"===r.type?()=>e.setAttribute("src",i[t].PEELBACK_URL):"info_icon"===r.type?()=>e.setAttribute("src","data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzUiIGhlaWdodD0iMzUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48cGF0aCBmaWxsLW9wYWNpdHk9Ii44MTUiIGZpbGw9IiMwMDAiIGQ9Ik0wIDBoMzV2MzVIMHoiLz48cGF0aCBkPSJNMjEuNjY3IDI1LjMxM3YtMi42MDVhLjUwNy41MDcgMCAwIDAtLjE0Ny0uMzc0LjUwNy41MDcgMCAwIDAtLjM3NC0uMTQ2aC0xLjU2M3YtOC4zMzRhLjUwNy41MDcgMCAwIDAtLjE0Ni0uMzc0LjUwNy41MDcgMCAwIDAtLjM3NS0uMTQ3aC01LjIwOGEuNTA3LjUwNyAwIDAgMC0uMzc0LjE0Ny41MDcuNTA3IDAgMCAwLS4xNDcuMzc0djIuNjA0YzAgLjE1Mi4wNS4yNzcuMTQ3LjM3NWEuNTA3LjUwNyAwIDAgMCAuMzc0LjE0NmgxLjU2M3Y1LjIwOWgtMS41NjNhLjUwNy41MDcgMCAwIDAtLjM3NC4xNDYuNTA3LjUwNyAwIDAgMC0uMTQ3LjM3NHYyLjYwNWMwIC4xNTEuMDUuMjc2LjE0Ny4zNzRhLjUwNy41MDcgMCAwIDAgLjM3NC4xNDZoNy4yOTJhLjUwNy41MDcgMCAwIDAgLjM3NC0uMTQ2LjUwNy41MDcgMCAwIDAgLjE0Ny0uMzc1em0tMi4wODQtMTMuNjE3VjguNzJhLjYyNi42MjYgMCAwIDAtLjE0Ni0uNDI4LjQ3NS40NzUgMCAwIDAtLjM3NS0uMTY3aC0zLjEyNWEuNDc1LjQ3NSAwIDAgMC0uMzc0LjE2Ny42MjYuNjI2IDAgMCAwLS4xNDYuNDI4djIuOTc2YzAgLjE3NC4wNDguMzE3LjE0Ni40MjhhLjQ3NS40NzUgMCAwIDAgLjM3NC4xNjhoMy4xMjZhLjQ3NS40NzUgMCAwIDAgLjM3NC0uMTY4LjYyNi42MjYgMCAwIDAgLjE0Ni0uNDI4ek0zMCAxNy41YzAgMi4yNjgtLjU1OSA0LjM2LTEuNjc2IDYuMjc0YTEyLjQ0NCAxMi40NDQgMCAwIDEtNC41NSA0LjU1QzIxLjg2IDI5LjQ0IDE5Ljc2OCAzMCAxNy41IDMwcy00LjM2LS41NTktNi4yNzQtMS42NzZhMTIuNDQ0IDEyLjQ0NCAwIDAgMS00LjU1LTQuNTVDNS41NiAyMS44NiA1IDE5Ljc2OCA1IDE3LjVzLjU1OS00LjM2IDEuNjc2LTYuMjc0YTEyLjQ0NCAxMi40NDQgMCAwIDEgNC41NS00LjU1QzEzLjE0IDUuNTYgMTUuMjMyIDUgMTcuNSA1czQuMzYuNTU5IDYuMjc0IDEuNjc2YTEyLjQ0NCAxMi40NDQgMCAwIDEgNC41NSA0LjU1QzI5LjQ0IDEzLjE0IDMwIDE1LjIzMiAzMCAxNy41eiIgZmlsbD0iI0ZGRiIvPjwvZz48L3N2Zz4="):null}getAdChoicesCallback(e,t){const i={[d]:"border-bottom-right-radius",[h]:"border-bottom-left-radius",[u]:"border-top-left-radius",[p]:"border-top-right-radius"};return()=>a.Z.setStyle(e,i[t],"8px")}getLogoOffsets(){let e,t;const i=this.getImgServerArgs().queryKey,r=parseInt(i.logo_y_pct,10),n=parseInt(i.logo_x_pct,10);isNaN(n)&&isNaN(r)?(e=parseInt(i.lox,10),t=parseInt(i.loy,10)):({xOffsetPx:e,yOffsetPx:t}=this.getLogoOffsetsFromPercentage(n,r));const s=isNaN(e)&&isNaN(t);this.creative.isCinemagraph()&&s&&(e=10,t=10);const{finalOffsetX:a,finalOffsetY:o}=this.getFinalLogoOffsets();return{xOffsetPx:(e||0)+a+"px",yOffsetPx:(t||0)+o+"px"}}pct2Px(e,t){return Math.floor(.01*e*t)}getLogoOffsetsFromPercentage(e,t){let i,r;this.state.visibleImageWidth||this.state.visibleImageHeight?(i=this.state.visibleImageWidth,r=this.state.visibleImageHeight):(i=this.placement.imageWidth,r=this.placement.imageHeight);return{xOffsetPx:this.pct2Px(e,i),yOffsetPx:this.pct2Px(t,r)}}getFinalLogoOffsets(){return this.state.imageBoxingOffsetX||this.state.imageBoxingOffsetY?{finalOffsetX:this.state.imageBoxingOffsetX,finalOffsetY:this.state.imageBoxingOffsetY}:this.state.logoOffsetX||this.state.logoOffsetY?{finalOffsetX:this.state.logoOffsetX,finalOffsetY:this.state.logoOffsetY}:{finalOffsetX:0,finalOffsetY:0}}getMuteOffsets(){return{xOffsetPx:"5px",yOffsetPx:"5px"}}getDefaultOffsets(){return{xOffsetPx:"0px",yOffsetPx:"0px"}}}(0,c.Z)(I,"CREATIVE_CONTENT","creativeContent"),(0,c.Z)(I,"MAIN_IMAGE_SLOT","mainImageSlot");var A=i(745);const{NW:w,NE:C,SE:E,SW:T,TL_CLASS_PREFIX:b}=o.Z,S={[w]:function(e,t,i){a.Z.setStyleProperties(e,[["top",i],["right","auto"],["bottom","auto"],["left",t]])},[C]:function(e,t,i){a.Z.setStyleProperties(e,[["top",i],["right",t],["bottom","auto"],["left","auto"]])},[E]:function(e,t,i){a.Z.setStyleProperties(e,[["top","auto"],["right",t],["bottom",i],["left","auto"]])},[T]:function(e,t,i){a.Z.setStyleProperties(e,[["top","auto"],["right","auto"],["bottom",i],["left",t]])}};const M=o.Z.BUTTONS_DIR+"edaa/",P=M+"OBA_TRANS.png",R={fr:M+"OBA_FRANCE.png",bg:M+"OBA_BULGARIA.png",cs:M+"OBA_CZECH.png",da:M+"OBA_DENMARK.png",fi:M+"OBA_FINLAND.png",de:M+"OBA_GERMANY.png",el:M+"OBA_GREEK.png",hu:M+"OBA_HUNGARY.png",en:M+"OBA_UK.png",it:M+"OBA_ITALY.png",nl:M+"OBA_NETHERLANDS.png",no:M+"OBA_NORWAY.png",pl:M+"OBA_POLAND.png",ro:M+"OBA_ROMANIA.png",sk:M+"OBA_SLOVAKIA.png",es:M+"OBA_SPAIN.png",sv:M+"OBA_SWEDEN.png"};var D=function({creative:e,positionService:t,eventController:i}){let r,n,o,c;return{render:function(t){({domRefs:r,state:n}=t);const u=r.adWrapper.querySelector("."+L);u?(r.adchoices=u,n.isAdChoiceFromTemplate=!0):(r.adchoices=function(){const t=function(){const e=a.Z.setStyleProperties(document.createElement("div"),[["padding","1px"],["display","inline-block"],["background","rgba(204, 204, 204, 0.5)"],["width","initial"],["height","initial"]]);return o=document.createElement("img"),o.className="tl-edaa-icon",o.src=P,c=document.createElement("img"),c.className="tl-edaa-text",c.src=function(){const e=navigator.language.slice(0,2);return R[e]||R.en}(),e.appendChild(o),e.appendChild(c),l(),e}();return t.className=L,a.Z.setStyleProperties(t,[["z-index",(0,A.K)(e,A.T.ADCHOICES)],["position","absolute"],["margin","initial"],["min-height","initial"],["cursor","pointer"]])}(),i.on(s.ql,h),i.on(s.WR,d),i.on(s.jB,l))}};function l(){a.Z.setStyle(o,"display","block"),a.Z.setStyle(c,"display","none")}function d(){a.Z.setStyle(c,"display","block"),a.Z.setStyle(o,"display","none")}function h(){const i=function(){if(!function(e){const i=t.getElDims(e);return i.width*i.height>=15e3}(r.mainImageCsrEl))return!1;if(e.isAutoplay()&&(n.isEnded||!n.isPlaying))return!1;return!0}()?"inline":"none";a.Z.setStyle(r.adchoices,"display",i)}};const L=o.Z.TL_CLASS_PREFIX+"adchoices";var N=function({creative:e,eventController:t}){const i=e.getParams();let n,o,c,l,d,h,u,p=null;return{render:function(g){if(u=g,!v())return;o=(0,r.EC)("?"+i.img_server_params),c=parseInt(o.queryKey.minLogoPct,10),l=parseInt(o.queryKey.maxLogoPct,10),n=parseInt(o.queryKey.logo_width,10),d=i.logo_image_url,h=i.logo_width,p=function(){const n=document.createElement("img");return n.className="tl-logo",(0,r.CA)(n),a.Z.setStyleProperties(n,[["z-index",(0,A.K)(e,A.T.NON_VIDEO_LOGO)],["position","absolute"]]),a.Z.setStyle(n,"display","none"),n.onload=()=>{t.publish(s.q3),a.Z.setStyle(n,"display","block")},n.src=i.logo_image_url,n}(),t.on(s.ql,m),u.domRefs.logo=p},_getLogoDims:g};function m(e){if(p&&p.naturalHeight&&e.width&&e.height){const{width:t,height:i}=e,{naturalWidth:s,naturalHeight:a}=p,o=g({imgWidth:t,imgHeight:i,logoAspectRatio:s/a,scaleFactor:.25,logoWidth:n,minLogoPct:c,maxLogoPct:l});(0,r.QU)(p,o.width,o.height);const u=(0,r.Cd)(d,o.width,h);(0,r.hv)(p.src,u)||(p.src=u)}}function g({imgWidth:e,imgHeight:t,logoAspectRatio:i,logoWidth:r,minLogoPct:n,maxLogoPct:s,scaleFactor:a}){let o={};if(r)return o.width=r,o.height=r*(1/i),f(o,i,{imgWidth:e,imgHeight:t});if(o.width=e*a,o.height=o.width*(1/i),o.width/e<o.height/t&&(o.height=t*a,o.width=o.height*i),function(e,t){if(isNaN(e)&&isNaN(t))return!1;const i=isNaN(e)?0:e,r=isNaN(t)?100:t;return i<=r&&i>=0&&i<=100&&r>=0&&r<=100}(n,s)){const r=e*t,a=o.width*o.height;a<r*(n/100)?(o.width=Math.sqrt(r*i*(n/100)),o.height=o.width/i):a>r*(s/100)&&(o.width=Math.sqrt(r*i*(s/100)),o.height=o.width/i)}return o=f(o,i,{imgWidth:e,imgHeight:t}),o.width=Math.round(o.width),o.height=Math.round(o.height),o}function f(e,t,{imgWidth:i,imgHeight:r}){const n={...e};return y(n,{imgWidth:i,imgHeight:r})&&(n.width=.5*i,n.height=n.width*(1/t),y(n,{imgWidth:i,imgHeight:r})&&(n.height=.5*r,n.width=n.height*t)),n}function y({width:e,height:t},{imgWidth:i,imgHeight:r}){return e>i/2||t>r/2}function v(){return i.logo_image_url&&u.domRefs.mainImageCsrEl&&!e.isPharma()&&!e.isVast()}};var O=i(696);const x="data:image/svg+xml;base64,PHN2ZyBjbGFzcz0ic3ZnLWlubGluZS0tZmEgZmEtY2hldnJvbi1yaWdodCBmYS13LTEwIiBhcmlhLWhpZGRlbj0idHJ1ZSIgZm9jdXNhYmxlPSJmYWxzZSIgZGF0YS1wcmVmaXg9ImZhcyIgZGF0YS1pY29uPSJjaGV2cm9uLXJpZ2h0IiByb2xlPSJpbWciIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgdmlld0JveD0iMCAwIDMyMCA1MTIiIGRhdGEtZmEtaTJzdmc9IiIgc3R5bGU9IndpZHRoOiA4cHg7CiAgICBtYXgtd2lkdGg6IDEwMCU7CiAgICBsaW5lLWhlaWdodDogMTBweDsKICAgIGZsb2F0OiByaWdodDsiPjxwYXRoIGZpbGw9IiNmZmYiIGQ9Ik0yODUuNDc2IDI3Mi45NzFMOTEuMTMyIDQ2Ny4zMTRjLTkuMzczIDkuMzczLTI0LjU2OSA5LjM3My0zMy45NDEgMGwtMjIuNjY3LTIyLjY2N2MtOS4zNTctOS4zNTctOS4zNzUtMjQuNTIyLS4wNC0zMy45MDFMMTg4LjUwNSAyNTYgMzQuNDg0IDEwMS4yNTVjLTkuMzM1LTkuMzc5LTkuMzE3LTI0LjU0NC4wNC0zMy45MDFsMjIuNjY3LTIyLjY2N2M5LjM3My05LjM3MyAyNC41NjktOS4zNzMgMzMuOTQxIDBMMjg1LjQ3NSAyMzkuMDNjOS4zNzMgOS4zNzIgOS4zNzMgMjQuNTY4LjAwMSAzMy45NDF6Ij48L3BhdGg+PC9zdmc+Cgo=";var k=function({placement:e,creative:t,asyncUtil:i,analytics:n,docInfo:o,eventController:c}){return{render:function({domRefs:l}){if(function(e,i){if(i.ctaMacro)return!1;return t.isDemandSideCtaTextOptIn()&&!!e}(l.mainImageCsrEl,l)){const d=function(i){const r=document.createElement("div");return r.className=e.invCode+"_sponsor_tag",r.innerText=i,r.appendChild(function(){const t=document.createElement("span");let i=document.createElement("img");return i.className=e.invCode+"_sponsor_tag_arrow",i.src=x,i=a.Z.setStyleProperties(i,[["width","8px"],["max-width","100%"],["line-height","15px"],["float","right"],["margin-top","3px"]]),t.appendChild(i),t}()),a.Z.setStyleProperties(r,[["display","block"],["font-family","'Open Sans', sans-serif"],["font-size","12px"],["font-weight","normal"],["font-style","normal"],["color","#fff"],["text-transform","none"],["letter-spacing","normal"],["text-decoration","none"],["text-align","left"],["padding","5px"],["background","rgba(40,103,178,.7)"],["width","100%"],["z-index",(0,A.K)(t,A.T.CTA_OVERLAY)],["float","left"],["position","relative"],["box-sizing","border-box"],["pointer-events","all"],["cursor","pointer"]])}(t.getParams().cta);i.listen(d,"click",(()=>{n.fireEEE("click_cta")})),c.on(s.ql,(e=>{e.height&&function(e){const t=e.adWrapper.clientHeight;(0,r.ZM)(e.ctaElList).forEach((t=>{(0,r.l)(t),e.ctaElList.pop()}));const i=t-e.adWrapper.clientHeight;i&&function(e,t){if(o.canAccessTop){if(o.window.frameElement){const{frameElement:t}=o.window,i=a.Z.getPropertyValue(t,"height"),r=parseInt(i,10);r&&a.Z.setStyle(t,"height",r-e+"px")}}else{const i=a.Z.getPropertyValue(t,"top"),r=(parseInt(i,10)||0)+e/2;a.Z.setStyle(t,"top",r+"px"),a.Z.setStyle(t,"position","absolute")}}(i,e.adWrapper)}(l)})),l.ctaOverlay=d}}}};const j=1,Z=2,U=3;var F=function(e,t){const{positionService:i,featureConfigs:s}=t,a={initState:function(){const t=s.reduce(((e,t)=>Object.assign(e,t.initState)),(0,r.mz)(e.initState));return{...B,...t}}(),supportedDomRefs:d("supportedDomRefs",W)},o=n(a),c=d("renderers",V),l=d("eventManagers",H);return{render:function(){e=c,e.forEach((e=>e(t).render(o))),i.setAdContainer(o.domRefs.adWrapperWithDims);var e;const n=(0,r.Xq)(Object.keys(o.domRefs),a.supportedDomRefs);if(n.length>0)throw new O.Z("domRefs invalid. Unmatched keys: "+n.join(", "));return Object.freeze(o.domRefs),h(),Promise.all(o.promises).then((()=>o))},context:o};function d(t,i){return s.reduce(((e,i)=>e.concat(i[t])),e[t]).concat(i)}function h(){l.forEach((e=>new e(t).init(o)))}};const B={isAdChoiceFromTemplate:!1,isBackgroundImage:!1,imageBoxingOffsetX:0,imageBoxingOffsetY:0,logoOffsetX:0,logoOffsetY:0,visibleImageWidth:0,visibleImageHeight:0},W=["adchoices","adWrapper","adWrapperWithDims","logo","mainClickTarget","mainImage","mainImageCsrEl","overlayContainer","innerOverlayContainer","ctaOverlay","ctaElList","ctaMacro","progressBar"],V=[N,D,k,({creative:e,placement:t,errorHandler:i,asyncUtil:r,browserInfo:n,eventController:o})=>{let c=null,l=null,d=null,h=null,u=null,p=null,m=null;return{render:function(p){c=p,({domRefs:l,state:d}=c),m=new I({creative:e,placement:t,domRefs:l,state:d,browserInfo:n,errorHandler:i});l.mainImageCsrEl?function(){let t;if(h=_(),e.isVast()){if(t=l.video,t.parentElement.appendChild(h),o.on(s.Cn,E),e.isHighImpact()){const t=function(){const t=document.createElement("div");return t.className=b+"progress",l.progressBar=t,a.Z.setStyleProperties(t,[["display","block"],["background-color","rgb(252, 85, 20)"],["height","3px"],["transition","all .3s linear"],["position","relative"],["z-index",(0,A.K)(e,A.T.VIDEO_PROGRESS_BAR)]]),t.style.setProperty("width","0"),t}();g(),h.appendChild(t)}}else t=l.mainImageCsrEl,l.mainImageCsrEl.insertBefore(h,l.mainImageCsrEl.firstElementChild);o.on(s.p0,v),o.on(s.ql,y),l.ctaOverlay&&(u||g(),e.isWindow()||e.isCarousel()?a.Z.setStyle(h,"position","absolute"):a.Z.setStyle(h,"position","relative"),h.appendChild(l.ctaOverlay));f(m.create())}():(m.handleNonCSRElements(f),h=_(),r.addResizeListener(w),l.mainImage&&l.mainImage.addEventListener("load",C));l.overlayContainer=h}};function g(){u=_(),u.className=b+"inner-transparent",a.Z.setStyle(u,"position","relative"),l.innerOverlayContainer=u,h.appendChild(u)}function f(e){try{if(0===e.length)return;const t=u||h;e.forEach((e=>{!function({element:e,corner:t,xOffsetPx:i,yOffsetPx:r},n){n.appendChild(e),a.Z.setStyle(e,"pointer-events","all"),S[t](e,i,r)}(e,t),function(e){e.callback&&e.callback()}(e)}))}catch(e){i.fireError(e,i.ERROR)}}function y(e){var t;e.height&&(p=e,h.offsetHeight&&h.offsetHeight!==(null===(t=l.ctaOverlay)||void 0===t?void 0:t.offsetHeight)||(a.Z.setStyle(h,"width",e.width+"px"),a.Z.setStyle(h,"height",e.height+"px")),l.ctaOverlay&&M(l.ctaOverlay))}function v(e){a.Z.setStyle(h,"top",e.y+"px"),a.Z.setStyle(h,"left",e.x+"px"),p&&(a.Z.setStyle(h,"height",p.height-2*e.y+"px"),a.Z.setStyle(h,"width",p.width-2*e.x+"px"))}function _(){const e=document.createElement("div");return e.className=b+"transparent",a.Z.setStyle(e,"position","absolute"),a.Z.setStyle(e,"pointer-events","none"),e}function w(){T();const e=l.mainImage;e&&e.complete&&C()}function C(){T();const e=l.mainImage.getBoundingClientRect(),t=h.parentElement.getBoundingClientRect(),i=e.top-t.top,r=e.left-t.left;a.Z.setStyle(h,"top",i+"px"),a.Z.setStyle(h,"left",r+"px"),a.Z.setStyle(h,"width",e.width+"px"),a.Z.setStyle(h,"height",e.height+"px")}function E(e){a.Z.setStyle(h,"width",e.width+"px"),a.Z.setStyle(h,"height",e.height+"px"),l.progressBar&&M(l.progressBar)}function T(){if(null===h.parentElement){(function(e){let t=e;const r=a.Z.getPropertyValue(t,"position");["static","","relative"].indexOf(r)<0?t=document.body:a.Z.setStyle(t,"position","relative");t!==e&&i.fireError("Invalid position style set on ad wrapper",i.WARNING);return t})(l.adWrapperWithDims).appendChild(h)}return h.parentElement}function M(e){const t=h.offsetHeight-e.offsetHeight;a.Z.setStyle(u,"height",t+"px")}}],H=[class{constructor({creative:e,eventController:t,asyncUtil:i}){this.creative=e,this.eventController=t,this.asyncUtil=i,this.params=e.getParams(),this.adchoicesUrl=this.params.adchoices_url}init({domRefs:e,state:t}){const i=e.adchoices;this.asyncUtil.listen(i,"click",(()=>this.onClick()),!1,!0),t.isAdChoiceFromTemplate||(this.asyncUtil.listen(i,"mouseenter",(()=>this.eventController.publish(s.WR)),!1,!0),this.asyncUtil.listen(i,"mouseleave",(()=>this.eventController.publish(s.jB)),!1,!0))}onClick(){window.open(this.adchoicesUrl,"popup","width=650,height=316")}},class{constructor({analytics:e,eventController:t,docInfo:i}){this.analytics=e,this.eventController=t,this.docInfo=i,this.ctaRenderMethod=j,this.ctaRenderText=""}init({domRefs:e}){var t;e.ctaOverlay?this._buildOverlayRenderResult(e.ctaOverlay):e.ctaMacro?this._buildTemplateRenderResult(e.ctaMacro,this.docInfo.window):(null===(t=e.ctaElList)||void 0===t?void 0:t.length)>0&&this._buildEmptyMacroRenderResult(e.ctaElList);const{ctaRenderMethod:i,ctaRenderText:r}=this;this.analytics.ctaRenderResult({cta_render_method:i,cta_render_text:r})}_buildTemplateRenderResult(e,t){e&&(0,r.tU)(e,t)&&(this.ctaRenderMethod=Z,this.ctaRenderText=e.innerText)}_buildOverlayRenderResult(e){this.ctaRenderMethod=U,this.ctaRenderText=e.innerText}_buildEmptyMacroRenderResult(e){this.ctaRenderMethod=j,this.ctaRenderText=e[0].innerText}}]},973:function(e,t,i){i.d(t,{Z:function(){return n}});var r=i(654);class n{constructor({analytics:e,asyncUtil:t}){this.analytics=e,this.asyncUtil=t}init(e){(0,r.f)(e.domRefs.adWrapperWithDims,(()=>this.mouseover()),this.asyncUtil)}mouseover(){this.analytics.mouseover()}}},849:function(e,t,i){i.d(t,{$m:function(){return a},FU:function(){return A},Jt:function(){return w},ML:function(){return s},Oe:function(){return g},Pw:function(){return o},RU:function(){return n},T4:function(){return v},X8:function(){return m},al:function(){return y},bc:function(){return h},cM:function(){return d},co:function(){return I},fz:function(){return _},kq:function(){return r},ot:function(){return f},qH:function(){return c},qp:function(){return p},tF:function(){return l},xg:function(){return u}});const r="r",n="aop",s="ev",a="evv",o="ev1",c="eev",l="sce",d="pmd",h="pe",u="ctar",p="dr",m={DRM_ADVERTISER:1,DRM_PUBLISHER:2,DRM_DEFAULT:3,DRM_NO_MACRO:4},g="eee",f="ec",y="em",v="ci",_="vpa",I="evd",A="px",w="tpvpx"},314:function(e,t,i){i.d(t,{v:function(){return n},w:function(){return r}});const r=23019,n=60003},493:function(e,t,i){i.d(t,{Z:function(){return s}});var r=i(942),n=i(277);class s{constructor({environment:e,bundleStartTime:t},{eventController:i,urlParams:n}){(0,r.Z)(this,"auctionId","none"),(0,r.Z)(this,"formatName","none"),(0,r.Z)(this,"_log",((e,...t)=>{console.log(this._makeLogString(e,t))})),this.environment=e,this.bundleStartTime=t,this.eventController=i,n.debugLog&&this._setupListeners()}_setupListeners(){this.eventController.on(n.sY,this._log),this.eventController.on(n.i2,(e=>{this.auctionId=e.settings.additional_data.aid,this.formatName=this._getFormatName(e.settings.format_id)}))}_getFormatName(e){return Object.keys(this.environment.formats).find((t=>this.environment.formats[t]===e))}_makeLogString(e,t){return"["+this.formatName+"]["+this.auctionId+"]["+this._getTimeSinceStartMS()+"ms]["+e+"]"+(t.length>0?JSON.stringify(t):"")}_getTimeSinceStartMS(){return performance.now()-this.bundleStartTime}static warn(e,...t){console.warn("tl: "+(e.stack||e),{...t})}}},277:function(e,t,i){i.d(t,{Cn:function(){return y},E7:function(){return c},GZ:function(){return T},H0:function(){return F},Iq:function(){return Z},Ku:function(){return a},Lc:function(){return z},MD:function(){return B},Mz:function(){return G},NH:function(){return o},Nq:function(){return C},P7:function(){return p},PZ:function(){return $},Q2:function(){return n},RB:function(){return u},RU:function(){return I},S_:function(){return q},Sn:function(){return m},T5:function(){return k},TZ:function(){return N},Up:function(){return j},WR:function(){return V},Wh:function(){return A},XW:function(){return W},ZY:function(){return b},a8:function(){return g},cF:function(){return Y},eP:function(){return O},fh:function(){return d},h7:function(){return E},hs:function(){return X},i2:function(){return K},jB:function(){return H},jT:function(){return L},js:function(){return x},kJ:function(){return U},ly:function(){return l},mA:function(){return Q},nP:function(){return w},oU:function(){return R},o_:function(){return S},ot:function(){return s},p0:function(){return v},q3:function(){return _},ql:function(){return f},r7:function(){return h},re:function(){return P},sY:function(){return r},tn:function(){return ee},wK:function(){return M},yK:function(){return D},z7:function(){return J}});const r="log",n="mute",s="unmute",a="ended",o="play",c="pause",l="complete",d="playerReady",h="vpaidFallback",u="autoplayFallback",p="triggerFallbacks",m="cancelFallbacks",g="csrReady",f="csrUpdate",y="csrVideoDimsUpdate",v="csrOverlayOffsetUpdate",_="forceCsrUpdate",I="adOnPage",A="clickThrough",w="positionUpdate",C="vpaid.AdLog",E="vpaid.AdImpression",T="vpaid.AdPlaying",b="vpaid.AdStarted",S="vpaid.AdVideoComplete",M="vpaid.AdVideoFirstQuartile",P="vpaid.AdVideoMidpoint",R="vpaid.AdVideoStart",D="vpaid.AdVideoThirdQuartile",L="vpaid.AdClickThru",N="vastVideoError",O="vpaidBlockedError",x="vpaidNonBlockedError",k="scroll",j="transform",Z="transitionEnd",U="goRight",F="goLeft",B="onTriggerEnter",W="onTriggerExit",V="onAdchoicesEnter",H="onAdchoicesExit",z="clickPause",G="clickPlay",Q="twoSecondViewable",Y="trackClick",q="firstPlay",J="mouseenter",X="mouseleave",K="auctionResponse",$="auctionComplete",ee="passthru"},498:function(e,t,i){i.d(t,{Z:function(){return o}});var r=i(942),n=i(849),s=i(696),a=i(493);class o{constructor({firePix:e,lifecycleManager:t,urlParams:i}){this.firePix=e,this.lifecycleManager=t,this.urlParams=i,this.previousErrorMap={}}get UNKNOWN(){return 0}get ERROR(){return 1}get WARNING(){return 2}get LOG(){return 3}fireError(e,t=0,i={}){const r=this.lifecycleManager.getPhase();if(this.urlParams.debugFlag)a.Z.warn(e,r,t,i);else{if(e.stack){const t={stack:e.stack};Object.assign(i,t)}this._logEbError(e instanceof Error?e.message:e,r,t,i)}}decorate(e){let t=!1;const i=this;return function(...r){try{return e.apply(this,r)}catch(e){t||(t=!0,i.fireError(e,e instanceof s.Z?e.errorLevel:void 0))}return null}}_logEbError(e,t,i,r){const s={e:e,block:t,lvl:i,dc:r?JSON.stringify(r):""};return this._isFirstOfType(t,i)?this._recordError(t,i):s.dup=1,this.firePix.fireEB(n.tF,s),this}_isFirstOfType(e,t){return!(this.previousErrorMap[e]&&this.previousErrorMap[e][t])}_recordError(e,t){this.previousErrorMap[e]||(this.previousErrorMap[e]={}),this.previousErrorMap[e][t]=!0}}(0,r.Z)(o,"UNKNOWN",0),(0,r.Z)(o,"ERROR",1),(0,r.Z)(o,"WARNING",2),(0,r.Z)(o,"LOG",3)},696:function(e,t,i){i.d(t,{Z:function(){return s}});var r=i(942),n=i(498);class s extends Error{constructor(e,t=n.Z.ERROR){super(e),(0,r.Z)(this,"errorLevel",null),this.errorLevel=t}}},465:function(e,t,i){i.d(t,{Z:function(){return c},g:function(){return o}});var r=i(114),n=i(145);const s="tl-img-src-place-holder",a="tl-img-srcset-place-holder",o=r.Z.TL_CLASS_PREFIX+"cta-macro";class c{constructor(e){this._errorHandler=e,this._templateDetail={string:""},this._chosenTemplate=null,this._templateWrapEl=null,this._templateId=0}get templateDetail(){return this._templateDetail}get chosenTemplate(){return this._chosenTemplate}get templateWrapEl(){return this._templateWrapEl}get templateId(){return this._templateId}parse(e){const t=c.makeTemplateWrapEl(c.getTransformedMacroSrcAttrs(e)),i=c.markElements(t),r=i.innerHTML;(0,n.NH)(i),this._templateDetail.string=c.getInterpolatedMacroSrcAttrs(r),this._templateWrapEl=t,this._chosenTemplate=i}static markElements(e){return e&&1===e.nodeType?(c.isClickThroughEl(e)&&e.classList.add(r.Z.TL_CLASS_PREFIX+"clickthrough-url"),c.isLogoEl(e)&&e.classList.add(r.Z.TL_CLASS_PREFIX+"logo-img"),c.isSubHeadlineEl(e)&&e.classList.add(r.Z.TL_CLASS_PREFIX+"sub-headline"),c.isCtaMacroEl(e)&&e.classList.add(o),[].forEach.call(e.childNodes,(t=>{3===t.nodeType&&r.Z.TEXT_FIELDS.forEach((i=>{t.textContent.toLowerCase().indexOf("%%%"+i+"%%%")>-1&&e.classList.add(""+r.Z.TL_CLASS_PREFIX+i)})),c.markElements(t)})),e):e}static isClickThroughEl(e){if(!e||!e.tagName||!e.getAttribute("href"))return!1;const t=e.tagName.toLowerCase(),i=e.getAttribute("href").toLowerCase();return"a"===t&&i.indexOf("%%%clickthrough_url%%%")>-1}static isLogoEl(e){if(!e||!e.tagName||!e.getAttribute(s))return!1;const t=e.tagName.toLowerCase(),i=e.getAttribute(s).toLowerCase();return"img"===t&&i.indexOf("%%%logo_image_url%%%")>-1}static isSubHeadlineEl(e){return e&&e.tagName&&e.innerHTML&&"%%%subheadline%%%"===e.innerHTML.toLowerCase()}static isCtaMacroEl(e){return e&&e.innerHTML&&"%%%cta%%%"===e.innerHTML.toLowerCase().trim()}static getTransformedMacroSrcAttrs(e){return e.replace(/src([="'\s]+%%%)/gi,s+"$1").replace(/srcset([="'\s]+%%%)/gi,a+"$1")}static getInterpolatedMacroSrcAttrs(e){const t=new RegExp(s,"g"),i=new RegExp(a,"g");return e.replace(t,"src").replace(i,"srcset")}static makeTemplateWrapEl(e){const t=document.createElement("div");return t.innerHTML=e,t}static hasMacro(e){return-1!==e.indexOf("%%%")}getAltTemplate(e,t,i,r){const s=+r||+i||+t;if(isNaN(Number(s)))return{};if(!e)return this.errNoAltTemplates(),{};const a=(0,n.sE)(e,(e=>e.id===s));if(!a)return this.errTemplateNotFound(s),{};const{id:o,...c}=a;return this._templateId=o,c}errNoAltTemplates(){this._errorHandler.fireError("templateId specified but no templates found on placement. Default templateCode used.",this._errorHandler.WARNING)}errTemplateNotFound(e){const t="Cannot find templateCode with id = "+e+" in templateList. Default templateCode used";this._errorHandler.fireError(t,this._errorHandler.WARNING)}}},114:function(e,t){t.Z={BUTTONS_DIR:"https://ib.3lift.com/static/buttons/",NW:"NW",NE:"NE",SE:"SE",SW:"SW",BASE_Z_INDEX:0,DEFAULT_ADCHOICES_URL:"https://optout.aboutads.info",TEXT_FIELDS:["heading","caption"],TINY_IMG_DATA:"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=",TL_CLASS_PREFIX:"tl-",COLORS:{BLACK:"#000",WHITE:"#fff"},DCO_PROTOCOLS:{DYNAMIC_CONTENT:1,NATIVE_ADS:2,DV_BLOCKING:3},DEFAULT_FALLBACK_URL:"https://images.3lift.com/5333898.jpg",DISPLAY_CLICK_MACROS:[{regex:/{clickurl}/gi,level:0},{regex:/{clickurl_enc}/gi,level:1},{regex:/{clickurl_dbl_enc}/gi,level:2}],SRCSET_2X_CAP_PX:600}},440:function(e,t,i){i.d(t,{rl:function(){return d},yK:function(){return l}});i(876);const r="height",n="width",s=(e,t,i)=>{const s=i===r?n:r;if(!t[i]||!e[i])return{height:0,width:0};const a=e[i]/t[i];return{[i]:e[i],[s]:t[s]*a}},a=(e,t)=>s(e,t,r),o=(e,t)=>s(e,t,n),c=({height:e,width:t},{height:i,width:r})=>i<=e&&r<=t,l=(e,t)=>{const i=a(e,t);return c(e,i)?i:o(e,t)},d=(e,t)=>{if(!e.height||!t.height)return{x:0,y:0};const i=a(e,t);return c(e,i)?((e,t)=>({x:Math.ceil((e.width-t.width)/2)||0,y:0}))(e,i):((e,t)=>{const i=o(e,t);return{x:0,y:Math.ceil((e.height-i.height)/2)||0}})(e,t)}},630:function(e,t,i){i.d(t,{Z:function(){return u}});var r=i(145),n=i(849);class s{static build(e,t,i){const n=s.getImageUrlKey(t),a=(0,r.Rz)(t[n]);a&&(t[n]=a);const o=t[n],c=s.parseSizedImgMacros(e,o);Object.assign(t,c);let l=t.cta;if(!l){const e="Learn more";l=i.cta||e}const d=this.parseDisclosure(...arguments);return s.interpolate(e,{...t,inv_code:i.invCode,disclosure:d,cta:l})}static parseDisclosure(e,t,i,r){var s;let a=null===(s=t.disclosure)||void 0===s?void 0:s.text;a||(a=i.disclosure);const o=new RegExp("%%%DISCLOSURE%%%","gi");return e.match(o)||(r.disclosure={render_method:n.X8.DRM_NO_MACRO,text:this.getDisclosureText(e)}),a}static getDisclosureText(e){const t=new RegExp(">(.*)%%%ADVERTISER_NAME%%%","i"),i=e.match(t);return i&&i[1]||""}static parseSizedImgMacros(e,t){const i=(0,r.EC)(t),n=e.match(/%%%IMAGE_URL_\d+_X_\d+%%%/gi)||[],s={};return n.forEach((e=>{const n=e.slice(3,-3),a=n.split("_");if("data"===i.protocol)s[n]=t;else{i.host.indexOf("img.3lift")>=0&&(i.queryKey.width=a[2],i.queryKey.height=a[4]);const e=(o=i.queryKey,Object.keys(o).map((e=>e+"="+o[e])).join("&"));s[n]=(0,r.Rz)("//"+i.host+i.path+"?"+e)}var o})),s}static interpolate(e,t){let i,r,n=e;return Object.keys(t).forEach((s=>{var a;i=t[s],r=new RegExp("%%%"+s+"%%%","gi"),e.match(r)&&(n=n.replace(r,(a=i,()=>a)))})),n}static getImageUrlKey(e){const t=Object.keys(e);let i,r;for(r=0;r<t.length;r+=1)if(i=t[r],"image_url"===i.toLowerCase())return i;return null}}var a=i(465),o={init:function({adWrapper:e,creative:t,analytics:i,asyncUtil:n,domRefs:s,errorHandler:o}){const c=t.getVastTag(),l=c&&c.getVastClickThroughUrl(),d=function(e,t){const i="tl-cta",n=t+"_cta",s="tl-cta-macro";let a=e.getElementsByClassName(i);a.length||(a=e.getElementsByClassName(n));a.length||(a=e.getElementsByClassName(s));return(0,r.ZM)(a)}(e,t.placement.invCode);t.params.clickthrough_url||l?(s.ctaElList=d,d.forEach((e=>{n.listen(e,"click",(()=>{i.fireEEE("click_cta")})),function(e,t){if(e.className.includes(a.g))t.ctaMacro=e;else{const r=e.childNodes;for(let e=0;e<r.length;e++){var i;null!==(i=r[e].className)&&void 0!==i&&i.includes(a.g)&&(t.ctaMacro=r[e])}}}(e,s)}))):(d.forEach(r.l),o.fireError("Cta removed. No clickthrough present.",o.WARNING))}};var c=i(114);var l={init:function(e,t){if(!t.params.logo_image_url){const t=e.getElementsByClassName(c.Z.TL_CLASS_PREFIX+"logo-img")[0];t&&(t.src=c.Z.TINY_IMG_DATA,(0,r.l)(t));const i=e.getElementsByClassName(c.Z.TL_CLASS_PREFIX+"logo")[0];i&&(0,r.l)(i)}}};const d={init:function(e,t){const i=e.getElementsByClassName(c.Z.TL_CLASS_PREFIX+"sub-headline");if(!t.params.subheadline&&i.length>0){const e=i[0];e&&(0,r.l)(e)}}};var h=d,u=function({environment:e,placement:t,creative:i,templateCode:n,analytics:a,asyncUtil:d,errorHandler:u}){const m=i.getParams();let g=null,f=null;return{render:function(e){var I;f=e.domRefs;const A=function(e){const i=document.createElement("div");i.innerHTML=e,i.style.display="inline",i.className="tlod";const s=(0,r.sE)(i.children,a);return{adWrapper:c(),adWrapperWithDims:s};function a(e){return-1===p.indexOf(_(e))}function o(e){return"script"===_(e)}function c(){let e;return t.customOptions.unwrappedUnit?((0,r.hX)(i.children,o).forEach((e=>{s.appendChild(e)})),e=s):e=i,e.setAttribute("plid",t.id),n.templateId&&e.setAttribute("tlid",n.templateId),(0,r.Nj)(m.additional_data.adid,e),e}}(s.build(n.templateDetail.string,m,t,a));f.adWrapper=A.adWrapper,f.adWrapperWithDims=A.adWrapperWithDims,g||(g=function(){const e=f.adWrapper.getElementsByTagName("img");return y((0,r.hX)(e,v))}()||function(){const e=f.adWrapper.getElementsByTagName("*"),t=(0,r.EC)(m.image_url);return(0,r.sE)(e,i);function i(e){const i=e.style&&e.style["background-image"],r=e.hasAttribute&&e.hasAttribute("data-background");return i&&i.match(t.query)||r&&r.match(t.query)}}());f.mainImage=g,"div"===_(g)&&(e.state.isBackgroundImage=!0);"img"===_(g)&&m.image_srcset_2x&&!g.getAttribute("srcset")&&t.imageWidth<=c.Z.SRCSET_2X_CAP_PX&&t.imageHeight<=c.Z.SRCSET_2X_CAP_PX&&(null===(I=m.customization)||void 0===I||!I.reveal)&&g.setAttribute("srcset",m.image_srcset_2x);if(l.init(f.adWrapper,i),o.init({adWrapper:f.adWrapper,creative:i,analytics:a,asyncUtil:d,domRefs:f,errorHandler:u}),h.init(f.adWrapper,i),!m.clickthrough_url){const e=f.adWrapper.getElementsByClassName("tl-clickthrough-url");for(let t=0;t<e.length;t++)e[t].removeAttribute("href"),e[t].removeAttribute("target")}const w=f.adWrapper.getElementsByClassName("tl_clickthrough")[0];f.mainClickTarget=w||f.adWrapperWithDims},_bestImage:y};function y(e){return e.sort((function(e,i){const r="none"===t(e),n="none"===t(i),s=!r&&!n;if(r&&n||s){const t=e.width*e.height,r=i.width*i.height;return isNaN(t)?1:isNaN(r)?-1:r-t}if(r)return 1;return-1}))[0];function t(e){return e&&e.style&&e.style.display}}function v(t){const i=[m.image_url,e.tlImageAddr];return t.src&&i.some((e=>(0,r.BD)(t.src,e)))}function _(e){const t=e&&e.tagName;return t&&t.toLowerCase&&t.toLowerCase()}};const p=["iframe","style","meta","script","link","br","hr"]},251:function(e,t,i){var r=i(277),n=i(145);const s="tl-dummy-img";t.Z=function({placement:e,environment:t,creative:i,browserInfo:a,asyncUtil:o,eventController:c}){let l,d,h;return{render:function(g){h=g;const{state:f,domRefs:y}=h;if(f.isBackgroundImage&&(i.isImage()||i.isCinemagraph()))return void(y.mainImageCsrEl=y.mainImage);const v=y.mainImage;y.mainImageCsrEl||(y.mainImageCsrEl=function(e,r){const s=i.getParams().render_options_bm,a=t.renderOptionsMap;if((0,n.hU)(s,a.gda_iframe))return function(){const e=i.getParams().allImages[0].img_frame,t=document.createElement("div");return t.innerHTML=e,t.firstChild}();return m(e,r)}(v.src,e));d=y.mainImageCsrEl,d.classList.add("tl-csr"),l=function(e,t,i,r="",c="",l){const d=l.createElement("img");d.className=r+" "+s,d.id=c,d.style.setProperty("display","none","important"),a.isIE?d.onload=()=>{o.timeoutWrap(u,0)}:h.promises.push(new Promise((e=>{d.onload=()=>{u(),e()}})));return d.src=function(e,t,i){return(0,n.Rz)("//"+e+"/blank?width="+t+"&height="+i)}(e,t,i),d}(t.tlImageAddr,e.imageWidth,e.imageHeight,v.className,v.id,document),function(e,t={}){let i,r=0;for(;t[r];)i=t[r],e.style.setProperty(i,t[i],"important"),r++}(l,v.style),v.parentNode.insertBefore(l,v),o.addResizeListener(p),(0,n.C4)(d,v),c.on(r.q3,p),c.on(r.S_,p)},createMainImageCsrDiv:m};function u(){c.publish(r.a8),p()}function p(){l&&c.publish(r.ql,function(){if(!l)return{width:0,height:0};l.style.setProperty("display","","important");const e=l.ownerDocument.defaultView,t=e?e.getComputedStyle(l):getComputedStyle(l);!function(e,t){["width","height","float","margin","margin-top","margin-right","margin-bottom","margin-left","max-width","max-height","padding","padding-top","padding-right","padding-bottom","padding-left","border","border-top","border-right","border-bottom","border-left"].forEach((i=>{t[i]&&e.style.setProperty(i,t[i],"important")}));""===t.position||"static"===t.position?e.style.setProperty("position","relative","important"):e.style.setProperty("position",t.position,"important")}(d,t);const i=parseFloat(t.width),r=parseFloat(t.height);return l.style.setProperty("display","none","important"),{width:i,height:r}}())}function m(e,t){const i=document.createElement("div"),r=t.customOptions.is3pAdPreview?"cover":"contain";return i.style.setProperty("width",t.imageWidth+"px","important"),i.style.setProperty("height",t.imageHeight+"px","important"),i.style.setProperty("background-size",r,"important"),i.style.setProperty("background-position","center","important"),i.style.setProperty("background-repeat","no-repeat","important"),i.style.setProperty("background-image","url("+e+")","important"),i}}},876:function(e,t,i){var r=i(696);function n(e,t,i){if(!e)throw new r.Z("Tried to set style "+t+" to "+i+" on an invalid element.");if(!e.style)throw new r.Z("Failed to set styles on "+e.nodeName);e.style.setProperty(t,i,"important")}t.Z={setStyle:n,setStyleProperties:function(e,t){if(!Array.isArray(t))throw new r.Z("arg2 of setStyleProperties must be an array");for(let i=0;i<t.length;i++)n(e,t[i][0],t[i][1]);return e},getPropertyValue:function(e,t){return window.getComputedStyle(e).getPropertyValue(t)}}},654:function(e,t,i){i.d(t,{f:function(){return r},l:function(){return n}});function r(e,t,i){let r=!1,n=null;i.listen(e,"mouseenter",(function(){r=!0,n=i.timeoutWrap((()=>{r&&t()}),300)})),i.listen(e,"mouseleave",(function(){clearTimeout(n),r=!1}))}function n(e){e&&window.open(e,"_blank")}},145:function(e,t,i){i.d(t,{A2:function(){return b},BD:function(){return B},BF:function(){return a},C4:function(){return x},CA:function(){return c},Cd:function(){return k},DA:function(){return f},EC:function(){return w},E_:function(){return P},Ej:function(){return F},GY:function(){return v},I$:function(){return W},LB:function(){return N},NH:function(){return U},NK:function(){return p},Nj:function(){return X},P2:function(){return O},QU:function(){return j},Qt:function(){return A},Rz:function(){return E},UP:function(){return _},Up:function(){return L},Xq:function(){return h},Z0:function(){return T},ZM:function(){return J},Zx:function(){return C},hL:function(){return R},hU:function(){return o},hX:function(){return G},hj:function(){return S},hr:function(){return Q},hv:function(){return V},l:function(){return g},lX:function(){return Y},mz:function(){return l},p5:function(){return M},qe:function(){return D},r3:function(){return y},rO:function(){return u},sE:function(){return z},sf:function(){return Z},tU:function(){return K},uC:function(){return I},ws:function(){return q},xh:function(){return m},yu:function(){return H}});var r=i(876),n=i(114),s=i(696);function a(...e){const t=[].slice.call(e);return Object.assign.apply(null,t.map((function(e){const t={};return Object.keys(e).forEach((i=>{(function(e){return"_"!==e[0]})(i)&&(t[i]=e[i])})),t})))}function o(e,t){return!!e&&!!(e&2**t)}function c(e){return r.Z.setStyle(e,"display","inline"),r.Z.setStyle(e,"box-sizing","content-box"),r.Z.setStyle(e,"-webkit-box-sizing","content-box"),r.Z.setStyle(e,"-moz-box-sizing","content-box"),r.Z.setStyle(e,"padding","0"),r.Z.setStyle(e,"border","0"),r.Z.setStyle(e,"margin","0"),r.Z.setStyle(e,"float","none"),r.Z.setStyle(e,"outline","none"),r.Z.setStyle(e,"object-fit","fill"),r.Z.setStyle(e,"background","none"),e}function l(e){if(d(e))return e;if(Array.isArray(e))return e.reduce(function(e=null){return(t,i)=>(t[i]=e,t)}(null),{});throw new TypeError("invalid arguments, objectify takes an object or an array")}function d(e){return"object"==typeof e&&!Array.isArray(e)&&null!==e}function h(e,t){const i=e.filter(n.bind(null,t)),r=t.filter(n.bind(null,e));return i.concat(r);function n(e,t){return-1===e.indexOf(t)}}function u(e){return Math.floor((e+1)*Math.random())}function p(e){return!isNaN(e)&&"number"==typeof e}function m(e,t,i){if(r=e,parseFloat(r)!==parseInt(r,10)||!p(r))throw new TypeError("arg 0 of updateCopyAndHref must be an integer");var r,s;if(s=t,!("object"==typeof Node?s instanceof Node:s&&"object"==typeof s&&"number"==typeof s.nodeType&&"string"==typeof s.nodeName))throw new TypeError("arg 1 of updateCopyAndHref must be DOM element");if(!Array.isArray(i))throw new TypeError("arg 2 of updateCopyAndHref must be an array");n.Z.TEXT_FIELDS.forEach((r=>{const s=t.getElementsByClassName(""+n.Z.TL_CLASS_PREFIX+r);for(let t=0;t<s.length;t++)s[t].textContent=i[e][r]}));const a=t.getElementsByClassName(n.Z.TL_CLASS_PREFIX+"clickthrough-url");for(let t=0;t<a.length;t++)a[t].href=i[e].clickthrough_url}function g(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function f(e,t){return isNaN(e)&&isNaN(t)?NaN:isNaN(e)?t:isNaN(t)?e:Math.min(e,t)}function y(e,t){let i=!1;return function(...r){i||e.apply(t||null,r),i=!0}}function v(e){return[...e].reverse()}function _(e,t){Math.random()<e&&t()}function I(e,t,i={},r=!0,n="?"){!1!==r&&(i.cb=A(5));const s=function(e){const t={};return Object.keys(e).forEach((i=>{const r=e[i];null!=r&&(t[i]=r)})),t}(i),a=(o=s,Object.keys(o).map((e=>e+"="+encodeURIComponent(o[e]))).join("&"));var o;return E("//"+e.replace(/\/$/,"")+"/"+t+n+a)}function A(e){if(e<1)return NaN;if(1===e)return Math.floor(10*Math.random());const t=10**(e-1);return Math.floor(9*Math.random()*t)+t}function w(e){const t=w.options,i=t.parser[t.strictMode?"strict":"loose"].exec(e),r={};let n=14;for(;n--;)r[t.key[n]]=i[n]||"";return r[t.q.name]={},r[t.key[12]].replace(t.q.parser,((e,i,n)=>{i&&(r[t.q.name][i]=n)})),r}function C(e){if(!e)return e;const t=w(e);let i="";return""!==t.port&&(i=":"+t.port),"//"+t.host+i+t.relative}function E(e){return e?"data:"===e.substring(0,5)?e:function(e){if(e.indexOf("3lift.")>=0||e.indexOf("triplelift.")>=0)return"https:";const t=w(e);if("http"===t.protocol||"https"===t.protocol)return t.protocol+":";try{return window.location.protocol}catch(e){return"https:"}}(e)+C(e):e}function T(){return!!document.getElementById("tl-app")}function b(e=""){return e.toUpperCase()}w.options={strictMode:!1,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}};const S=(e,t="GET")=>new Promise(((i,r)=>{const n=new XMLHttpRequest;n.open(t,e,!0),n.addEventListener("load",(e=>{n.status>=200&&n.status<300?i(e):r(n.statusText)})),n.addEventListener("error",(e=>r(e))),n.send()})),M=e=>Object.keys(e).reduce(((t,i)=>{const r=e[i];return t[i]="number"==typeof r?Math.round(r):r,t}),{}),P=e=>(r.Z.setStyle(e,"display","none"),r.Z.setStyle(e,"width",0),r.Z.setStyle(e,"height",0),e);function R(e,t){if(!e)return"";if(!t)return e;if(e.length<=t)return e;const i=e.slice(0,t);return-1!==i.lastIndexOf("&")?i.slice(0,i.lastIndexOf("&")):i}function D(e,t,i){const r=i.createEvent("Event");if(!r.initEvent)throw new s.Z("triggerEvent could not call initEvent");r.initEvent(t,!0,!0);try{e.dispatchEvent(r)}catch(e){throw new s.Z("triggerEvent could not dispatch an uninitialized event")}}function L(e={}){const t={};return Object.keys(e).forEach((i=>{t[i]=encodeURIComponent(e[i])})),t}function N(e){if(!e)return NaN;const t=e.split("."),i=t[0].split(":"),r=parseInt(t[1],10)||0;return 60*parseInt(i[0],10)*60*1e3+60*parseInt(i[1],10)*1e3+1e3*parseInt(i[2],10)+r}function O(e,t){let i,r=0;return(...n)=>{i&&clearTimeout(i),i=setTimeout(e.bind(null,...n),t);const s=Date.now();s-r>t&&(r=s,e(...n))}}function x(e,t){t.parentElement.insertBefore(e,t),t.parentElement.removeChild(t)}function k(e,t,i){if(!e||!t)return e;if(e.indexOf("images.3lift")<0)return e;if(i&&i<t)return e;let r;r=t<=100?"_w90":t<=200?"_w192":t<=350?"_w300":t<=650?"_w600":"";const n=e.split(".");return n[n.length-2]+=r,n.join(".")}function j(e,t,i,r="px"){e.style.setProperty("width",t+r,"important"),e.style.setProperty("min-width",t+r,"important"),e.style.setProperty("max-width",t+r,"important"),e.style.setProperty("height",i+r,"important"),e.style.setProperty("min-height",i+r,"important"),e.style.setProperty("max-height",i+r,"important")}function Z(e,t){return e.split("&").filter((e=>-1===e.indexOf(t+"="))).join("&")}function U(e){for(;e.lastChild;)e.removeChild(e.lastChild)}function F(e){if(e<0)return NaN;let t,i,r,n,s=e;return t=Math.floor(s/36e5),s-=36e5*t,i=Math.floor(s/6e4),s-=6e4*i,r=Math.floor(s/1e3),n=s-1e3*r,t=t<10?"0"+t:t,i=i<10?"0"+i:i,r=r<10?"0"+r:r,n<10?n="00"+n:n<100&&(n="0"+n),t+":"+i+":"+r+"."+n}function B(e,t){return-1!==e.indexOf(t)}function W(){let e=!1;try{new ActiveXObject("ShockwaveFlash.ShockwaveFlash")&&(e=!0)}catch(t){navigator.mimeTypes&&void 0!==navigator.mimeTypes["application/x-shockwave-flash"]&&navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin&&(e=!0)}return e}function V(e,t){const i=/^https?:/i;return e.replace(i,"")===t.replace(i,"")}function H(e,t){return!!e&&(Object.keys(e).forEach((i=>{t(i,e[i])})),!0)}function z(e,t){if(!e)return!1;for(let i=0;i<e.length;i++)if(t(e[i]))return e[i];return!1}function G(e,t){if(!e)return[];const i=[];for(let r=0;r<e.length;r++)t(e[r])&&i.push(e[r]);return i}function Q(e){return e.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")}function Y(e,t){if(!Array.isArray(e))return[];if(0===t)return[];if(e.length<t)return e;const i=e.slice(),r=[];for(let n=0;n<t;n++){const t=Math.floor(Math.random()*i.length);r.push(e.indexOf(i.splice(t,1)[0]))}return r.sort().map((t=>e[t]))}function q(e){const t=n.Z.DISPLAY_CLICK_MACROS;let i=e;return t.forEach((e=>{const{regex:t}=e;t.test(i)&&(i=i.replace(t,""))})),i}function J(e){return[].slice.call(e)}function X(e,t){e&&(t.ownerDocument.getElementById(e)||t.setAttribute("id",e))}function K(e,t){return"none"!==t.getComputedStyle(e).display}},85:function(e,t,i){i.d(t,{Tl:function(){return s},ZP:function(){return o},jT:function(){return a}});var r=i(942),n=i(277);const s={init:1,running:2,finished:3,success:4,fail:5},a={FIRST:1,SECOND:2};class o{constructor(e){(0,r.Z)(this,"conditions",{}),(0,r.Z)(this,"success",!1),(0,r.Z)(this,"state",s.init),(0,r.Z)(this,"priority",void 0),(0,r.Z)(this,"fireFallbackCondition",void 0),this.eventController=e,this.fireFallbackCondition={fireFallbackAuction:!0},this.addCondition(this.fireFallbackCondition),this.playUnsubscribe=this.eventController.once(n.Sn,(()=>{this.avoidFallbackFunction()}))}addCondition(e){this.conditions={...this.conditions,...e}}modifyCondition(e){const[t,i]=Object.entries(e)[0];void 0!==this.conditions[t]&&(this.conditions[t]=i)}avoidFallbackFunction(){this.fireFallbackCondition.fireFallbackAuction=!1,this.modifyCondition(this.fireFallbackCondition)}conditionsMet(){return Object.values(this.conditions).every((e=>e))}setCallback(e){this.callback=e}finish(){this.success?this.state=s.success:this.state=s.fail}verifySuccess(){this.success=!0}async run(){this.state=s.running,await this.callback(),this.finish()}destroy(){this.conditions={},this.state=s.init,this.playUnsubscribe()}}},601:function(e,t,i){i.d(t,{Z:function(){return s}});var r=i(942);const n={start:"AdVideoStart",firstQuartile:"AdVideoFirstQuartile",midpoint:"AdVideoMidpoint",thirdQuartile:"AdVideoThirdQuartile",complete:"AdVideoComplete",pause:"AdPaused",resume:"AdPlaying",mute:"AdVolumeChange",unmute:"AdVolumeChange"};class s{constructor({auctionID:e,creative:t,placement:i,context:n,asyncUtil:s}){(0,r.Z)(this,"moatApi",void 0),(0,r.Z)(this,"cachedEvents",[]),this._auctionID=e,this._creative=t,this._placement=i,this._context=n,this._asyncUtil=s,this._fireCachedEvent=this._fireCachedEvent.bind(this)}init(e,t){this.moatApi||(e.setAttribute("data-auction-id",this._auctionID),e.setAttribute("data-video-context","inline"),this.moatApi=this._getMoatApi(t,e),this.cachedEvents.forEach(this._fireCachedEvent),this.cachedEvents=[])}track(e){this.moatApi?this._asyncUtil.timeoutWrap((()=>this._fireTracker(e)),0):this.cachedEvents.push(e)}_fireCachedEvent(e){this._fireTracker(e)}_fireTracker(e){if(!n[e])return;let t;t="mute"===e||"unmute"!==e&&this._context.player.isMuted(),this.moatApi.dispatchEvent({type:n[e],adVolume:t?0:1})}_getMoatApi(e,t){return function(e,t,i,r,n){var s,a,o=document.createElement("script"),c=[];t={adData:{ids:t,duration:i,url:n},dispatchEvent:function(e){this.sendEvent?(c&&(c.push(e),e=c,c=!1),this.sendEvent(e)):c.push(e)}},i="_moatApi"+Math.floor(1e8*Math.random());try{s=e.ownerDocument,a=s.defaultView||s.parentWindow}catch(e){s=document,a=window}return a[i]=t,o.type="text/javascript",e&&e.insertBefore(o,e.childNodes[0]||null),o.src="https://z.moatads.com/"+r+"/moatvideo.js#"+i,t}(t,this._getMoatIds(),Math.round(e/1e3),"tripleliftvideojs305296359897")}_getMoatIds(){const{params:{format_id:e=0}}=this._creative,{additional_data:t}=this._creative.params,{tid:i=0,clid:r=0,bid:n=0,bmid:a=0}=t,{id:o,publisherId:c}=this._placement,l=s.makeZParamsString(this._creative,t);return{level1:c.toString(),level2:o.toString(),level3:r.toString(),level4:e.toString(),slicer1:a.toString(),slicer2:n.toString(),zMoatTactic:i.toString(),zMoatPixelParams:l}}static makeZParamsString(e,t){const i=e.getParams().viewability.moat;return[{key:"aid",val:t.aid||0},{key:"sr",val:i},{key:"uid",val:t.unid||0}].reduce((function(e,t){return e+t.key+":"+t.val+";"}),"")}}},906:function(e,t,i){i.d(t,{Z:function(){return s}});var r=i(942),n=i(277);class s{static listen({eventController:e,errorHandler:t}){this.VAST_CODE_LEVELS||(this.VAST_CODE_LEVELS={[s.VAST_ERROR_XML_PARSING]:t.ERROR,[s.VAST_ERROR_VAST_SCHEMA]:t.ERROR,[s.VAST_TRAFFICKING_ERROR]:t.ERROR,[s.VAST_UNEXPECTED_DURATION_ERROR]:t.WARNING,[s.VAST_WRAPPER_ERROR]:t.ERROR,[s.VAST_WRAPPER_TIMEOUT]:t.ERROR,[s.VAST_TOO_MANY_REDIRECTS]:t.ERROR,[s.VAST_NO_ADS_AFTER_WRAPPER]:t.ERROR,[s.VAST_LINEAR_ERROR]:t.ERROR,[s.VAST_MEDIA_NOT_FOUND]:t.ERROR,[s.VAST_MEDIA_LOAD_TIMEOUT]:t.ERROR,[s.VAST_MEDIA_ASSET_MISMATCH]:t.ERROR,[s.VAST_PROBLEM_DISPLAYING_MEDIA_FILE]:t.ERROR,[s.VAST_UNDEFINED_ERROR]:t.ERROR,[s.VAST_VPAID_ERROR]:t.ERROR}),e.on(n.TZ,((e,i={})=>{const r=s.VAST_CODE_MAP[e],n=this.VAST_CODE_LEVELS[e];if(void 0===r)t.fireError("invalid vast error code");else{const s=r+(i.message?" "+i.message:"");t.fireError(e+": "+s,n,{errorCode:e,...i.diagnosticContext})}}))}}(0,r.Z)(s,"VAST_ERROR_XML_PARSING",100),(0,r.Z)(s,"VAST_ERROR_VAST_SCHEMA",101),(0,r.Z)(s,"VAST_TRAFFICKING_ERROR",200),(0,r.Z)(s,"VAST_UNEXPECTED_DURATION_ERROR",202),(0,r.Z)(s,"VAST_WRAPPER_ERROR",300),(0,r.Z)(s,"VAST_WRAPPER_TIMEOUT",301),(0,r.Z)(s,"VAST_TOO_MANY_REDIRECTS",302),(0,r.Z)(s,"VAST_NO_ADS_AFTER_WRAPPER",303),(0,r.Z)(s,"VAST_LINEAR_ERROR",400),(0,r.Z)(s,"VAST_MEDIA_NOT_FOUND",401),(0,r.Z)(s,"VAST_MEDIA_LOAD_TIMEOUT",402),(0,r.Z)(s,"VAST_MEDIA_ASSET_MISMATCH",403),(0,r.Z)(s,"VAST_PROBLEM_DISPLAYING_MEDIA_FILE",405),(0,r.Z)(s,"VAST_UNDEFINED_ERROR",900),(0,r.Z)(s,"VAST_VPAID_ERROR",901),(0,r.Z)(s,"ERROR_BLOCK","Video"),(0,r.Z)(s,"VAST_CODE_MAP",{[s.VAST_ERROR_XML_PARSING]:"XML Parsing error.",[s.VAST_ERROR_VAST_SCHEMA]:"VAST schema validation error.",[s.VAST_TRAFFICKING_ERROR]:"Trafficking error. Media player received an Ad type that it was not expecting and/or cannot play",[s.VAST_UNEXPECTED_DURATION_ERROR]:"Media player expecting different duration.",[s.VAST_WRAPPER_ERROR]:"General Wrapper error.",[s.VAST_WRAPPER_TIMEOUT]:"Timeout of VAST URI provided in Wrapper element, or of VAST URI provided in a subsequent Wrapper element.",[s.VAST_TOO_MANY_REDIRECTS]:"Wrapper limit reached, as defined by the media player. Too many Wrapper responses have been received with no InLine response.",[s.VAST_NO_ADS_AFTER_WRAPPER]:"No VAST response after one or more Wrappers.",[s.VAST_LINEAR_ERROR]:"General Linear error. Media player is unable to display the Linear Ad.",[s.VAST_MEDIA_NOT_FOUND]:"File not found. Unable to find Linear/MediaFile from URI.",[s.VAST_MEDIA_LOAD_TIMEOUT]:"Timeout of MediaFile URI.",[s.VAST_MEDIA_ASSET_MISMATCH]:"Couldn't find MediaFile that is supported by this media player, based on the attributes of the MediaFile element.",[s.VAST_PROBLEM_DISPLAYING_MEDIA_FILE]:"Problem displaying MediaFile. Media player found a MediaFile with supported type but couldn't display it.",[s.VAST_UNDEFINED_ERROR]:"Undefined error.",[s.VAST_VPAID_ERROR]:"General VPAID error."}),(0,r.Z)(s,"VAST_CODE_LEVELS",null)},336:function(e,t,i){i.d(t,{m:function(){return r}});const r=i(114).Z.TL_CLASS_PREFIX+"video";t.Z={vpaidZIndex:1e9,nonVpaidZIndex:1,type:{vast:1,vpaid:2}}},745:function(e,t,i){i.d(t,{K:function(){return n},T:function(){return r}});const r={VIDEO_CONTROL:0,VIDEO_CLICK_BLOCK:0,VIDEO_LOGO:0,CAROUSEL_CIRCLE:1,NON_VIDEO_LOGO:1,CAROUSEL_ARROW:2,ADCHOICES:3,CTA_OVERLAY:3,REVEAL_TRIGGER:3,REVEAL_WRAPPER:4,REVEAL_CLOSE:5,VIDEO_PROGRESS_BAR:6,VIDEO_END_FRAME:7,PSA:8},n=(e,t)=>e.getBaseZIndex()+t},942:function(e,t,i){function r(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}i.d(t,{Z:function(){return r}})}},r={};function n(e){var t=r[e];if(void 0!==t)return t.exports;var s=r[e]={exports:{}};return i[e](s,s.exports,n),s.exports}n.m=i,n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,i){return n.f[i](e,t),t}),[]))},n.u=function(e){return e+".bundle.js"},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},e={},t="ib8045:",n.l=function(i,r,s,a){if(e[i])e[i].push(r);else{var o,c;if(void 0!==s)for(var l=document.getElementsByTagName("script"),d=0;d<l.length;d++){var h=l[d];if(h.getAttribute("src")==i||h.getAttribute("data-webpack")==t+s){o=h;break}}o||(c=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,n.nc&&o.setAttribute("nonce",n.nc),o.setAttribute("data-webpack",t+s),o.src=i),e[i]=[r];var u=function(t,r){o.onerror=o.onload=null,clearTimeout(p);var n=e[i];if(delete e[i],o.parentNode&&o.parentNode.removeChild(o),n&&n.forEach((function(e){return e(r)})),t)return t(r)},p=setTimeout(u.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=u.bind(null,o.onerror),o.onload=u.bind(null,o.onload),c&&document.head.appendChild(o)}},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="",function(){var e={179:0};n.f.j=function(t,i){var r=n.o(e,t)?e[t]:void 0;if(0!==r)if(r)i.push(r[2]);else{var s=new Promise((function(i,n){r=e[t]=[i,n]}));i.push(r[2]=s);var a=n.p+n.u(t),o=new Error;n.l(a,(function(i){if(n.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var s=i&&("load"===i.type?"missing":i.type),a=i&&i.target&&i.target.src;o.message="Loading chunk "+t+" failed.\n("+s+": "+a+")",o.name="ChunkLoadError",o.type=s,o.request=a,r[1](o)}}),"chunk-"+t,t)}};var t=function(t,i){var r,s,a=i[0],o=i[1],c=i[2],l=0;if(a.some((function(t){return 0!==e[t]}))){for(r in o)n.o(o,r)&&(n.m[r]=o[r]);if(c)c(n)}for(t&&t(i);l<a.length;l++)s=a[l],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0},i=self.tlJsonp8045=self.tlJsonp8045||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}(),function(){var e=n(849),t=n(145),i=n(277);const r={click_cta:1,page_flip_left:2,page_flip_right:3,scroll:4,mute:5,unmute:6,expand:7,collapse:8,click_paused:9,transition_up:10,transition_down:11,direction_change:12,reveal_trigger:13},s=2,a=3;class o{constructor({environment:e,pageInfo:t},{creative:i,lifecycleManager:r,thirdPartyAnalytics:n,payableEventEmitter:s,firePix:a,errorHandler:o,asyncUtil:c,eventController:l}){this.pageInfo=t,this.environment=e,this.asyncUtil=c,this.creative=i,this.priceMacroValue=i.params.additional_data.pr,this.lifecycleManager=r,this.thirdPartyAnalytics=n,this.payableEventEmitter=s,this.firePix=a,this.fireEB=a.fireEB.bind(a),this.errorHandler=o,this.viewedCreativeElements={},this.hasFired={render:!1,play:!1,playAttempt:!1,onePxViewable:!1,viewable:!1},this.eventController=l,this.loadCreativeParams()}loadCreativeParams(){this.thirdPartyAnalytics.billOrWait(),this.creativeParams=this.creative.params.additional_data||{},this.creativeParams.caid=this.creative.params.asset_id,this.creativeParams.unid=0,this.rParams={...this.creativeParams,...(0,t.Up)(this.pageInfo.get()),rr:"creative",fid:this.creative.params.format_id||0,rb:this.creative.params.render_options_bm||0,g:this.creative.params.ghost?1:0};const e=this.environment.formats;this.creative.params.format_id===e.video&&(this.videoLengthMS=1e3*this.creative.params.length_seconds),this.disclosure=this.creative.params.disclosure}render(){if(this.hasFired.render)return;this.fireEB(e.kq,this.rParams,(()=>{this.errorHandler.fireError("render tracker error",this.errorHandler.LOG)})),this.thirdParty(),this.payableEventEmitter.render(),this.hasFired.render=!0,this.lifecycleManager.setPhaseAfterRender(this.creative.isAutoplay())}viewable(){this.hasFired.viewable||(this.hasFired.viewable=!0,this.fireEB(e.ML,this.getEngagementParams()),this.thirdPartyAnalytics.fireViewable(),this.payableEventEmitter.viewable())}adOnPage(){this.fireEB(e.RU,this.rParams)}onePxViewable(){this.hasFired.onePxViewable||(this.hasFired.onePxViewable=!0,this.fireEB(e.Pw,this.getEngagementParams()),this.thirdPartyAnalytics.fireOnePxViewable(),this.payableEventEmitter.onePxViewable())}elementViewable(t,i){this.viewedCreativeElements[t]||(this.fireEB(e.qH,this.getEngagementParams(t,i)),this.viewedCreativeElements[t]=!0)}twoSecondViewable(){this.fireEB(e.$m)}playAttempt(){this.hasFired.playAttempt||(this.hasFired.playAttempt=!0,this.fireEB(e.fz,{format_id:this.creative.params.format_id||0,tactic_id:this.creative.params.additional_data.tid||0}))}getEngagementParams(e,t=0){const i=e||this.creative.params.image_id||0;return{...this.creativeParams,cepos:t,ceid:i}}mouseover(t,i){this.fireEB(e.al,this.getEngagementParams(t,i))}click(t,i){"AUDIT"!==this.priceMacroValue&&(this.fireEB(e.ot,this.getEngagementParams(t,i)),this.thirdPartyAnalytics.fireClick(i),this.fireEB(e.FU,{add:3006}))}getRedirectClickUrl(t,i){const r=this.getEngagementParams(t,i);return this.firePix.getEBUrl(e.ot,r)+"&rdir="}appendThirdPartyJs(e,t){this.creative.params.ghost||this.thirdPartyAnalytics.appendJsOnPassthru(e,t)}duration(r,n,s,a){const c=o.getVideoLength(n,s);if(isNaN(r)||!c.value)return;const l={...this.creativeParams,duration:r,video_length:c.value,vlt:c.type};r>0&&!this.hasFired.play&&(this.thirdPartyAnalytics.firePlay(),this.payableEventEmitter.videoStart(),this.hasFired.play=!0,this.eventController.publish(i.Sn),l.start=1,this.hasFired.playAttempt||this.playAttempt(),this.lifecycleManager.setPhaseAfterVideoStart()),(0,t.NK)(a)&&a>=.5&&(l.iv=1),this.fireEB(e.co,l)}static getVideoLength(e,t){let i,r;return e&&e>0?(i=e,r=s):(i=t,r=a),{value:i,type:r}}play(){this.fireEB(e.FU,{add:3007})}ctaRenderResult(t){this.fireEB(e.xg,t)}disclosureRenderResult(){if(this.disclosure){const t={disclosure_render_method:this.disclosure.render_method,disclosure_render_text:this.disclosure.text};this.fireEB(e.qp,t)}}thirdParty(){this.creative.params.ghost||(this.creative.isCarousel()?this.thirdPartyAnalytics.fireCarouselImpression():this.thirdPartyAnalytics.fireImpression())}fireEEE(t,i=1){this.fireEB(e.Oe,{eid:r[t],unid:this.creativeParams.unid||0,ev:i})}static sendAdReadySignal(){if(function(){const e=document.getElementById("tl-app");return e&&e.classList.contains("ad-ready-signal")}()){const e=document.createElement("IFRAME");e.setAttribute("src","js-3lift:ad_ready"),document.documentElement.appendChild(e),e.parentNode.removeChild(e)}}get disclosure(){return this._disclosure}set disclosure(e){this._disclosure=e}}class c{constructor({placement:e,environment:t,specifiedTacticId:i,isAdServing:r,rev:n,gdpr:s,docInfo:a,isFallback:o,fallbackBannerSize:c},{pageInfo:l,asyncUtil:d,urlParams:h,firePix:u,errorHandler:p}){this.placement=e,this.environment=t,this.urlParams=h,this.pageInfo=l,this.docInfo=a,this.asyncUtil=d,this.isAdServing=r,this.rev=n,this.specifiedTacticId=i,this.gdpr=s,this.isFallback=o,this.fallbackBannerSize=c,this.firePix=u,this.errorHandler=p}async buildAuctionPath(){const e=this.getAuctionHostName(this.isAdServing&&this.specifiedTacticId);return this.buildDefaultAuctionPath(e)}getAuctionHostName(e=!1){const{placement:{customOptions:{uniqueCreatives:i,uniqueBrands:r}},environment:{tlxStagingRate:n,tlxHost:s}}=this;let a=s;return n&&Math.random()<n&&(a="staging-"+a),this.urlParams.forceBidUrl?(0,t.Rz)("//"+this.environment.qaHost+"/qa"):this.urlParams.tlBidUrl?(0,t.Rz)("//"+this.urlParams.tlBidUrl):e?(0,t.Rz)("//"+a+"/web/adserving"):r||i?(0,t.Rz)("//"+a+"/vbas/auction"):(0,t.Rz)("//"+a+"/web/auction")}async buildDefaultAuctionPath(e){const{customOptions:{numCreatives:i=1}}=this.placement,r=["inv_code="+encodeURIComponent(this.placement.invCode),"referrer="+encodeURIComponent(this.pageInfo.get().ref),"rev="+encodeURIComponent(this.rev),"fe="+encodeURIComponent((0,t.I$)()?"1":"0"),"ft="+encodeURIComponent(this.pageInfo.getFrameType()),"cb="+(0,t.Qt)(10)];if(this.isAdServing&&this.specifiedTacticId&&(r.push("tid="+encodeURIComponent(this.specifiedTacticId)),r.push("n="+encodeURIComponent(i.toString()))),this.placement.demandEnabled||this.urlParams.debugFlag||r.push("dd=1"),this.isFallback){this.firePix.auctionId&&r.push("original_auction_id="+encodeURIComponent(this.firePix.auctionId));const{width:e,height:t}=this.fallbackBannerSize,i=e+"x"+t;c.hasValidSize(e,t)?r.push("size="+i):this.errorHandler.fireError("Invalid size for fallback auction",this.errorHandler.WARNING,{size:i})}return this.needsAqp()&&r.push(c.getAqpParam()),this.gdpr&&(await this.gdpr.getCMPData(),this.gdpr.cmpData&&(r.push("gdpr="+encodeURIComponent(this.gdpr.cmpData.gdprApplies)),this.gdpr.cmpData.consentString&&r.push("cmp_cs="+encodeURIComponent(this.gdpr.cmpData.consentString)))),this.urlParams.tlPreviewId&&r.push("tl_preview_id="+this.urlParams.tlPreviewId),this.urlParams.tpPreviewId&&r.push("tp_preview_id="+this.urlParams.tpPreviewId),e+"?"+r.join("&")}needsAqp(){return this.placement.invCode.indexOf("msn_infeed_")>-1&&0===this.docInfo.document.getElementsByClassName("xnetvidplayer").length}static getAqpParam(){return"aqp="+encodeURIComponent(JSON.stringify({_id:{$oid:"0"},format_target:{action:"include",items:[{id:8}]}}))}static hasValidSize(e,t){return e&&t}}class l{constructor({placement:e,docInfo:t,browserInfo:i,isAdServing:r,auctionIframe:n},{serveDefault:s,errorHandler:a,eventController:o,asyncUtil:c}){this.placement=e,this.docInfo=t,this.browserInfo=i,this.isAdServing=r,this.auctionIframe=n,this.serveDefault=s,this.errorHandler=a,this.eventController=o,this.asyncUtil=c}onError(e,t){this.errorHandler&&this.errorHandler.fireError(e,t)}fireAuction(e){const t=this.auctionIframe;try{const i=t.contentWindow.document.createElement("SCRIPT");i.referrerPolicy="no-referrer-when-downgrade",i.src=e,t.contentWindow.document.body.appendChild(i)}catch(e){this.onError(e,this.errorHandler.ERROR)}const r=this.placement.timeoutDuration,n=this.asyncUtil.timeoutWrap((()=>{this.serveDefault.serve("auction_timeout")}),r);this.eventController.once(i.PZ,(()=>{clearTimeout(n)}))}run(e){this.criteoGuard=!1;const t=t=>{if(this.criteoGuard)return;this.criteoGuard=!0;const i=this.rtusTimeout;if(i&&(this.docInfo.window.clearTimeout(i),this.rtusTimeout=!1),t&&"OK"===t.status){const i=encodeURIComponent(t.userid);this.fireAuction(e+"&criteo_id="+i)}else this.fireAuction(e)},i=()=>{this.criteoGuard||(this.criteoGuard=!0,this.fireAuction(e))};if(this.browserInfo.isSafari&&!this.isAdServing){const e=this.auctionIframe.contentWindow,r=e.document,n="tl_criteo_rtus";e[n]=t;const s=r.createElement("SCRIPT");r.body.appendChild(s),s.onerror=i,s.src="//gum.criteo.com/sync?c=157&r=2&j="+n,this.rtusTimeout=setTimeout(i,150)}else this.fireAuction(e)}}class d{constructor(e,t){const i=t.hookFinder.getDtjTacticId();e.isAdServing=!!i,e.specifiedTacticId=t.urlParams.tlDynId||i,this.config=e,this.dependencies=t,this.placement=e.placement,this.serveDefault=t.serveDefault,this.asyncUtil=t.asyncUtil,this.eventController=t.eventController}async getCreative(){const e=1.5*this.placement.timeoutDuration,t=this.asyncUtil.timeoutWrap((()=>{this.serveDefault.serve("global_timeout")}),e),r=new Promise((e=>{this.eventController.once(i.i2,(i=>{e(i),clearTimeout(t)}))})),n=this.initAuctionRunner(),s=this.initAuctionPathBuilder(),a=await s.buildAuctionPath();return n.run(a),r}initAuctionRunner(){return new l(this.config,this.dependencies)}initAuctionPathBuilder(){return new c(this.config,this.dependencies)}}class h{constructor(e){this.userAgent=e}isMobile(){return this.userAgent.match(/blackberry|ipod|iphone|ipad|android/i)}isIos(){return/ipod|iphone|ipad/i.test(this.userAgent)}isSafari(){return/safari/i.test(this.userAgent)&&!/chrome|chromium|crios/i.test(this.userAgent)}isIpad(){return this.userAgent.match(/ipad/i)}isIE(){return/msie|trident\//i.test(this.userAgent)}isEdge(){return/Edg/.test(this.userAgent)}checkIsMicrosoftBrowser(){return this.isIE()||this.isEdge()}checkIsFacebook(){return this.userAgent.indexOf("FBAV/")>-1}getBrowserInfo(){const e=this.isMobile(),t=this.isIpad();return{isMobile:e,isSafari:!!this.isSafari(),isIpad:t,isIos:!!this.isIos(),isMicrosoftBrowser:this.checkIsMicrosoftBrowser(),isIE:this.isIE(),isSmallScreen:e||t,isFacebook:this.checkIsFacebook()}}}var u=n(114),p=n(942);class m{constructor(){(0,p.Z)(this,"_auctionIframe",null)}static get(){return this._auctionIframe}static create(e){const i=e.document;this._auctionIframe=(0,t.E_)(i.createElement("IFRAME")),i.body||i.documentElement.appendChild(i.createElement("body"));const r=new Promise(((e,t)=>{const i=r=>{try{r.target.removeEventListener("load",i);const t=r.target.contentWindow.document;t.open(),t.write("<html><head></head><body></body></html>"),t.close(),e(r.target)}catch(e){t(e)}};this._auctionIframe.addEventListener("load",i)}));return i.body.appendChild(this._auctionIframe),r}}var g=function(e){if("object"!=typeof e)return!1;return f.every((t=>typeof e[t.field]===t.type&&e[t.field].length>=t.minLength))};const f=[{field:"heading",type:"string",minLength:1},{field:"caption",type:"string",minLength:1},{field:"image_url",type:"string",minLength:1},{field:"clickthrough_url",type:"string",minLength:1}];var y=n(696);class v{constructor(e){this.creativeComponents=e.ad.creativeComponents}getAllComponents(){return{getHeading:()=>this.getFirst({assetType:"text",componentType:"heading"}),getCaption:()=>this.getFirst({assetType:"text",componentType:"caption"}),getImageUrl:()=>this.getFirst({assetType:"image",componentType:"baseImage"}),getLogoUrl:()=>this.getFirst({assetType:"image",componentType:"brandLogo"}),getClickthroughUrl:()=>this.getFirst({assetType:"URI",componentType:"clickThroughURL"}),getJsTrackers:()=>this.getAll({assetType:"javascript"}),getImpPixels:()=>this.getAll({assetType:"image",componentType:"impressionTracker"}),getClickPixels:()=>this.getAll({assetType:"image",componentType:"clickTracker"}),getViewPixels:()=>this.getAll({assetType:"image",componentType:"viewabilityTracker"}),getPrivacyUrl:()=>null}}getFirst(e){return this.getAll(e)[0]}getAll(e){return this.creativeComponents.filter(v.byObjFields.bind(null,e)).map(v.componentToSource)}static byObjFields(e,t){return Object.keys(e).every((i=>t[i]===e[i]))}static componentToSource(e){return e.assets[0].source}}class _{constructor(e){this.assets=e.assets,this.eventTrackers=e.eventtrackers||[],this.link=e.link?e.link.url:null,this.privacy=e.privacy||null}getAllComponents(){return{getHeading:()=>this.assets.filter((e=>e.title&&e.title.text))[0].title.text,getCaption:()=>this.assets.filter((e=>e.data&&2===e.data.type))[0].data.value,getImageUrl:()=>this.assets.filter((e=>e.img&&3===e.img.type))[0].img.url,getLogoUrl:()=>{const e=this.assets.filter((e=>e.img&&1===e.img.type));return e.length>0?e[0].img.url:null},getClickthroughUrl:()=>{const e=this.assets.filter((e=>e.link&&e.link.url));return e.length>0?e[0].link.url:this.link},getJsTrackers:()=>this.eventTrackers.filter((e=>2===e.method)).map((e=>e.url)),getImpPixels:()=>this.eventTrackers.filter((e=>1===e.method&&1===e.event)).map((e=>e.url)),getViewPixels:()=>this.eventTrackers.filter((e=>1===e.method&&[2,3,4].includes(e.event))).map((e=>e.url)),getClickPixels:()=>[],getPrivacyUrl:()=>{const e=this.assets.filter((e=>e.data&&e.data.privacy));return e.length?e[0].data.privacy:this.privacy}}}}var I=function(e,t){if(u.Z.DCO_PROTOCOLS.DYNAMIC_CONTENT===t)return new v(e);if(u.Z.DCO_PROTOCOLS.NATIVE_ADS===t)return new _(e);throw new y.Z("invalid dco_protocol")};var A=function(e,t){const i=I(e,t).getAllComponents(),r={};try{if(r.asset_id=-1,r.image_id=-1,r.img_server_params="",r.heading=i.getHeading(),r.caption=i.getCaption(),r.image_url=i.getImageUrl(),r.logo_image_url=i.getLogoUrl(),r.clickthrough_url=i.getClickthroughUrl(),r.impression_pixels=i.getImpPixels(),r.clickthrough_pixels=i.getClickPixels(),r.viewability_pixels=i.getViewPixels(),r.js_trackers=i.getJsTrackers(),r.privacy_url=i.getPrivacyUrl(),!g(r))throw new y.Z("asset does not meet requirements")}catch(e){throw new y.Z("dco asset invalid: "+(e.message||e))}return r};const w="doDco",C=0,E=1,T=["impression_pixels","clickthrough_pixels","viewability_pixels","js_trackers"];class b{constructor({assets:e,settings:t,frame:i},{errorHandler:r}){(0,p.Z)(this,"mapPayloadToAssetAndMergeTrackers",(e=>A(e,this.settings.dco_protocol))),(0,p.Z)(this,"errAndFallBackOrDefault",(e=>{const t=e.toString();return g(this.assets&&this.assets[0])?(this.errorHandler.fireError(t,this.errorHandler.WARNING,{dco_tag_url:this.settings.dco_tag_url}),{asset:this.assets[0],isFallback:E}):(this.errorHandler.fireError(t,this.errorHandler.ERROR,{dco_tag_url:this.settings.dco_tag_url}),{})})),this.assets=e,this.frame=i,this.settings=t,this.errorHandler=r}getOptimizedAsset(){return this.fetchDcoPayload().then((e=>this.mapPayloadToAssetAndMergeTrackers(e))).then((e=>this._mergeOrRemoveTrackerFields(e))).catch((e=>this.errAndFallBackOrDefault(e)))}getTagUrl(){return this.settings.dco_tag_url.replace("${dcomacro}",w)}fetchDcoPayload(){const e=this.frame.contentWindow,t=e.document,i=t.createElement("script"),r=this.getTagUrl();return new Promise(((n,s)=>{e.doDco=n,e.onerror=e=>s(new y.Z("dco jsonp error: "+e)),i.onerror=()=>s(new y.Z("dco script failed to load")),setTimeout((()=>{s(new y.Z("dco jsonp timeout"))}),1e4),i.src=r,t.body.appendChild(i)}))}_mergeOrRemoveTrackerFields(e){const t={...e};return T.forEach((e=>{var i;Array.isArray(this.assets)&&this.assets[0]&&Array.isArray(this.assets[0][e])&&(t[e]=null===(i=t[e])||void 0===i?void 0:i.concat(this.assets[0][e]));const r=Array.isArray(t[e]),n=Array.isArray(this.settings[e]);r&&n?(t[e]=t[e].concat(this.settings[e]),delete this.settings[e]):n&&delete t[e],t[e]&&(t[e]=Array.from(new Set(t[e])))})),{asset:t,isFallback:C}}}var S=n(493);class M{constructor({scriptWindow:e}){this.window=e,this._document=e.document;try{this.topDocument=top.document,this._topWindow=top,this.canAccessTop=!0}catch(e){this.topDocument=window.document,this._topWindow=window,this.canAccessTop=!1}try{this._topWindow.navigator?this.navigator=this._topWindow.navigator:this.navigator=navigator}catch(e){this.navigator=navigator}}get document(){return this._document||this.topDocument}get topWindow(){return this._topWindow||window}get canAccessElementsFromPoint(){return!(!this.topDocument.elementsFromPoint&&!this.topDocument.msElementsFromPoint)}getElementsFromPoint(e,i){let r=null;if(this.topDocument.elementsFromPoint)r=this.topDocument.elementsFromPoint(e,i);else if(this.topDocument.msElementsFromPoint){const n=this.topDocument.msElementsFromPoint(e,i);r=n?(0,t.ZM)(n):[]}return r||[]}}class P{constructor({adserverHostName:e,bundleRoot:t,cookieDomain:i,dynamicPath:r,ebPath:n,formats:s,numUserSyncPixels:a,qaHost:o,renderOptionsMap:c,tlImageAddr:l,tlxHost:d,ttjHostName:h}){this._adserverHostName=e,this._bundleRoot=t,this._cookieDomain=i,this._dynamicPath=r,this._ebPath=n,this._formats=s,this._numUserSyncPixels=a,this._qaHost=o,this._renderOptionsMap=c,this._tlImageAddr=l,this._tlxHost=d,this._ttjHostName=h}get adserverHostName(){return this._adserverHostName}get bundleRoot(){return this._bundleRoot}get cookieDomain(){return this._cookieDomain}get dynamicPath(){return this._dynamicPath}get ebPath(){return this._ebPath}get formats(){return this._formats}get numUserSyncPixels(){return this._numUserSyncPixels}get qaHost(){return this._qaHost}get renderOptionsMap(){return this._renderOptionsMap}get tlImageAddr(){return this._tlImageAddr}get tlxHost(){return this._tlxHost}get ttjHostName(){return this._ttjHostName}}var R=n(498);class D{constructor(){(0,p.Z)(this,"events",{})}on(e,t){return this._subscribe(e,t,!1)}once(e,t){return this._subscribe(e,t,!0)}off(e,t){if(!this.events[e]||0===this.events[e].length)return;const i=this.events[e].filter((e=>e.eventHandler!==t));this.events[e]=[...i],0===this.events[e].length&&(this.events={...this.events,eventName:[]})}destroy(){this.events={}}publish(e,...t){this._publishEvent(e,...t),this._publishLog(e,...t)}_subscribe(e,t,i){return Object.prototype.hasOwnProperty.call(this.events,e)||(this.events[e]=[]),this.events[e]=[...this.events[e],{eventHandler:t,once:i}],()=>this.off(e,t)}_publishEvent(e,...t){this.events[e]&&this.events[e].length>0&&this.events[e].forEach((i=>{i.eventHandler(...t),i.once&&this.off(e,i.eventHandler)}))}_publishLog(e,...t){this._publishEvent(i.sY,e,...t)}onWithOffEvent(e,t,i){const r=this.on(e,i);this.on(t,r)}}class L{constructor({docInfo:e,rev:t,placement:i,debugFlag:r,ebPath:n,auctionId:s=null},{eventController:a}){this.docInfo=e,this.rev=t,this.placement=i,this.debugFlag=r,this.ebPath=n,this.eventController=a,this.auctionId=s,this._setupListeners()}fire(e,t){if(!e)return;const i=this.docInfo.topDocument.createElement("IMG");"function"==typeof t&&i.addEventListener("error",(()=>t())),i.src=e}fireEB(e,t={},i){const r=this.getEBUrl(e,t);this.fire(r,i)}getEBUrl(e,i){const r={inv_code:this.placement.invCode,aid:this.auctionId,rev:this.rev};return(0,t.uC)(this.ebPath,e,{...r,...i})}fireDyn(e){const i={...{long1:null,long2:null,long3:null,string1:this.auctionId,string2:null,string3:null},...e},r=(0,t.uC)(this.ebPath,"dyn",i);this.fire(r)}firePerf(e){const i={rev:this.rev,type:e.type,time_since_start:e.timeSinceStart,time_since_last:e.timeSinceLast,client_side_auction:+e.clientSideAuction,fid:e.formatId},r=(0,t.uC)(this.ebPath,"perf",i);this.fire(r)}setAuctionId(e){return this.auctionId=e,this}getAuctionId(){return this.auctionId}_setupListeners(){this.eventController.on(i.i2,(e=>{this.setAuctionId(e.settings.additional_data.aid)}))}}class N{constructor({auctionFrameWindow:e,errorDecorator:t}){this.auctionFrameWindow=e,this.decorator=t,this.thirdPartyMessage=!1}handleRocketfuel(e){const i=this.auctionFrameWindow.document.createElement("iframe");(0,t.E_)(i),i.src="about:blank",this.auctionFrameWindow.document.body.appendChild(i);const r=i.contentWindow.document;return r.open(),r.write(e),r.close(),i}newWriter(e){let i,r,n,s,a,o,c,l,d,h;try{if(e.indexOf("rfitag")>0)return void this.handleRocketfuel(e);if(c=this.auctionFrameWindow.document.createElement("div"),c.style.display="none",this.auctionFrameWindow.document.body.appendChild(c),c.innerHTML=e,l=c.getElementsByTagName("script"),h=l.length,0===h)return;for(o=this.auctionFrameWindow.document.createElement("iframe"),(0,t.E_)(o),o.src="about:blank",o.className="tl_ext_iframe",this.auctionFrameWindow.document.body.appendChild(o),r=o.contentWindow.document,r.open(),r.write('<script>window.addEventListener("message",function(msg){window.parent.postMessage(msg.data,"*");});<\/script>'),d=0;d<h;d++){const e=l[d];e.text.length?r.write("<script>"+e.text+"<\/script>"):e.getAttribute&&e.getAttribute("data-dv3-creative-fetch")?r.write(e.outerHTML):(i=(0,t.EC)(e.src),n=i.queryKey,s=i.host,"ad.turn.com"===s&&n.cid&&(a=n.cid,o.setAttribute("data-ext-creative-id",a)),r.write('<script type="text/javascript" src="'+e.src+'"><\/script>'))}r.close()}catch(e){throw new y.Z("newWriter failed: "+e.message)}}onmessage(e){if(!e||!e.data||!e.data.match)return;if(e.data.match("get_3p")||e.data.match("get_ext")||e.data.match("get_unit_2")){if(this.thirdPartyMessage)return;this.thirdPartyMessage=!0;const t=this.auctionFrameWindow.document.createElement("SCRIPT");t.textContent=e.data,this.auctionFrameWindow.document.body.appendChild(t)}}setListeners(){this.auctionFrameWindow.addEventListener("message",this.decorator(this.onmessage.bind(this))),this.auctionFrameWindow.document.write=()=>{}}}class O{constructor(){this.allRenderedAssets=O.allRenderedAssets}dispatchIfUnique(e,t,i,r){this.allRenderedAssets[i]=this.allRenderedAssets[i]||[],this._areAssetsUnique(i,r)?(t(),this._trackAssets(i,r)):e.serve("redundant_asset")}_areAssetsUnique(e,t){return t.every((t=>this._isAssetUnique(e,t)))}_isAssetUnique(e,t){return!this.allRenderedAssets[e][t]}_trackAssets(e,t){t.forEach((t=>this._trackAsset(e,t)))}_trackAsset(e,t){this.allRenderedAssets[e][t]=!0}}(0,p.Z)(O,"allRenderedAssets",{});class x{constructor({placement:e,auctionIframe:t},{eventController:i,serveDefault:r,firePix:n,errorDecorator:s,errorHandler:a}){this.placement=e,this.auctionIFrameWindow=t.contentWindow,this.eventController=i,this.defaultServer=r,this.firePix=n,this.errorDecorator=s,this.errorHandler=a,this.isUnitGenerated=!1}getCreativeJSON2(e,t){this.passthru(e.pixel,t)}get3PUnit(e,t,i,r,n,s){this.passthru(t,s)}getExtUnit(e,t){this.passthru(t)}passthru(e,t){this.eventController.publish(i.tn,e,t)}dynamicCreativeRender(e){if(!e)throw new y.Z("Missing auction response payload");if(this.isUnitGenerated)return;this.isUnitGenerated=!0;const t=e.settings.additional_data.aid;this._verboseCreativeResponseLog(t,"dynamicCreativeRender",e),this.eventController.publish(i.i2,e)}serveConditional(e,t){if(this.placement.customOptions.uniqueBrands||this.placement.customOptions.uniqueCreatives){const i=new O,r=Object.keys(t)[0],n=t[r];i.dispatchIfUnique(this.defaultServer,e,r,n)}else{const e="serveConditional response received with no uniqueness constraints";this.errorHandler.fireError(e,this.errorHandler.ERROR),this.defaultServer.adRendered=!0}}serveDefault(e,t){const{defaultCode:i}=this.placement;this._verboseCreativeResponseLog(t,"serveDefault",i),this.defaultServer.serve(e,t)}registerAuctionListeners(){const e={get_unit_2:this.wrap(this.getCreativeJSON2),get_3p_unit:this.wrap(this.get3PUnit),get_ext_unit:this.wrap(this.getExtUnit),dynamicCreativeRender:this.wrap(this.dynamicCreativeRender),serveViewable:this.wrap(this.serveConditional),serveConditional:this.wrap(this.serveConditional),serveDefault:this.wrap(this.serveDefault)};Object.assign(this.auctionIFrameWindow,e)}wrap(e){const t=this,r=this.errorDecorator(e);return(...e)=>(t.eventController.publish(i.PZ),r.apply(t,e))}_verboseCreativeResponseLog(e,t,i){const r=this.placement.customOptions.verboseCreativeResponseToggle;if(void 0!==r&&Math.random()<r){const r={[t]:i},n=JSON.stringify(r),s={string1:e,string2:"verboseCreativeResponseToggle",string3:n};n.length<=1024&&this.firePix.fireDyn(s)}}}var k=n(876);const j="tl_id";class Z{constructor({placement:e,environment:t,docInfo:i,settings:r,currentScript:n},{errorHandler:s}){this.placement=e,this.docInfo=i,this.environment=t,this.errorHandler=s,this.settings=r,this.currentScript=n||this._getTLScript(),this.cachedHook=null}getHook(){return null===this.cachedHook&&(this.cachedHook=this._findHook()),this.cachedHook}_findHook(){let e=this.currentScript;try{const t=this.docInfo.window;t!==top&&t.frameElement&&!this.placement.customOptions.friendlyIframeRender&&(e=this.isInActiveViewElement()?Z.getTopFrame(t,"data-google-container-id"):Z.getTopFrame(t))}catch(e){}let t=+this.placement.replaceParent;for(;t;)e=e.parentNode,t--;if(!e)throw new y.Z("could not find hook");return e.tagName||(e=this.tlScript),e}_getTLScript(){const e=[].slice.call(this.docInfo.document.getElementsByTagName("script")).find((e=>this._isValidTLScript(e)));return e?(e.setAttribute(j,Math.round(1e5*Math.random())),e):null}_isValidTLScript(e){const t=e.getAttribute(j);return Z.scriptSrcContains(e,this.environment.ttjHostName)&&Z.scriptSrcContains(e,this.placement.invCode)&&!t}getAuctionResponsePseudoId(){return!!this.currentScript&&this.currentScript.getAttribute("data-auction-response-id")}getHeaderBiddingAuctionResponse(){const e=this.getAuctionResponsePseudoId();return this.docInfo.window["tl_auction_response_"+e]||null}getTagTemplateId(){return!!this.currentScript&&this.currentScript.getAttribute("data-template-id")}_getScriptPath(){const e=this.getScriptSrc();return(0,t.EC)(e).path}getDtjTacticId(){const e=this._getScriptPath().split("/");return"dtj"===e[1]?e[3]:void 0}getScriptSrc(){return this.currentScript?this.currentScript.getAttribute("data-src")||this.currentScript.src:""}styleHook(){var e;const t=this.getHook(),i="iframe"===(null==t||null===(e=t.tagName)||void 0===e?void 0:e.toLowerCase()),r=!this.placement.customOptions.friendlyIframeRender,n=this.placement.customOptions.activeView,s=this.isInActiveViewElement(),a=i&&r&&(n||s&&this.canAbsolutelyPositionFrame(t));a&&Math.random()<this.settings.activeviewLogRate&&this.errorHandler.fireError("activeView",this.errorHandler.LOG),a?(this.allowAbsolutePositioning(t),this.positionFrameBehindAd(t)):this.hideHook(t)}canAbsolutelyPositionFrame(e){const t=e.parentElement,i=this.hasDefaultPosition(t)&&this.hasOffset(t);if(!t||i){const e="Cannot absolutely position ActiveView iframe. Parent is undefined, or has static position and offsets";return this.errorHandler.fireError(e,this.errorHandler.WARNING),!1}return!0}hasDefaultPosition(e){const t=k.Z.getPropertyValue(e,"position");return["static",""].indexOf(t)>-1}hasOffset(e){return!!["top","bottom","left","right"].find((t=>{const i=k.Z.getPropertyValue(e,t);return parseFloat(i)>0}))}positionFrameBehindAd(e){k.Z.setStyle(e,"position","absolute"),k.Z.setStyle(e,"visibility","hidden"),k.Z.setStyle(e,"top","0px"),k.Z.setStyle(e,"left","0px"),k.Z.setStyle(e,"pointer-events","none")}allowAbsolutePositioning(e){const t=e.parentElement;this.hasDefaultPosition(t)&&k.Z.setStyle(t,"position","relative")}isInActiveViewElement(){return!!(this.currentScript&&this.currentScript.parentElement&&this.currentScript.parentElement.classList.contains("GoogleActiveViewElement"))}hideHook(e){k.Z.setStyle(e,"display","none"),k.Z.setStyle(e,"visibility","hidden"),k.Z.setStyle(e,"width","0px"),k.Z.setStyle(e,"height","0px")}getSupplySourceId(){return this.currentScript?this.currentScript.getAttribute("data-ss-id"):null}static getTopFrame(e,t){let i,r=e,n=!1;for(;r!==top&&!n;)try{r.frameElement&&(i=r.frameElement),r=r.parent,t&&i.getAttribute(t)&&(n=!0)}catch(e){break}return i}static scriptSrcContains(e,t){if(!t)return!1;const{src:i}=e,r=e.getAttribute("data-src"),n=i&&i.indexOf(t)>-1,s=r&&r.indexOf(t)>-1;return!(!n&&!s)}}class U{static needsBusting(e,t){return!!e.iframeBuster&&!function(e){let t;try{t=e&&e==top}catch(e){t=!1}return t}(t)}static bust(e,i){const r=(0,t.EC)(e.referrer),n=encodeURIComponent(e.URL),s=e.createElement("iframe");if(s.src=(0,t.Rz)("//"+r.host+"/doubleclick/TLIframe.html?docsrc="+n+"&script_src="+encodeURIComponent(i)),s.width=0,s.height=0,s.style.display="none",!U._hasBody(e)){const t=e.createElement("body");e.firstElementChild.appendChild(t)}e.body.appendChild(s)}static _hasBody(e){return!!e.body}}class F{constructor(){try{jQuery(),this.jQueryPresent=!0}catch(e){this.jQueryPresent=!1}}layout(e){this.jQueryPresent&&(function(){let e=jQuery(".masonry");e.length||(e=null);e&&e.length>1&&(e=jQuery(e[0]));e||jQuery.each(jQuery.find("*"),((t,i)=>{jQuery.data(i,"masonry")&&(e=jQuery(i))}));e&&e.data("masonry")&&(e.masonry("reloadItems"),e.masonry())}(),function(e){if(jQuery.fn.isotope){let t=jQuery(".isotope");if(1!==t.length){let i=e;for(;i.parentNode;)jQuery.data(jQuery(i.parentNode),"isotope")?t=jQuery(i.parentNode):i=i.parentNode}t.data("isotope")||(t=!1),t&&t.isotope("reloadItems").isotope({sortBy:"original-order"})}}(e))}}const B="init",W="post_render";class V{constructor({eventController:e}){(0,p.Z)(this,"phase",B),e.on(i.i2,(()=>this.setPhaseAfterAuction()))}setPhaseAfterInit(){this.phase="auction"}setPhaseAfterAuction(){this.phase="render"}setPhaseAfterRender(e){this.phase=e?"video":W}setPhaseAfterVideoStart(){this.phase=W}setPhaseAfterPostRender(){this.phase="render_validation"}getPhase(){return this.phase}}const H=1,z=2,G=3,Q=4;class Y{constructor({creativePayload:e,firePix:t}){this._payableEvent=e.settings.payable_event,this._formatId=e.settings.format_id,this._tacticId=e.settings.additional_data.tid||0,this._firePix=t}render(){this._payableEvent===H&&this._fire()}viewable(){this._payableEvent===z&&this._fire()}onePxViewable(){this._payableEvent===G&&this._fire()}videoStart(){this._payableEvent===Q&&this._fire()}_fire(){this._firePix.fireEB(e.bc,{peid:this._payableEvent,fid:this._formatId,tid:this._tacticId})}}class q{constructor({activeView:e=!1,defaultCaptionOverride:t="",defaultHeadingOverride:i="",disableOutstreamVideoBehavior:r=!1,disclosureOverride:n,dontWaitForImageLoad:s=!1,friendlyIframeRender:a=!1,is3pAdPreview:o=!1,isAmp:c=!1,maxUserSyncs:l=10,numCreatives:d=1,playButtonUrl:h="",postBidIpvAutoplay:u=!1,referrerOverride:p=[],uniqueBrands:m=!1,uniqueCreatives:g=!1,unwrappedUnit:f=!1,userSyncsDisabled:y=!1,verboseCreativeResponseToggle:v,videoZIndexOverride:_=null,videoErrorFallbackOptOut:I=!1}){this._activeView=e,this._defaultCaptionOverride=t,this._defaultHeadingOverride=i,this._disableOutstreamVideoBehavior=r,this._disclosureOverride=n,this._dontWaitForImageLoad=s,this._friendlyIframeRender=a,this._is3pAdPreview=o,this._isAmp=c,this._maxUserSyncs=l,this._numCreatives=d,this._playButtonUrl=h,this._postBidIpvAutoplay=u,this._referrerOverride=p,this._uniqueBrands=m,this._uniqueCreatives=g,this._unwrappedUnit=f,this._userSyncsDisabled=y,this._verboseCreativeResponseToggle=v,this._videoZIndexOverride=_,this._videoErrorFallbackOptOut=I}get activeView(){return this._activeView}get defaultHeadingOverride(){return this._defaultHeadingOverride}get defaultCaptionOverride(){return this._defaultCaptionOverride}get disableOutstreamVideoBehavior(){return this._disableOutstreamVideoBehavior}get disclosureOverride(){return this._disclosureOverride}get dontWaitForImageLoad(){return this._dontWaitForImageLoad}get friendlyIframeRender(){return this._friendlyIframeRender}set friendlyIframeRender(e){this._friendlyIframeRender=e}get is3pAdPreview(){return this._is3pAdPreview}set is3pAdPreview(e){this._is3pAdPreview=e}get isAmp(){return this._isAmp}get maxUserSyncs(){return this._maxUserSyncs}get numCreatives(){return this._numCreatives}get playButtonUrl(){return this._playButtonUrl}get postBidIpvAutoplay(){return this._postBidIpvAutoplay}get referrerOverride(){return this._referrerOverride}get uniqueBrands(){return this._uniqueBrands}get uniqueCreatives(){return this._uniqueCreatives}get unwrappedUnit(){return this._unwrappedUnit}set unwrappedUnit(e){this._unwrappedUnit=e}get userSyncsDisabled(){return this._userSyncsDisabled}get verboseCreativeResponseToggle(){return this._verboseCreativeResponseToggle}get videoZIndexOverride(){return this._videoZIndexOverride}get videoErrorFallbackOptOut(){return this._videoErrorFallbackOptOut}}class J{constructor({async:e,captionCharacterLimit:t,headingCharacterLimit:i,cta:r,customOptions:n={},defaultCode:s,demandEnabled:a,dvPlacementId:o,disclosure:c,id:l=0,iframeBuster:d,iframeWrap:h,imageHeight:u,imageWidth:p,invCode:m,logoBlackList:g,provenTemplate:f,publisherId:y=0,replaceParent:v,sharingEnabled:_,staging:I,templateCode:A,templates:w,timeoutDuration:C=1e4,viewabilityTestingInfo:E={},isFallback:T=!1}){this._async=e,this._captionCharacterLimit=t,this._headingCharacterLimit=i,this._cta=r,this._customOptions=new q({...n}),this._defaultCode=s,this._demandEnabled=a,this._disclosure=c||J.DEFAULT_DISCLOSURE,this._dvPlacementId=o,this._id=l,this._iframeBuster=d,this._iframeWrap=h,this._imageHeight=u,this._imageWidth=p,this._invCode=m,this._logoBlackList=g,this._provenTemplate=f,this._publisherId=y,this._replaceParent=v,this._sharingEnabled=_,this._staging=I,this._templateCode=A,this._templates=w,this._timeoutDuration=C,this._viewabilityTestingInfo=E,this.isFallback=T}get async(){return this._async}get captionCharacterLimit(){return this._captionCharacterLimit}get headingCharacterLimit(){return this._headingCharacterLimit}get customOptions(){return this._customOptions}get cta(){return this._cta}get defaultCode(){return this._defaultCode}get demandEnabled(){return this._demandEnabled}get disclosure(){return this._disclosure}set disclosure(e){this._disclosure=e}get dvPlacementId(){return this._dvPlacementId}get id(){return this._id}get iframeBuster(){return this._iframeBuster}get iframeWrap(){return this._iframeWrap}get imageHeight(){return this._imageHeight}set imageHeight(e){this._imageHeight=e}get imageWidth(){return this._imageWidth}set imageWidth(e){this._imageWidth=e}get invCode(){return this._invCode}get logoBlackList(){return this._logoBlackList}get provenTemplate(){return this._provenTemplate}set provenTemplate(e){this._provenTemplate=e}get publisherId(){return this._publisherId}set replaceParent(e){this._replaceParent=e}get replaceParent(){return this._replaceParent}get sharingEnabled(){return this._sharingEnabled}get staging(){return this._staging}get templateCode(){return this._templateCode}set templateCode(e){this._templateCode=e}get templates(){return this._templates}get timeoutDuration(){return this._timeoutDuration}get viewabilityTestingInfo(){return this._viewabilityTestingInfo}}(0,p.Z)(J,"DEFAULT_CTA","See more"),(0,p.Z)(J,"DEFAULT_DISCLOSURE","Sponsored by");const X=e=>{if("SCRIPT"===e.tagName&&"tl-third-party"!==e.className)e.parentNode.replaceChild((e=>{const t=document.createElement("SCRIPT");t.text=e.innerHTML;let i=e.attributes.length-1;for(;i>=0;i--)t.setAttribute(e.attributes[i].name,e.attributes[i].value);return t})(e),e);else{let t=0;const i=e.childNodes;for(;t<i.length;)X(i[t++])}return e};class K{constructor(e){this.document=e.document,this.window=e.window}wrapAd(e){const t=this.document.createElement("DIV");return t.style.display="inline",t.className="tlod",t.innerHTML=e,t}static insertAd(e,t,i){if(!t||!t.parentNode)throw new y.Z("insertAd failed: hook element not on dom");const r=t.parentNode;!i||t.ownerDocument!==r&&"head"!==r.tagName.toLowerCase()?t.parentNode.insertBefore(e,t):t.ownerDocument.body.appendChild(e),X(e)}static serveDefaultFrame(e,t){if(!t)throw new y.Z("serveDefaultFrame: tried to write default code but doc is unavailable");"complete"!==t.readyState&&t.open(),t.write(e),t.close()}}const $=-1;function ee({adWrapperWithDims:i,mainContent:r,positionService:n,pageInfo:s,bundleStartTime:a,firePix:o,errorHandler:c}){const l=n.getElDims(i),d=n.getElDims(r),h={ad_w:l.width,ad_h:l.height,img_w:d.width,img_h:d.height,render_time:Date.now()-a,ft:s.getFrameType(),plid:s.placement.id};if(s.isClientAware()){const e=n.getClientDims();h.client_w=e.width,h.client_h=e.height}else h.client_w=$,h.client_h=$;if(s.isPositionAware()){const e=function(e,t,i,r){let n,s;try{const r=e.ownerDocument.defaultView.top.document.body,a=i.getBoundingRect(r);n=t.top-a.top,s=t.left-a.left}catch(e){r.fireError("could not access top when getting ad position",r.WARNING),n=$,s=$}return{top:n,left:s}}(i,n.getBoundingRect(i),n,c);h.pos_left=e.left,h.pos_top=e.top}else h.pos_left=$,h.pos_top=$;o.fireEB(e.cM,(0,t.p5)(h))}class te{constructor({hookFinder:e,docInfo:t,defaultCode:i,pageInfo:r,isFallback:n},{firePix:s,asyncUtil:a,errorHandler:o}){this.hookFinder=e,this.docInfo=t,this.defaultCode=i,this.pageInfo=r,this.isFallback=n,this.firePix=s,this.asyncUtil=a,this.userSync=null,this.hasDefaulted=!1,this.adRendered=!1,this.errorHandler=o}serve(i,r){if(this.hasDefaulted||this.adRendered)return;this.hasDefaulted=!0,te.renderDefault(this.defaultCode,this.hookFinder,this.docInfo);const n={...(0,t.Up)(this.pageInfo.get()),rr:i};r&&this.firePix.setAuctionId(r),this.firePix.fireEB(e.kq,n),this.isFallback&&this.errorHandler.fireError("Fallback auction failed to return creative",this.errorHandler.LOG),this.userSync&&this.userSync.doSyncIfAllDone()}setUserSync(e){this.userSync=e}setIsFallback(e){this.isFallback=e}static renderDefault(e,t,i){if(e)if(i.window!==top)K.serveDefaultFrame(e,i.window.document);else{const r=new K(i).wrapAd(e);K.insertAd(r,t.getHook())}}}class ie{constructor(e={}){this._settings=e}get placementCategorizationRate(){return this._settings.placement_categorization_rate||0}get prvSampleRate(){return this._settings.prv_sample_rate||0}get pmdLogRate(){return this._settings.pmd_log_rate||0}get benchmarkLogRate(){return this._settings.benchmark_log_rate||0}get activeviewLogRate(){return this._settings.activeview_log_rate||0}get ignoreSafeframeErrors(){return this._settings.ignore_safeframe_errors||0}}var re=n(465),ne=n(601);const se={moat:1,ias:2,dv:3,fk:4,apx:5,pix:6,adl:7,pix2:8,adel:9,lan:11};class ae{constructor({docInfo:e,placement:t,mainImage:i,adDIV:r,tacticDetails:n={},formatId:s},{creative:a,firePix:o}){this.docInfo=e,this.placement=t,this.mainImage=i,this.adDIV=r,this.viewabilityElement=r,this.creative=a,this.tacticDetails=n,this.formatId=s,this.firePix=o}appendTags(e){const t=this.addViewabilityTestJS(e,window),i=this.getIntegrations();for(let e=0;e<t.length;e++){const r=t[e];let n=!1;for(let e=0;e<i.length;e++)if(r&&r.match&&r.match(i[e].regex)){i[e].action(r),n=!0;break}n||this.defaultAction(r)}}getViewabilityID(){return this.viewabilityID||(this.viewabilityElement.id?this.viewabilityID=this.viewabilityElement.id:(this.viewabilityID="tltpvid_"+Math.round(1e5*Math.random()),this.viewabilityElement.id=this.viewabilityID)),this.viewabilityID}getViewabilityClass(){if(!this.viewabilityClass){if(this.viewabilityClass="tltpvclass_"+Math.round(1e5*Math.random()),!this.viewabilityElement||!this.viewabilityElement.classList)throw new y.Z("getViewabilityClass failed: invalid viewabilityElement",this.errorHandler.WARNING);this.viewabilityElement.classList.add(this.viewabilityClass)}return this.viewabilityClass}appendScriptVE(e){const t=this.create3pScript(),i=this.mainImage;if(i.nextSibling)i.parentNode.insertBefore(t,i.nextSibling);else{const e=this.docInfo.document.createElement("IMG");e.style.display="none",i.parentNode.insertBefore(e,i),e.parentNode.insertBefore(i,e),e.parentNode.insertBefore(t,i.nextSibling),e.parentNode.removeChild(e)}t.src=e}appendScriptAd(e){const t=this.create3pScript();this.adDIV.appendChild(t),t.src=e}defaultAction(e){const t=this.create3pScript();this.viewabilityElement.appendChild(t),t.src=e}create3pScript(){const e=this.docInfo.document.createElement("SCRIPT");return e.className="tl-third-party",e}interpolateDimensions(e){const t=this.mainImage.getBoundingClientRect();return e.replace("[WIDTH]",t.width).replace("[HEIGHT]",t.height).replace("[CONTAINER_ID]",this.getViewabilityID())}getIntegrations(){const e=this;return[{regex:/cdn\.adnxs/,action(t){e.appendScriptAd(t.replace("%native_dom_id%",e.getViewabilityID()))}},{regex:/cdn\.doubleverify/,action(t){const i=(t.match("findclass")?t:t+"&findclass=1").replace(/INSERT_SUPPLIER_ID/,"TripleLift").replace("[PLACEMENT_ID]",e.placement.id).replace("[DV_PLACEMENT_ID]",e.placement.dvPlacementId).replace(/INSERT_BTREG/,e.getViewabilityClass()).replace(/INSERT_BTADSRV/,e.getViewabilityClass()).replace("[TLVIEW_ID]",e.getViewabilityID());e.appendScriptAd(i)}},{regex:/adsafeprotected/,action(t){const{tacticDetails:i}=e,r=void 0!==e.tacticDetails.advid;e.appendScriptVE(t.replace("$!{AD_ID}",e.placement.id).replace("$!{ADVERTISER_ID}",r?i.advid:"0").replace("$!{INSERTION_ORDER_ID}",r?i.ioid:i.bmid).replace("[TLVIEW_ID]",e.getViewabilityID()))}},{regex:/licdn/,action(t){e.appendScriptVE(t)}},{regex:/voicefive/,action(t){const i=t.replace("[PLACEMENT_ID]",e.placement.placementID).replace("[TLVIEW_ID]",e.getViewabilityID());e.appendScriptVE(i)}},{regex:/(js|z)\.moatads/,action(t){let i=t.replace("_PUBLISHER_",e.placement.publisherId).replace("_PLACEMENT_ID_",e.placement.id).replace("_CREATIVE_",e.tacticDetails.clid).replace("_FORMAT_",e.formatId).replace("[TACTIC]",e.tacticDetails.tid).replace("[DSP]",e.tacticDetails.bmid).replace("[BRAND]",e.tacticDetails.brid).replace("[MOAT_Z_PARAMS]",ne.Z.makeZParamsString(e.creative,e.tacticDetails));i=i.match(/\[TLVIEW_ID]/)?i.replace("[TLVIEW_ID]",e.getViewabilityID()):i.concat("&tlview_id=",e.getViewabilityID()),e.appendScriptAd(i)}},{regex:/c\.betrad/,action(t){e.appendScriptAd(e.interpolateDimensions(t))}},{regex:/choices\.truste/,action(t){e.appendScriptAd(e.interpolateDimensions(t))}},{regex:/ybp\.yahoo/,action(t){e.appendScriptAd(t.replace("TLVIEW_ID",e.getViewabilityID()))}},{regex:/h6\.msn/,action(t){e.appendScriptAd(t.replace("TLVIEW_ID",e.getViewabilityID()))}},{regex:/fk\.unicornengine/,action(t){e.appendScriptAd(t.replace("TLVIEW_ID",e.getViewabilityID()).replace("PLACEMENT_ID",e.placement.id).replace("TIMESTAMP",Date.now()))}},{regex:/q\.adrta/,action(t){const i="[DIV_ID]",r=e.getViewabilityID(),n=t.includes(i)?t.replace(i,r):t+";divid="+r;e.appendScriptAd(n)}},{regex:/[a-z]+.adlooxtracking/,action(t){e.appendScriptAd(t.replace("[TLVIEW_ID]",e.getViewabilityID()))}},{regex:/aam\.a47b/,action(t){e.appendScriptAd(t.replace("[TLVIEW_ID]",e.getViewabilityID()))}}]}addViewabilityTestJS(t,i){const r=this.creative.getParams(),n=r.viewability||{},s={pid:this.placement.id,unid:r.additional_data.unid||0};if(this.creative.isAutoplay())return Object.keys(n).forEach((t=>{n[t]&&(s.vid=se[t],s.sr=n[t],this.firePix.fireEB(e.Jt,s))})),t;const a="https:"===i.location.protocol;if(n.moat){const i=a?"https://z.":"http://js.",r=ne.Z.makeZParamsString(this.creative,this.tacticDetails);t.push(i+"moatads.com/triplelift879988051105/moatad.js#moatClientLevel1=_PUBLISHER_&moatClientLevel2=_PLACEMENT_ID_&moatClientLevel3=_CREATIVE_&moatClientLevel4=_FORMAT_&moatClientSlicer1=[DSP]&moatClientSlicer2=[BRAND]&tlview_id=[TLVIEW_ID]&zMoatTactic=[TACTIC]&zMoatPixelParams="+r),s.vid=se.moat,s.sr=n.moat,this.firePix.fireEB(e.Jt,s)}if(n.ias){const i=a?"https:":"http:";t.push(i+"//pixel.adsafeprotected.com/jload?anId=8617&advId=$!{ADVERTISER_ID}&campId=$!{INSERTION_ORDER_ID}&pubId=$!{INVENTORY_SOURCE_ID}&chanId=$!{PACKAGE_ID}&placementId=$!{AD_ID}&adsafe_url=$!{SITE_URL}&adsafe_type=v&tlview_id=[TLVIEW_ID]"),s.vid=se.ias,s.sr=n.ias,this.firePix.fireEB(e.Jt,s)}if(n.lan){const i=a?"https:":"http:";t.push(i+"//static-exp1.licdn.com/sc/h/ahy9615wy6g4nnhnt1jiud49l?clientLevel1=c9dd61c7-6923-4101-a392-1b3ea79cb200&amp;clientLevel2=3&amp;clientLevel3=165008826&amp;clientLevel4=NATIVE"),s.vid=se.lan,s.sr=n.lan,this.firePix.fireEB(e.Jt,s)}if(n.fk){const i=a?"https:":"http:";t.push(i+"//fk.unicornengine.net/ada/117/205667136/viewid=TLVIEW_ID;pid=PLACEMENT_ID/TIMESTAMP/"),s.vid=se.fk,s.sr=n.fk,this.firePix.fireEB(e.Jt,s)}if(n.apx){const i=a?"https:":"http:";t.push(i+"//cdn.adnxs.com/v/s/112/trk.js#v;tv=native-test;native=1;dom_id=%native_dom_id%;st=0;d=1x1;vc=iab;vid_ccr=1;an_sdk=1;tag_id=12350495;cb=http%3A%2F%2Ffra1-ib.adnxs.com%2Fvevent%3Fe%3DwqT_3QL5BqB5AwAAAwDWAAUBCJmth9MFEOG_loLBiueEIxiamLHqnKPMylkqNgkAAAECCAhAEQEHEAAACEAZCQkI8D8hCQkICEApEQkAMQkJsAAAMJ_o8QU4zhJAzhJIAlC994knWNSeH2AAaN7dGHjtyASAAQGKAQNVU0SSAQEG8FCYAQGgAQGoAQGwAQC4AQDAAQTIAQLQAQDYAQDgAQDwAQCKAjp1ZignYScsIDM5MzgwMSwgMTUxNjM2MTM2OSk7dWYoJ3InLCA4MTk1MTY3NywyHgDwnJIC-QEhNHpYcWVBaUVnTmtDRUwzM2lTY1lBQ0RVbmg4d0FEZ0FRQVJJemhKUW4tanhCVmdBWU1vSGFBQndDbmo0bVFHQUFiSURpQUZva0FFQm1BRUJvQUVCcUFFRHNBRUF1UUctMEV6RkFBQUlRTUVCdnRCTXhRQUFDRURKQVFSTHpPUll5OVFfMlFFQUFBQUFBQUR3UC1BQkFQVUIFDyhKZ0NBS0FDQUxVQwUQBEwwCQjwTE1BQ0FNZ0NBT0FDQU9nQ0FQZ0NBSUFEQVpBREFKZ0RBYWdEaElEWkFyb0RFV1JsWm1GMWJIUWpSbEpCTVRvek56QTSaAjkhdWdzcTl3NvwA9FQBMUo0ZklBUW9BRG9SWkdWbVlYVnNkQ05HVWtFeE9qTTNNRGcu2AKfCeACjKYO6gIzaHR0cDovL3Rlc3RwYWdlcy5tY2FyLW1hYy5hbGVudHkuZnIvMDFfYmFzaWNfc2luZ2xlgAMAiAMBkAMAmAMXoAMBqgMAwAOQHMgDANIDLAgCEigwMjhkZjRlMzY0MzdlOThmOWU5M2MzYWUwZjlmOTllNTEyYTI4Y2Vl0gMkCAQSIDg3NDdhOTk1OTQzODIyZjc4NzU0ZDIwNTg3ZjdiNGY32AMA4AMA6AMA-AMCgAQAkgQGL3V0L3YzmAQAogQKMTAuMi4xMi4xMagEvZNwsgQQCAAQARisAiD6ASgAMAA4ArgEAMAEAMgEANIEEWRlZmF1bHQjRlJBMTozNzA42gQCCAHgBADwBL33iSeIBQGYBQCgBf___________wHABQDJBQBF_xTwP9IFCQkFC1QAAADYBQHgBQHwBQH6BQQIABAAkAYA%26s%3D4604caf2bd786775fa256dca81881be0f0bb9312%26referrer%3D;ts=1516361369;cet=0;cecb="),s.vid=se.apx,s.sr=n.apx,this.firePix.fireEB(e.Jt,s)}if(n.pix){const i=a?"https:":"http:";t.push(i+"//q.adrta.com/s/tpl/aa.js?cb=[CACHEBUSTER]#tpl;paid=ss;avid=[ADVERTISER_ID];caid=[CAMPAIGN_ID];publisherId=[PUBLISHER_ID];kv24=[SUPPLY_TYPE];divid=[DIV_ID]"),s.vid=se.pix,s.sr=n.pix,this.firePix.fireEB(e.Jt,s)}if(n.adl){const e=a?"https:":"http:";t.push(e+"//j.adlooxtracking.com/ads/js/tfav_adl_321.js#platform=159&scriptname=adl_321&tagid=874&typejs=tvaf&fwtype=2&creatype=2&targetelt=tlview_id=[TLVIEW_ID]&custom2area=0&custom2sec=0&id1=tlview_id=[TLVIEW_ID]&id2=&id3=&id4=&id5="),s.vid=se.adl,s.sr=n.adl,this.firePix.fireEB("tpvpx",s)}if(n.adel){const i=a?"https:":"http:";t.push(i+"//aam.a47b.com/aam?asid=757a4107&ad=${CREATIVE_ID}&adv=${ADV_ID}&ca=${CP_ID}&cty=${USER_CITY}&ctr=${USER_COUNTRY}&did=${DEAL_ID}&df=${DEVICE_MAKE_ID}&dt=${DEVICE_MODEL_ID}&iid=${AUCTION_ID}&io=${IO_ID}&li=${CPG_ID}&ptnr=${PUBLISHER_ID}&pl=${TAG_ID}&ra=${CACHEBUSTER}&rg=${USER_STATE}&st=${SITE_ID}&sv=${SELLER_MEMBER_ID}&usr=${USER_ID}&zc=${POSTAL_CODE}&pelc=[TLVIEW_ID]"),s.vid=se.adel,s.sr=n.adel,this.firePix.fireEB(e.Jt,s)}return t}}const oe=0,ce=1,le=2,de=3,he=4,ue=6;class pe{constructor({docInfo:e,placement:t},{creative:r,auctionIframeWriterOverride:n,firePix:s,errorHandler:a,eventController:o}){(0,p.Z)(this,"firePix",void 0),(0,p.Z)(this,"auctionIframeWriterOverride",void 0),(0,p.Z)(this,"macros",void 0),(0,p.Z)(this,"docInfo",void 0),(0,p.Z)(this,"placement",void 0),(0,p.Z)(this,"errorHandler",void 0),(0,p.Z)(this,"creative",void 0),(0,p.Z)(this,"creativeParams",void 0),(0,p.Z)(this,"shouldWaitForPassthru",!0),(0,p.Z)(this,"passthruClickTracker",null),(0,p.Z)(this,"passthruTimer",null),(0,p.Z)(this,"thirdPartyJS",null),(0,p.Z)(this,"hasBilled",!1),(0,p.Z)(this,"isCachedAppendJsEvent",!1),(0,p.Z)(this,"numClicks",0),(0,p.Z)(this,"cachedTrackers",[]),(0,p.Z)(this,"cachedCarouselIndexes",[]),this.docInfo=e,this.placement=t,this.creative=r,this.creativeParams=r.getParams(),this.firePix=s,this.auctionIframeWriterOverride=n,this.errorHandler=a,o.on(i.tn,((...e)=>this.passthru(...e)))}passthru(e,i){if(!this.shouldWaitForPassthru)return;this.shouldWaitForPassthru=!1,clearTimeout(this.passthruTimer),this.passthruClickTracker=(0,t.ws)(e),this.macros="string"==typeof i?JSON.parse(i):i,this.macros=this.replaceAllDisplayClickMacros(this.macros),this.fireAllCachedTrackers(),this.expandAllClickThroughMacros();this.creativeParams.nob_passthru&&this.creative.getVastTag()&&this.macros&&this.expandVastTrackers()}expandTracker(e){e.textContent=pe._expandMacros(this.macros,e.textContent)}expandVastTrackers(){const e=this.creative.getVastTag();try{const t={impressions:e.getImpressionTrackers(),mediaFiles:e.getMediaFiles(),clickTrackers:e.getVideoClickTrackers(),clickthrough:e.getVastClickThrough(),assortedTrackers:e.getAssortedTrackers()};Object.keys(t).forEach((e=>{Array.isArray(t[e])?t[e].forEach((e=>this.expandTracker(e))):t[e]&&this.expandTracker(t[e])}))}catch(e){this.errorHandler.fireError(e,this.errorHandler.ERROR)}}fireAllCachedTrackers(){this.firePreviousClicks(),this.fireCachedTrackers(),this.fireCachedJs()}expandAllClickThroughMacros(){const e="clickthrough_url";this.creativeParams={...this.creativeParams,[e]:this.expandClickThroughMacro(this.creativeParams),allImages:this.creativeParams.allImages.map((t=>({...t,[e]:this.expandClickThroughMacro(t)})))}}expandClickThroughMacro(e){const t=pe._expandMacros(this.macros,e.origClickThroughUrl);return this.creative.expandAndRedirectClickThrough(e,t)}replaceAllDisplayClickMacros(e){const i=e;if(null!=i){Object.keys(i).forEach((e=>{const r=i[e],n=(0,t.ws)(r);i[e]=n}))}return i}fireCachedTrackers(){this.cachedTrackers.map((e=>pe._expandMacros(this.macros,e))).forEach((e=>this.firePix.fire(e)))}fireCachedJs(){this.isCachedAppendJsEvent&&this.appendJs()}firePreviousClicks(){const e=pe._expandMacros(this.macros,this.passthruClickTracker);for(let t=0;t<this.numClicks;t++)this.firePix.fire(e)}billOrWait(){const e=this.creativeParams.billable_event;e&&e!==oe&&e!==ce||this.bill()}bill(){this.hasBilled||(this.hasBilled=!0,this.creativeParams.billable_pixel&&this.firePix.fire(this.creativeParams.billable_pixel),this.creativeParams.nob_passthru?this._startPassthruTimer():(this.shouldWaitForPassthru=!1,this.fireAllCachedTrackers()),this.creativeParams.ad_markup&&this.auctionIframeWriterOverride.newWriter(this.creativeParams.ad_markup))}fire3pTracker(e){this.shouldWaitForPassthru?this.cacheTracker(e):this.firePix.fire(pe._expandMacros(this.macros,e))}cacheTracker(e){this.cachedTrackers.push(e)}fireImpression(){this.creativeParams.thirdPartyTrackers.impressionPixels.forEach((e=>this.fire3pTracker(e)))}fireCarouselImpression(e=0){if(!this.cachedCarouselIndexes.includes(e)){this.cachedCarouselIndexes.push(e);(this.creative.getAllImages()[e].thirdPartyTrackers.impressionPixels||[]).forEach((e=>{this.fire3pTracker(e)}))}}fireClick(e){let t;this.numClicks++,t=void 0===e?this.creativeParams:this.creativeParams.allImages[e];let i=t.thirdPartyTrackers.clickPixels;this.passthruClickTracker&&(i=i.concat([this.passthruClickTracker])),this.creativeParams.billable_event===he&&this.bill(),i.forEach(this.fire3pTracker.bind(this))}fireViewable(){this.creativeParams.billable_event===le&&this.bill();this.creativeParams.thirdPartyTrackers.viewabilityPixels.forEach(this.fire3pTracker.bind(this))}fireOnePxViewable(){this.creativeParams.billable_event===ue&&this.bill()}firePlay(){this.creativeParams.billable_event===de&&this.bill()}appendJsOnPassthru(e,t){this.thirdPartyJS=new ae({docInfo:this.docInfo,placement:this.placement,mainImage:t,adDIV:e,tacticDetails:this.creativeParams.additional_data,formatId:this.creativeParams.format_id},{creative:this.creative,firePix:this.firePix}),this.shouldWaitForPassthru?this.isCachedAppendJsEvent=!0:this.appendJs()}appendJs(){const e=this.creativeParams.thirdPartyTrackers.jsTrackers||[];this.thirdPartyJS.appendTags(e.map((e=>pe._expandMacros(this.macros,e))))}static _expandMacros(e,i){if(!e||!i)return i;let r=i;return(0,t.yu)(e,((e,i)=>{let n=e;n="%"===e[0]&&"{"===e[1]?"$"+e.slice(1):"%"===e[0]&&"["===e[1]?"{"+e.slice(2,e.length-1)+"}":e[0]+e.slice(3,e.length),n=new RegExp((0,t.hr)(n),"g"),r=r.replace(n,i)})),r}_startPassthruTimer(){this.passthruTimer=setTimeout((()=>{this.errorHandler.fireError("Passthru invocation timed out",this.errorHandler.ERROR)}),8e3)}}class me{constructor({placement:e,environment:t,topWindow:i,debugFlag:r,gdpr:n}){this.placement=e,this.environment=t,this.window=i,this.debugFlag=r,this.gdpr=n,this.tlSyncDone=!1,this.window._tlTagsPending=(this.window._tlTagsPending||0)+1,this.placement.customOptions.userSyncsDisabled&&(this.tlSyncDone=!0)}async doSync(){if(!this.tlSyncDone){this.tlSyncDone=!0;const e={},{maxUserSyncs:i}=this.placement.customOptions;if(i&&(e.max=i),this.debugFlag&&(e.debug=1),this.gdpr&&(await this.gdpr.getCMPData(),this.gdpr.cmpData)){if(this.gdpr.cmpData.gdprApplies&&!this.gdpr.cmpData.tripleliftConsent)return;e.gdpr=!!this.gdpr.cmpData.gdprApplies,this.gdpr.cmpData.consentString&&(e.cmp_cs=this.gdpr.cmpData.consentString)}const r=document.createElement("iframe");r.addEventListener("load",t.l.bind(null,r)),r.src=(0,t.uC)(this.environment.ebPath,"sync",e),(0,t.E_)(r),document.body.appendChild(r)}}doSyncIfAllDone(){if(0==--this.window._tlTagsPending)if("complete"===this.window.document.readyState)this.doSync();else{const e=this;this.window.addEventListener("load",(()=>{e.doSync()}),!1)}}}class ge{constructor(e,t){this.errorDecorator=e,this.topWindow=t}isFunction(e){return"function"==typeof e}addScrollListener(e=window,t){let i=t;return this.isFunction(this.errorDecorator)&&(i=this.errorDecorator(i)),e.addEventListener("DOMContentLoaded",i,!1),e.addEventListener("load",i,!1),e.addEventListener("scroll",i,!1),e.addEventListener("resize",i,!1),i}addResizeListener(e){let t=e;return this.isFunction(this.errorDecorator)&&(t=this.errorDecorator(t)),this.topWindow.addEventListener("DOMContentLoaded",t,!1),this.topWindow.addEventListener("load",t,!1),this.topWindow.addEventListener("resize",t,!1),t}listen(e,t,i,r,n){let s=i;return this.isFunction(this.errorDecorator)&&(s=this.errorDecorator(s)),n&&(s=this.decorateStopAndPrevent(s)),e.addEventListener(t,s,r),s}decorateStopAndPrevent(e){return function(t,...i){t.stopPropagation(),t.preventDefault(),e.apply(this,i)}}timeoutWrap(e,t){const i=this.isFunction(this.errorDecorator)?this.errorDecorator(e):e;return setTimeout(i,t)}}class fe{constructor({placement:e,docInfo:t},{positionService:i,errorHandler:r,eventController:n,asyncUtil:s}){this.placement=e,this.document=t.document,this.window=t.window,this.positionService=i,this.errorHandler=r,this.eventController=n,this.asyncUtil=s,this.listeners=[],this.listenerTimeoutId=0}listenForPercentageAdViewability(e,t){const i=fe.getRequiredPct(e);let r=0;this.setListener({handler:t,condition:()=>{const e=0!==r;if(e&&performance.now()-r>=1e3)return!0;const t=this.positionService.getAdPctInView()>=i;return t&&!e?r=performance.now():!t&&r&&(r=0),!1}})}listenForOnePxAdViewability(e){const t=()=>this.positionService.getAdPctInView()>0;this.setListener({handler:e,condition:t});const r=()=>{t()&&(this.eventController.off(i.nP,r),e())};this.eventController.on(i.nP,r)}static getRequiredPct(e){return e.clientWidth*e.clientHeight>=242500?.3:.5}setListener(e){this.listeners.push(e),this.listen()}listen(){if(this.listenerTimeoutId>0)return;const e=()=>{this.listeners=this.listeners.filter((e=>!e.condition()||(e.handler(),!1))),this.listeners.length>0?this.listenerTimeoutId=this.asyncUtil.timeoutWrap(e,100):this.listenerTimeoutId=0};this.listenerTimeoutId=this.asyncUtil.timeoutWrap(e,100)}}var ye=n(314);class ve{constructor({settings:e,ttjStartTime:t=0,revision:i,isTestEnv:r},{eventController:n,firePix:s}){this.ttjStartTime=t,this.revision=i,this.eventController=n,this.firePix=s,this.formatId=null,this.isHeaderBidding=!1,this.lastMetricTime=0,this.shouldLog=t>0&&!r&&Math.random()<=e.benchmarkLogRate,this._setupListeners()}log(e,t=performance.now()){if(this.shouldLog){const i=t-this.ttjStartTime,r=this.lastMetricTime?t-this.lastMetricTime:0;this.lastMetricTime=t,this._logPerformanceDyn(e,i,r),this._logPerformanceEB(e,i,r)}}setFormatId(e){this.formatId=e}setIsHeaderBidding(e){this.isHeaderBidding=e}_logPerformanceDyn(e,t,i){const r={string2:this.revision,string3:this.isHeaderBidding?"header"+e.replace(/^./,(e=>e.toUpperCase())):e,long1:ye.v,long2:t,long3:i};this.firePix.fireDyn(r)}_logPerformanceEB(e,t,i){t<=15e3&&this.firePix.firePerf({type:e,timeSinceStart:t,timeSinceLast:i,clientSideAuction:!this.isHeaderBidding,formatId:this.formatId})}_setupListeners(){this.eventController.on(i.i2,(e=>{this.setFormatId(e.settings.format_id)}))}}(0,p.Z)(ve,"BUNDLE_LOAD_TIME","bundleLoadTime"),(0,p.Z)(ve,"AUCTION_START","auctionStart"),(0,p.Z)(ve,"AUCTION_RESPONSE","auctionResponse"),(0,p.Z)(ve,"RENDER","render"),(0,p.Z)(ve,"AD_ON_PAGE","adOnPage");class _e{constructor(e){this.benchmark=e,this.laps=[],this.lastMetricTimeBeforeFirstLap=0,this.justEnteredALap=!1}log(e,t=performance.now()){if(this.benchmark.shouldLog){this._updateBenchmarkLastMetricTime();const i=this._transposeToFirstLap(t);this.benchmark.log(e,i)}}_transposeToFirstLap(e){if(this.laps.length){const t=this.laps[0];return e-this.laps[this.laps.length-1]+t}return e}_updateBenchmarkLastMetricTime(){this.justEnteredALap&&(this.benchmark.lastMetricTime=this.lastMetricTimeBeforeFirstLap,this.justEnteredALap=!1)}startLap(e=performance.now()){this.laps.length||(this.lastMetricTimeBeforeFirstLap=this.benchmark.lastMetricTime),this.laps.push(e),this.justEnteredALap=!0}}const Ie=(e,t)=>{let i=parseInt(t,10),r=e;for(isNaN(i)&&(i=1);i--;)r=encodeURIComponent(r);return r},Ae=(e,t,i)=>{const{focalBox:r}=e,n={};if(!r)return null;const s=(e,t,i)=>Math.round(e/t*i);return n.x1=s(r.x1,e.image_width,t),n.x2=s(r.x2,e.image_width,t),n.y1=s(r.y1,e.image_height,i),n.y2=s(r.y2,e.image_height,i),n},we=(e,t)=>{const i=parseInt(t,10);let r=e;if(!e||!i||i<3)return e;const n=e.match(/(.*)(<a.*>)(.*)(<\/a>)(.*)/);return n?((e,t)=>{let i=e[1],r=e[2],n=e[3],s=e[4],a=e[5],o=i.length+n.length+a.length-t+3;return o<=3||(o<=a.length?a=a.substr(0,a.length-o)+"...":o<=a.length+n.length?(o-=a.length,n=n.substr(0,n.length-o)+"...",a=""):(o-=a.length+n.length,i=i.substr(0,i.length-o)+"...",r="",n="",s="",a="")),i+r+n+s+a})(n,i):(i<e.length&&(r=e.substr(0,i-3)+"..."),r)},Ce=(e,t,i)=>i&&e&&e.toLowerCase()===t?i:e;class Ee{constructor({creativePayload:e,environment:t,placement:i,pageInfo:r,isSmallScreen:n,clickTrackerDTJ:s,debug:a,templateDetail:o,tlImageId:c,errorHandler:l}){(0,p.Z)(this,"firePix",void 0),(0,p.Z)(this,"params",null),(0,p.Z)(this,"creativePayload",null),(0,p.Z)(this,"formatId",null),(0,p.Z)(this,"environment",null),(0,p.Z)(this,"placement",null),(0,p.Z)(this,"isSmallScreen",null),(0,p.Z)(this,"clickTrackerDTJ",null),(0,p.Z)(this,"pageInfo",null),(0,p.Z)(this,"debug",!1),this.creativePayload=e,this.formatId=e.settings.format_id,this.environment=t,this.placement=i,this.isSmallScreen=n,this.clickTrackerDTJ=s,this.pageInfo=r,this.debug=a,this.templateDetail=o,this.tlImageId=c,this.params=null,this.errorHandler=l,this.initParams()}initParams(){let e=this.creativePayload.assets;e=e.map((e=>this.processClickThroughUrl(e))),e=e.map((e=>this._appendThirdPartyTrackers(e))),e=e.map((e=>((e,t,i=100)=>{const r={caption:we(e.caption,t),heading:we(e.heading,i)};return{...e,...r}})(e,this.placement.captionCharacterLimit,this.placement.headingCharacterLimit))),this.params=this.makeParams(e)}makeParams(e){const i=((e,t)=>{const i=[...e];if(t){const e=i.find((e=>parseInt(t,10)===e.image_id));if(e)return e}return i.find((e=>e.impression_pixels))||e[0]})(e,this.tlImageId),r={...this.creativePayload.settings,...i};var n,s;r.allImages=e,r.heading=this._getHeading(r),r.caption=this._getCaption(r),r.advertiser_name=this._getAdvertiserName(r),r.isCSR=(n=r.client_side_render,s=r.image_id,n||+s<0),r.adchoices_url=(({adchoices_url:e})=>{const{DEFAULT_ADCHOICES_URL:i}=u.Z;return(0,t.Zx)(e)||i})(r),r.logo_image_url=(e=>{const i=e.logo_image_url||e.light_logo_url;return(0,t.Zx)(i)})(r),r.render_options_bm=r.render_options_bm||0,r.orig_image_url=r.image_url;const{processedImageUrl:a,srcSet:o}=this._getProcessedImageUrlAndSrcSet(r,this.templateDetail);return r.image_url=a,r.image_srcset_2x=o,r}_getAdvertiserName(e){const{disclosureOverride:t}=this.placement.customOptions;return"Advertising Partner"===e.advertiser_name&&"string"==typeof t?(this.placement.disclosure=t,""):e.advertiser_name}_getHeading(e){const{defaultHeadingOverride:t}=this.placement.customOptions;return Ce(e.heading,"sponsored video",t)}_getCaption(e){const{defaultCaptionOverride:t}=this.placement.customOptions;return Ce(e.caption,"watch to learn more",t)}doesFormatUseTemplateImgTag(){return[this.environment.formats.image,this.environment.formats.native_lite,this.environment.formats.video].indexOf(this.formatId)>-1}_getProcessedImageUrlAndSrcSet(e,t){let i=null,r=null;if(this.formatId===this.environment.formats.cinemagraph)i=this._determineAnimatedUrl(e);else if(e.image_url&&this.doesFormatUseTemplateImgTag())if(e.isCSR)i=e.image_url;else{const{width:n,height:s}=this._getDimensions(e.image_width,e.image_height),a={url:e.orig_image_url,imgServerParams:e.img_server_params,tlImgAddr:this.environment.tlImageAddr,placementWidth:n,placementHeight:s,logoBlackList:this.placement.logoBlackList,noLogo:e.customization&&e.customization.reveal,templateDetail:t};i=this.createDynamicImageURL(a),r=this._createImageSrcset({...a,placementWidth:2*this.placement.imageWidth,placementHeight:2*this.placement.imageHeight})}else i=u.Z.TINY_IMG_DATA;return{processedImageUrl:i,srcSet:r}}_getDimensions(e,t){let i=this.placement.imageWidth,r=this.placement.imageHeight;return(i<e||r<t)&&(i*=2,r*=2),{width:i,height:r}}expandAndRedirectClickThrough(e,i=null){if(!e.origClickThroughUrl)return;const r=this.creativePayload.settings.additional_data,n=e.asset_id||this.creativePayload.settings.asset_id,s=r.tid,a=this.expandFirstPartyMacros(s,n,this.clickTrackerDTJ);let o=null===i?e.origClickThroughUrl:i;o=this.expandFirstPartyMacros(s,n,o),o=((e,t)=>{if(e)return decodeURIComponent(e)+encodeURIComponent(t);return t})(a,o),o=((e={},i,r)=>{const n={tl_clickthrough:!0,redir:r,tluid:e.uid,...e};return(0,t.uC)(i,"pass",n)})(r,this.environment.ebPath,o);return e.clickthrough_url=o,o}processClickThroughUrl(e){const t=e,i=t.clickthrough_url||this.creativePayload.settings.clickthrough_url;return t.origClickThroughUrl=i,i&&(t.clickthrough_url=this.expandAndRedirectClickThrough(t)),t}expandFirstPartyMacros(e,i,r){if(!r)return null;let n=r;const s=this.pageInfo.get().ref,a=(0,t.EC)(s).host;n=n.replace(/\[domain]/gi,a),n=n.replace(/\[placement_id]/gi,this.placement.id),n=n.replace(/\[campaign]/gi,e),n=n.replace(/\[ad]/gi,i),n=n.replace(/\[timestamp]/gi,(new Date).getTime()),n=n.replace(/%time%/gi,(new Date).getTime()),n=(0,t.ws)(n);const o=1e10;return n=n.replace(/\[cachebuster]/gi,(0,t.rO)(o)),n=n.replace(/\[random_number]/gi,(0,t.rO)(o)),n=n.replace(/\${cachebuster}/gi,(0,t.rO)(o)),n=n.replace(/{isfallback}/gi,this.creativePayload.settings.isFallbackAssets),n}createDynamicImageURL(e){const{url:i,tlImgAddr:r,placementWidth:n,placementHeight:s}=e;let a=e.imgServerParams||"",o=e.logoBlackList||"";e.noLogo&&(a=(0,t.sf)(a,"lp"),o="NW,NE,SE,SW");const c=[],l=this.templateDetail.width||("0"===n?NaN:n),d=this.templateDetail.height||("0"===s?NaN:s);return c.push("width="+l),c.push("height="+d),c.push("url="+encodeURIComponent(i)),c.push("logo_exclude="+o),(0,t.Rz)("//"+r+"/?"+c.join("&")+"&"+a)}getAllDynamicImageURLS(e=!0){const t=this.placement.imageWidth,i=this.placement.imageHeight;return this.params.allImages.map((r=>{if(+r.image_id<0)return r.image_url;return{src:this.createDynamicImageURL({url:r.image_url,imgServerParams:r.img_server_params,noLogo:e,tlImgAddr:this.environment.tlImageAddr,placementHeight:i,placementWidth:t}),srcset:this._createImageSrcset({url:r.image_url,imgServerParams:r.img_server_params,noLogo:e,tlImgAddr:this.environment.tlImageAddr,placementWidth:2*this.placement.imageWidth,placementHeight:2*this.placement.imageHeight})}}))}isBanner(){return this.formatId===this.environment.formats.header_direct_banner}isCarousel(){return this.formatId===this.environment.formats.carousel}isImage(){return[this.environment.formats.image,this.environment.formats.native_lite].indexOf(this.formatId)>-1}isCinemagraph(){return this.formatId===this.environment.formats.cinemagraph}isScroll(){return this.formatId===this.environment.formats.scroll}isWindow(){return this.formatId===this.environment.formats.skylight}isPharma(){return this.formatId===this.environment.formats.pharma}isHdx(){return this.formatId===this.environment.formats.header_direct_banner}isNativeLite(){return this.formatId===this.environment.formats.native_lite}isVast(){return!1}isAutoplay(){return!1}isHighImpact(){return!1}isAdChoicesOptOut(){const e=this.params.render_options_bm,i=this.environment.renderOptionsMap;return!!(0,t.hU)(e,i.adchoices_opt_out)}isDemandSideCtaTextOptIn(){const e=this.params.render_options_bm,i=this.environment.renderOptionsMap;return!!(0,t.hU)(e,i.cta_overlay)}shouldVideoPauseOutOfView(){const e=this.params.render_options_bm,i=this.environment.renderOptionsMap,r=this.placement.customOptions.disableOutstreamVideoBehavior,n=(0,t.hU)(e,i.video_pause_out_view);return r||n}getParams(){return this.params}getBaseZIndex(){return u.Z.BASE_Z_INDEX}getVastTag(){return null}needsViewabilityAwareness(){return this.isScroll()||this.isWindow()}hasClickThrough(){return!!this.params.clickthrough_url}_appendThirdPartyTrackers(e){const t=this.creativePayload.settings,i=e.clickthrough_pixels||t.clickthrough_pixels||[],r=e.viewability_pixels||t.viewability_pixels||[],n=e.js_trackers||t.js_trackers||[];let s=e.impression_pixels||t.impression_pixels||[];const a=this._getClickTracker(e);a&&i.push(a);const o=e.third_party_duplicate_rate||t.third_party_duplicate_rate;o&&Math.random()<o&&(s=(e=>{if(!e)return[];const t=e.slice();for(let e=0;e<t.length;e++)t[e].indexOf("?")>-1?t[e]+="&tlcb=${CACHEBUSTER}":t[e]+="?tlcb=${CACHEBUSTER}";return e.concat(t)})(s));const c=t.additional_data.tid,l=e.asset_id||t.asset_id,d=this.expandFirstPartyMacros.bind(this,c,l),h={impressionPixels:s.map(d),clickPixels:i.map(d),viewabilityPixels:r.map(d),jsTrackers:n.map(d)};return Object.assign(e,{thirdPartyTrackers:h})}_determineAnimatedUrl(e){if(!e.animation_variants||!e.animation_variants.length||this.debug)return e.image_url;const t=e.animation_variants;let i,r=100*Math.round((this.placement.imageWidth+100)/100),n=r&&t.indexOf(r)>-1;if(!n&&this.isSmallScreen&&(r=Math.max.apply(null,t),n=!0),n){const t=Math.round(e.image_height/e.image_width*r);Object.assign(e,{focal_box:Ae(e,r,t)},{image_width:r,image_height:t}),i=e.image_url.replace(".gif","_a"+r+".gif")}else i=e.image_url;return i}_createImageSrcset(e){return this.createDynamicImageURL(e)+" 2x"}_getClickTracker(e){let t,i;return e.click_tracker_url?(t=e.click_tracker_encoding_level,i=e.click_tracker_url):(t=this.creativePayload.settings.click_tracker_encoding_level,i=this.creativePayload.settings.click_tracker_url),i&&t>0?Ie(i,t):i}}class Te extends Ee{initParams(){var e;super.initParams(),(null===(e=this._getCarouselWeights())||void 0===e?void 0:e.length)>0?this._setAllImagesWeighted():this._setAllImages()}getAllImages(){return this.allImages}_setAllImages(){this.allImages=(0,t.lX)(this.params.allImages,10)}_setAllImagesWeighted(){this._validateImageIds(),this._validateWeight(),this._validateWeightsSum();const e=this._chooseFirstImage();this._swapFirstImage(e),this.allImages=this.params.allImages.slice(0,10)}_chooseFirstImage(){const e=this._getCarouselWeights(),t=this._getWeightsSum(),i=Math.random()*t;let r=0;return e.find(((t,n)=>(r+=e[n].weight,i<r)))}_getWeightsSum(){return this._getCarouselWeights().reduce(((e,t)=>e+t.weight),0)}_getCarouselWeights(){var e,t;return null===(e=this.params)||void 0===e||null===(t=e.customization)||void 0===t?void 0:t.carousel_weights}_validateImageIds(){const e=this._getCarouselWeights().map((e=>e.image_id)),t=this.params.allImages.map((e=>e.image_id));e.every((e=>t.includes(e)))||this.errorHandler.fireError("There are image_ids in carousel_weights that do not map to an image in the creative.",this.errorHandler.WARNING)}_validateWeightsSum(){const e=this._getWeightsSum();(e<.99||e>1.01)&&this.errorHandler.fireError("Carousel_weights do not sum to 1 within a tolerance of 1%",this.errorHandler.WARNING)}_validateWeight(){this._getCarouselWeights().forEach((e=>{e.weight||(e.weight=0,this.errorHandler.fireError("Image id: "+e.image_id+" does not have an associated weight, defaulted to 0.",this.errorHandler.WARNING))}))}_swapFirstImage(e){const t=this.params.allImages.findIndex((t=>t.image_id===e.image_id)),i=this.params.allImages[t];this.params.allImages[t]=this.params.allImages[0],this.params.allImages[0]=i}}var be=n(336);class Se extends Ee{constructor(e){super(e),this.vastTag=null}getVastTag(){return this.vastTag}setVastTag(e){this.vastTag=e}isVast(){return!0}isAutoplay(){const e=this.environment.formats;return+this.formatId==+e.autoplay||+this.formatId==+e.outstream_video||+this.formatId==+e.high_impact_video}isHighImpact(){const e=this.environment.formats;return+this.formatId==+e.high_impact_video}getBaseZIndex(){return this.vastTag&&this.vastTag.isVpaid()?this.placement.customOptions.videoZIndexOverride||be.Z.vpaidZIndex:be.Z.nonVpaidZIndex}needsViewabilityAwareness(){return this.isAutoplay()}allowVpaidToHandleClicks(){return!(!this.vastTag.isVpaid()||!this.isAutoplay()||this.hasClickThrough())}hasClickThrough(){return!(!super.hasClickThrough()&&!this.vastTag.getVastClickThroughUrl())}}var Me={assets:[{asset_id:0,image_id:0,image_url:u.Z.DEFAULT_FALLBACK_URL,image_w_over_h:1.7778,clickthrough_url:"http://www.doubleverify.com",heading:"",caption:"",cv_version:1,img_server_params:"v=0&cv_version=1"}],settings:{format_id:1,tactic_id:0,line_item_id:0,insertion_order_id:0,creative_library_id:0,advertiser_name:"Sponsor",additional_data:{clid:0,ioid:0,liid:0,tid:0,advid:0,bmid:0,aid:1}}};class Pe{constructor(e,{errorHandler:t}){this.creativePayload=e,this.iframe=Pe.makeIframe(),this.errorHandler=t}callDV(){const e=this._makeScriptsString();return this.iframe.contentWindow.document.open(),this.iframe.contentWindow.document.write(e),this.iframe.contentWindow.document.close(),this._handler().catch((e=>(this._onError(e),this._overwriteCreativePayloadWithPSA())))}_handler(){return new Promise(((e,t)=>{this.iframe.contentWindow.onerror=e=>{t(e)},setTimeout((()=>{t(new y.Z("DoubleVerify timeout"))}),1e4),this.iframe.contentWindow.blockCreative=()=>{this.errorHandler.fireError("DoubleVerify blocked creative, PSA displayed",this.errorHandler.LOG),this._overwriteCreativePayloadWithPSA(),e()},this.iframe.contentWindow.allowCreative=e}))}_onError(e){this.errorHandler.fireError(e,this.errorHandler.ERROR)}_overwriteCreativePayloadWithPSA(){this.creativePayload.settings=Me.settings,this.creativePayload.assets=Me.assets}static makeIframe(){const e=document.createElement("iframe");return e.style.display="none",document.body.appendChild(e),e}_makeScriptsString(){const{dco_tag_url:e}=this.creativePayload.settings;return'\n      <script type="text/adtag"><script type="text/javascript">allowCreative();</scr+ipt><\/script>\n      <script type="text/passback"><script type="text/javascript">blockCreative();</scr+ipt><\/script>\n      <script onerror="(function(el){el.onerror=\'this._onerror})(this)" type="text/javascript" src="'+e+'"><\/script>\n    '}}const Re="__cmp",De="__tcfapi",Le="tl: CMP timeout";class Ne{constructor({win:e,isProxyNeeded:t,errorHandler:i}){(0,p.Z)(this,"cmpTimeout",void 0),this.win=e,this._isProxyNeeded=t,this._errorHandler=i,this._gdprCmpData={tripleliftConsent:!1}}get cmpData(){return this._gdprCmpData}async getCMPData(){if("boolean"!=typeof this._gdprCmpData.gdprApplies)try{await this.checkGdprCompliance()}catch(e){this._errorHandler.fireError("Error getting gdpr CMPData: "+e.message,R.Z.LOG)}}async checkGdprCompliance(){try{let n,s;var e;if("function"==typeof this.win.__cmp)n=await this.callCmp(Re,"getConsentData",null),s=null===(e=await this.callCmp(Re,"getVendorConsents",null))||void 0===e?void 0:e.vendorConsents;else if("function"==typeof this.win.__tcfapi){var i,r;this._isProxyNeeded&&this.createParentProxy();const e=(0,t.Z0)()?"getInAppTCData":"getTCData";n=await this.callCmp(De,e,2),s=null===(i=n)||void 0===i||null===(r=i.vendor)||void 0===r?void 0:r.consents}n&&(this._gdprCmpData=Object.assign(this._gdprCmpData,{gdprApplies:!!n.gdprApplies,consentString:n.consentData||n.tcString}),s&&"boolean"==typeof s[28]&&(this._gdprCmpData.tripleliftConsent=s[28]))}catch(e){throw new y.Z("There was an error in the publisher CMP API: "+(e.message?e.message:e),R.Z.LOG)}finally{clearTimeout(this.cmpTimeout)}}async callCmp(e,t,i){return new Promise(((r,n)=>{this.cmpTimeout=setTimeout((()=>n(Le)),1e3),this.win[e](t,i,r)})).then((e=>Ne.isCmpDataValid(e)?e:(this._errorHandler.fireError("CMP "+t+" command did not return a valid consent object",R.Z.LOG,{data:JSON.stringify(e)}),null))).catch((e=>{e.message!==Le&&this._errorHandler.fireError(e.message,R.Z.LOG)}))}static isCmpDataValid(e){return"object"==typeof e&&"boolean"==typeof e.gdprApplies}createParentProxy(){const e={};var t;t=this.win,window.__tcfapi=function(i,r,n,s){const a=""+Math.random(),o={__tcfapiCall:{command:i,parameter:s,version:r,callId:a}};e[a]=n,t.postMessage(o,"*")},window.addEventListener("message",(function(t){let i={};try{i="string"==typeof t.data?JSON.parse(t.data):t.data}catch(e){throw new y.Z("Invalid data from CMP API",R.Z.LOG)}const r=i.__tcfapiReturn;r&&"function"==typeof e[r.callId]&&(e[r.callId](r.returnValue,r.success),e[r.callId]=null)}),!1)}static getTcfapiWindow(e,i){let r=e;try{for(;r;){var n,s;if(null!==(n=r)&&void 0!==n&&null!==(s=n.frames)&&void 0!==s&&s.__tcfapiLocator)return r;if(r===window.top)break;r=r.parent}}catch(e){(0,t.UP)(.001,(()=>{i.fireError("Error getting _tcfapiLocator: "+e,R.Z.LOG)}))}return null}static getCmpApiWindow(e,t){return"function"==typeof e.__cmp||"function"==typeof e.__tcfapi?e:Ne.getTcfapiWindow(e,t)}}const Oe=0,xe=1,ke=2,je=3,Ze=4,Ue=5,Fe=6,Be=7,We=[Oe,Be,xe,Ze,Fe,je],Ve=[Oe,xe,Be],He=[Oe,Be,xe,Ze,Fe,Ue,je],ze=[Ue,ke,Ze,Fe,je];class Ge{constructor({docInfo:e,placement:t}){this.docInfo=e,this.placement=t,this.cachedApis={},this.cachedPageInfo=null,this.cachedFrameType=null}get(){if(this.cachedPageInfo)return this.cachedPageInfo;let e,i,r;return this.docInfo.canAccessTop?(i=(0,t.EC)(this.docInfo.topDocument.referrer).host,i="undefined"===i?"":i,e=this.docInfo.topDocument.URL):(i="can't access top document",this.placement.customOptions.isAmp?e=this.getAmpReferrer():(e=this.docInfo.document.referrer,r=this.placement.customOptions.referrerOverride,r&&r.indexOf((0,t.EC)(e).host)>=0&&(e=document.URL))),e=(0,t.hL)(e,600),this.cachedPageInfo={domain:this.docInfo.document.domain,ref:e,pr:i||"un"},this.cachedPageInfo}getAmpReferrer(){let e;const i=(0,t.EC)(this.docInfo.document.URL);let r;try{r=JSON.parse(i.anchor)}catch(e){r={}}const n=(0,t.EC)(this.docInfo.document.referrer),s={...i.queryKey,...n.queryKey,...r};return e=s.url?decodeURIComponent(s.url):s._context&&s._context.canonicalUrl?s._context.canonicalUrl:s.top?decodeURIComponent(s.top):s.loc?decodeURIComponent(s.loc):s.iu?decodeURIComponent(s.iu):this.docInfo.document.referrer,e}getFrameType(){return null!==this.cachedFrameType||(this.cachedFrameType=this._determineFrameType()),this.cachedFrameType}_determineFrameType(){return this.getAmpApi()?Ze:this.getMraidApi()?Fe:this.getSafeFrameApi()?Ue:(0,t.Z0)()?je:this.docInfo.canAccessTop?this.docInfo.document===this.docInfo.topWindow.document?Oe:this.placement.customOptions.friendlyIframeRender?Be:xe:ke}isNoFrame(){return this.getFrameType()===Oe}isUnfriendlyFrame(){return this.getFrameType()===ke}isFriendlyFrame(){return this.getFrameType()===xe}isFriendlyFrameRender(){return this.getFrameType()===Be}isClientAware(){return We.indexOf(this.getFrameType())>-1}isPositionAware(){return Ve.indexOf(this.getFrameType())>-1}isViewabilityAware(){return He.indexOf(this.getFrameType())>-1}isSandboxed(){return ze.indexOf(this.getFrameType())>-1}isAmp(){return this.getFrameType()===Ze}isWebview(){return this.getFrameType()===je}isMraid(){return this.getFrameType()===Fe}isSafeFrame(){return this.getFrameType()===Ue}getSafeFrameApi(){const e=this._getApi("$sf");return e&&e.ext?e:null}getAmpApi(){const e=this._getApi("context");return e&&e.observeIntersection?e:null}getMraidApi(){return this._getApi("mraid")}_getApi(e){return void 0===this.cachedApis[e]&&(this.cachedApis[e]=this._findApi(e,this.docInfo.window)),this.cachedApis[e]}_findApi(e,t,i=0){if(i>=5)return null;try{if(t[e])return t[e]}catch(e){return null}return this._findApi(e,t.parent,i+1)}}var Qe=function(e={},t){return{setAdContainer:function(t){e.adContainer=t},getElDims:function(e){if(!e)throw new y.Z("getElDims: no element present");const t=e.getBoundingClientRect();return{width:t.width,height:t.height}},_publishUpdate:function(){t.publish(i.nP)}}};var Ye={getRectPctInView:function(e,t){const i=t.width,r=t.height,n=e.width,s=e.height,a=n*s,o=n+Math.min(0,e.left)+Math.min(0,i-e.right),c=s+Math.min(0,e.top)+Math.min(0,r-e.bottom),l=o*c;return Math.max(0,l/a)},getDefaultBoundingClientRect:function(){return{width:0,height:0,x:0,y:0,top:0,bottom:0,left:0,right:0}},sumRects:function(e,t){return{width:e.width,height:e.height,x:e.x+t.x,y:e.y+t.y,top:e.top+t.top,bottom:e.bottom+t.top,left:e.left+t.left,right:e.right+t.left}}};var qe=function(e,i){const r={getAdBoundingRect:s,getBoundingRect:a,getClientDims:o,getAdPctInView:function(){return Ye.getRectPctInView(s(),o())},getElPctInView:function(e){return Ye.getRectPctInView(a(e),o())}},n=Qe(r,i);return e.asyncUtil.addScrollListener(e.win,n._publishUpdate),(0,t.BF)({},n,r);function s(){return r.adContainer.getBoundingClientRect()}function a(e){return e.getBoundingClientRect()}function o(){return{width:e.win.innerWidth,height:e.win.innerHeight}}};var Je=function(){let e={width:0,height:0},t=Ye.getDefaultBoundingClientRect();return{getAdBoundingRect:i,getBoundingRect:r,getClientDims:n,getAdPctInView:function(){return Ye.getRectPctInView(i(),n())},getElPctInView:function(e){return Ye.getRectPctInView(r(e),n())},_update:function(i,r){t=i,e=r}};function i(){return t}function r(e){const i=e.getBoundingClientRect();return t?Ye.sumRects(i,t):i}function n(){return e}};var Xe=function(e,i){const r=Qe({},i),n=Je();return e.win._tlWebViewUpdatePosition=function(e,t){if(!s(e,t))return;n._update(e,t),r._publishUpdate()},(0,t.BF)({},r,n);function s(e,t){return!(!e||!t)&&(i=n.getAdBoundingRect(),!a(Ke,i,e)||(r=n.getClientDims(),!a($e,r,t)));var i,r}function a(e,t,i){return!e.some((e=>t[e]!==i[e]))}};const Ke=["width","height","x","y","top","bottom","left","right"],$e=["width","height"];var et=function(e,i){const r=Qe({},i),n=Je();return e.pageInfo.getAmpApi().observeIntersection((function(e){e.forEach((e=>{const t={width:e.rootBounds.width,height:e.rootBounds.height};n._update(e.boundingClientRect,t),r._publishUpdate()}))})),(0,t.BF)({},r,n)};var tt=function(e){const i=e.pageInfo.getMraidApi(),r=e.errorHandler;return Object.keys(it).reduce((function(e,n){let s=i[n];const a=it[n];a.validator&&(s=function(e,t,i){return function(...r){const n=t.apply(e,r);i.mraidResult=n;return(0,i.validator)(n),n}}(i,s,a));return s=function(e,i,n,s){const a=(0,t.r3)(r.fireError,r),o="mraid api error. function: "+n+", e: ";return function(...t){let n;try{n=i.apply(e,t)}catch(e){a(o+e,r.LOG,s.mraidResult),n=s.defaultReturn}return n}}(i,s,n,a),e[n]=s,e}),{})};const it={getState:{validator:function(e){if(rt(e),"string"!=typeof e)throw new y.Z("response is not a string value")},defaultReturn:"default"},isViewable:{validator:function(e){if(rt(e),"boolean"!=typeof e)throw new y.Z("response is not a boolean value")},defaultReturn:!1},getCurrentPosition:{validator:function(e){if(rt(e),"number"!=typeof e.width||"number"!=typeof e.height||"number"!=typeof e.x||"number"!=typeof e.y)throw new y.Z("response width, height, x and y fields must be numbers")},defaultReturn:{width:0,height:0,x:0,y:0}},getScreenSize:{validator:function(e){if(rt(e),"number"!=typeof e.width||"number"!=typeof e.height)throw new y.Z("response width and height fields must be numbers")},defaultReturn:{width:0,height:0}},addEventListener:{},getVersion:{}};function rt(e){if(null==e)throw new y.Z("response is null or undefined")}var nt=function(e,i){const{placement:r,firePix:n,analytics:s}=e,a=tt(e),o=Qe({},i),c=Je();let l,d=0;"loading"===a.getState()?a.addEventListener("ready",h):h();return(0,t.BF)(o,c,{getAdPctInView:function(){if(u())return d;return c.getAdPctInView()}});function h(){n.fireDyn({long1:2e3,string2:a.getVersion(),string3:r.invCode}),u()&&a.addEventListener("exposureChange",p),a.addEventListener("viewableChange",m)}function u(){return"3.0"===a.getVersion()}function p(e){d=e/100,g()}function m(e){e&&s.onePxViewable(),u()||(g(),e?l=setInterval(g,200):clearInterval(l))}function g(){const e=a.getCurrentPosition(),t=a.getScreenSize(),i={width:e.width,height:e.height,x:e.x,y:e.y,top:e.y,bottom:e.y+e.height,left:e.x,right:e.x+e.width};c._update(i,t),o._publishUpdate()}};var st=function({pageInfo:e,placement:i,environment:r,errorHandler:n,settings:s,creativePayload:a},o){var c;const l=r.formats,d=[l.image,l.autoplay,l.header_direct_banner,l.native_lite],h=e.getSafeFrameApi(),u=parseInt(null==a||null===(c=a.settings)||void 0===c?void 0:c.format_id,10),p=s.ignoreSafeframeErrors&&d.includes(u),m={getAdBoundingRect:function(){throw new y.Z("getAdBoundingRect is not supported in a safeFrame environment")},getBoundingRect:function(){throw new y.Z("getBoundingRect is not supported in a safeFrame environment")},getClientDims:function(){throw new y.Z("getClientDims is not supported in a safeFrame environment")},getAdPctInView:function(){return h.ext.inViewPercentage()/100},getElPctInView:function(){throw new y.Z("getElPctInView is not supported in a safeFrame environment")}},g=Qe(m,o);try{const e=h.ext.geom();h.ext.register(e.self.w,e.self.h,(e=>{"geom-update"===e&&g._publishUpdate()}))}catch(e){if(!p)throw e;n.fireError("Ignoring $sf error: "+e.message,n.WARNING),setInterval((()=>{g._publishUpdate()}),1e3)}4913===i.publisherId&&setInterval((()=>{g._publishUpdate()}),1e3);return(0,t.BF)({},g,m)};var at=function({asyncUtil:e,win:i},r){let n=!0;const s={getAdBoundingRect:o,getBoundingRect:c,getClientDims:l,getAdPctInView:function(){return Ye.getRectPctInView(o(),l())},getElPctInView:function(e){return Ye.getRectPctInView(c(e),l())}},a=Qe(s,r);return e.addScrollListener(i.top,a._publishUpdate),(0,t.BF)({},a,s);function o(){const t=s.adContainer.ownerDocument.defaultView?s.adContainer.ownerDocument.defaultView.frameElement:null;return t?(n&&(e.addScrollListener(t.contentDocument,a._publishUpdate),n=!1),t.getBoundingClientRect()):Ye.getDefaultBoundingClientRect()}function c(e){const t=e.getBoundingClientRect(),i=o();return Ye.sumRects(t,i)}function l(){const e=i.top;return{width:e.innerWidth,height:e.innerHeight}}};var ot=function(e,i){const{pageInfo:r}=e;let n;n=r.isMraid()?nt(e,i):r.isWebview()?Xe(e,i):r.isAmp()?et(e,i):r.isSafeFrame()?st(e,i):r.isFriendlyFrameRender()?at(e,i):qe(e,i);const s=(0,t.Xq)(Object.keys(n),ct);if(s.length>0)throw new y.Z("positionService invalid. Unmatched keys: "+s.join(", "));return n};const ct=["getAdBoundingRect","getAdPctInView","getBoundingRect","getClientDims","getElDims","getElPctInView","setAdContainer"];var lt=n(874),dt=n(630),ht=function({placement:e}){return{render:function(t){const i=t.domRefs.mainImage;let r=i&&(i.complete||i.naturalWidth>0);e.customOptions.dontWaitForImageLoad&&(r=!0);i&&"IMG"===i.tagName&&!r&&t.promises.push(new Promise((e=>{i.addEventListener("load",e)})))}}};var ut=n(251),pt=n(440),mt=function({creative:e,docInfo:t,eventController:r}){let n,s,a;return{render:function(c){n=c.state,s=e.getParams(),function(){const e=t.document;if(s&&s.image_height&&s.image_width)a={width:s.image_width,height:s.image_height};else{const t=e.createElement("img");t.src=s.image_url,a={width:t.naturalWidth,height:t.naturalHeight}}}(),r.on(i.ql,o)}};function o(e){if(s.isCSR){const{x:t,y:i}=(0,pt.rl)(e,a);n.logoOffsetX=t,n.logoOffsetY=i}else n.logoOffsetX=0,n.logoOffsetY=0}};var gt=n(973),ft=n(654);class yt{constructor({analytics:e,browserInfo:t,asyncUtil:i,creative:r}){this.analytics=e,this.browserInfo=t,this.asyncUtil=i,this.creative=r}init(e){this.asyncUtil.listen(e.domRefs.mainClickTarget,"click",(()=>this.clickThrough()),!1,!0)}clickThrough(){const{clickthrough_url:e}=this.creative.params;this.analytics.click(),this.browserInfo.isFacebook?this.asyncUtil.timeoutWrap((()=>{(0,ft.l)(e)}),500):(0,ft.l)(e)}}var vt={create:function(e){return new lt.Z({renderers:function(){const{creative:t,placement:i}=e,r=t.getParams(),n=r.customization&&r.customization.reveal||r.isCSR,s=n&&!i.customOptions.is3pAdPreview,a=[dt.Z,ht];n&&a.push(ut.Z);s&&a.push(mt);return a}(),eventManagers:[gt.Z,yt],initState:{},supportedDomRefs:[]},e)}};var _t={name:"imageRendererFactoryLoader",isSupported:function(e){return e.isImage()},load:function(){return new Promise((e=>{e({default:vt})}))}};var It=function({creative:e,eventController:r,docInfo:n}){const s=e.getParams();let a,o,c,l;return{render:function(e){a=e,l=n.document.createElement("img"),l.src=s.image_url,r.on(i.ql,d)},_getZoomValues:h};function d(e){const{noCrop:n,no_crop:d}=(0,t.EC)("?"+s.img_server_params).queryKey,u=!(!parseInt(n,10)&&!parseInt(d,10))?{x1:0,x2:s.image_width,y1:0,y2:s.image_height}:s.focal_box;let p,m;if(u){const i=e.width,r=e.height;p=s.image_width,m=s.image_height,function(e,i,r,n,s,l){if(i===o&&r===c)return;o=i,c=r;const d=h(i,r,n,s,l);k.Z.setStyle(e,"background-repeat","no-repeat"),k.Z.setStyle(e,"background-size",d.scaledImgWidth+"px"),k.Z.setStyle(e,"background-position",d.offsetX+"px "+d.offsetY+"px");const{state:u}=a;u.visibleImageWidth=(0,t.DA)(d.scaledImgWidth,i),u.visibleImageHeight=(0,t.DA)(d.scaledImgHeight,r),u.imageBoxingOffsetX=Math.max(Math.floor((i-u.visibleImageWidth)/2),0),u.imageBoxingOffsetY=Math.max(Math.floor((r-u.visibleImageHeight)/2),0)}(a.domRefs.mainImageCsrEl,i,r,p,m,u)}else g=a.domRefs.mainImageCsrEl,k.Z.setStyle(g,"background-position","center"),k.Z.setStyle(g,"background-size","contain"),k.Z.setStyle(g,"background-repeat","no-repeat"),k.Z.setStyle(g,"text-align","left"),k.Z.setStyle(g,"background-color","#FFFFFF");var g;p||m||(p=l.naturalWidth,m=l.naturalHeight),p&&m&&r.publish(i.p0,(0,pt.rl)(e,{width:p,height:m}))}function h(e,t,i,r,n){const s=function(e){const{adWidth:t,adHeight:i,imgWidth:r,imgHeight:n,focalWidth:s,focalHeight:a}=e,o=Math.max(t/r,i/n),c=Math.min(t/s,i/a);return Math.min(o,c)}({adWidth:e,adHeight:t,imgWidth:i,imgHeight:r,focalWidth:n.x2-n.x1,focalHeight:n.y2-n.y1}),a=Math.ceil(s*i),o=Math.ceil(s*r),c={};Object.keys(n).forEach((e=>{const t=n[e];c[e]=Math.floor(s*t)}));return{scaledImgWidth:a,scaledImgHeight:o,offsetX:u(e,a,c.x1,c.x2),offsetY:u(t,o,c.y1,c.y2)}}function u(e,t,i,r){if(e>t)return Math.round((e-t)/2);const n=Math.round((e-i-r)/2);return n>0?0:n+t<e?e-t:n}};var At={create:function(e){const i=[dt.Z,It,ut.Z],r=e.creative.params;!(0,t.EC)("?"+r.img_server_params).queryKey.noCrop&&r.focal_box||i.push(mt);const n=[gt.Z,yt];return new lt.Z({renderers:i,eventManagers:n,initState:{},supportedDomRefs:[]},e)}};var wt={name:"cinemagraphRendererFactoryLoader",isSupported:function(e){return e.isCinemagraph()},load:function(){return new Promise((e=>{e({default:At})}))}};var Ct={name:"carouselRendererFactoryLoader",isSupported:function(e){return e.isCarousel()},load:function(){return n.e(369).then(n.bind(n,577))}};const Et=1200;class Tt{static isXml(e=""){return e.includes("<VAST")&&e.includes("<Ad")}static getAdAspectRatio(e){return parseFloat((e.width/e.height).toFixed(2))}static sortByAspectRatio(e,t,i){const r=Tt.getAdAspectRatio(i),n=e=>r===e,s=Tt.parsedAspectRatio(e),a=Tt.parsedAspectRatio(t),o=n(s),c=n(a);return o&&c?Tt.sortByClosestDims(e,t,i):o&&!c?-1:c&&!o?1:Tt.sortByAspectRatioDistance(e,t,i)}static sortByAspectRatioDistance(e,t,i){const r=Tt.getAdAspectRatio(i),n=Tt.parsedAspectRatio(e),s=Tt.parsedAspectRatio(t),a=e=>Math.abs(e-r),o=a(n),c=a(s);return o<c?-1:c<o?1:Tt.sortByClosestDims(e,t,i)}static sortMediaBySize(e,t,i){const r={width:i.imageWidth,height:i.imageHeight},n=Tt.dimsLessThanPlacement(e,r),s=Tt.dimsLessThanPlacement(t,r);return!n&&s?-1:n&&!s?1:Tt.sortByAspectRatio(e,t,r)}static orderBestMediaFiles(e){const t=[],i=[],r=[],n=[],s=(e,t)=>"desc"===t?e.sort(((e,t)=>t.getAttribute("bitrate")-e.getAttribute("bitrate"))):e.sort(((e,t)=>e.getAttribute("bitrate")-t.getAttribute("bitrate")));return e.forEach((e=>{const s=bt(e,"bitrate");s?s>=400&&s<Et?t.push(e):s<Et?i.push(e):n.push(e):r.push(e)})),s(i,"desc"),s(n),[...t,...i,...n,...r]}static dimsLessThanPlacement(e,t){const i=bt(e,"height");return bt(e,"width")<t.width||i<t.height}static parsedAspectRatio(e){const t=bt(e,"height"),i=bt(e,"width");return t?parseFloat((i/t).toFixed(2)):0}static distanceByDims(e,t){return{width:Math.abs(bt(e,"width")-t.width),height:Math.abs(bt(e,"height")-t.height)}}static sortByClosestDims(e,t,i){const r=Tt.distanceByDims(e,i),n=Tt.distanceByDims(t,i),s=r.width<n.width&&r.height<n.height,a=r.width>n.width&&r.height>n.height;return s?-1:a?1:Tt.sortByBestDeskTopBitRate(e,t)}static sortByBestDeskTopBitRate(e,t){const i=bt(e,"bitrate"),r=bt(t,"bitrate");if(i&&r){const e=i>=400&&i<Et,t=r>=400&&r<Et;return e&&!t?-1:!e&&t?1:r-i}return i?1:-1}static byBestBitrateMobile(e,t,i){const r=e=>Math.abs(bt(e,"bitrate")-750),n=bt(e,"bitrate"),s=bt(t,"bitrate");return n===s?Tt.sortMediaBySize(e,t,i):!n&&s?1:!s&&n?-1:r(e)-r(t)}}function bt(e,t){return parseInt(e.getAttribute(t),10)}class St{constructor(e){let t;if(!window.DOMParser)throw new y.Z("DOMParser API unavailable");t=new DOMParser,this.xmlDocument=t.parseFromString(e,"application/xml"),this._validateVastXml()}querySelector(e){return this.xmlDocument.querySelector(e)}querySelectorAll(e){return this.xmlDocument.querySelectorAll(e)}_validateVastXml(){const e=()=>{if(!this.querySelector("VASTAdTagURI"))throw new y.Z("Missing VASTAdTagURI element")},t=()=>{if(!this.querySelector("Creative"))throw new y.Z("Missing Creative element(s)");if(!!!this.querySelector("Linear"))throw new y.Z("Missing Linear element(s)")};if(!this.querySelector("VAST"))throw new y.Z("Missing VAST element");if(!this.querySelector("Ad"))throw new y.Z("Missing Ad element");if(this.querySelector("Wrapper"))e();else{if(!this.querySelector("InLine"))throw new y.Z("Missing InLine and Wrapper element");t()}}}var Mt=n(906);const Pt=new Promise((()=>{}));class Rt{constructor({eventController:e,firePix:t}){(0,p.Z)(this,"timeoutID",void 0),(0,p.Z)(this,"vastWrapperBreadcrumbs",[]),(0,p.Z)(this,"adSystems",[]),(0,p.Z)(this,"impressionTrackers",[]),(0,p.Z)(this,"assortedTrackers",[]),(0,p.Z)(this,"videoClickTrackers",[]),(0,p.Z)(this,"expandMacros",void 0),this.eventController=e,this.firePix=t}async getVastXml(e){this.expandMacros=t=>e.expandFirstPartyMacros(e.params.additional_data.tid,e.params.asset_id,t);const t=e.params.vast_xml;return Tt.isXml(t)?this._parseVastContent(t):this._fetchVast(t)}async _fetchVast(e){const i=this.expandMacros(e);this.vastWrapperBreadcrumbs.push({url:e,expandedUrl:i});try{this._startRedirectTimeout();const e=await(0,t.hj)(i,"GET");this._clearRedirectTimeout();const r=e.target.responseText;return this._parseVastContent(r)}catch(e){this._clearRedirectTimeout();const t="Wrapper redirect failed. Possible causes include 404s and CORS errors";return this._vastWrapperError(t),Pt}}async _parseVastContent(e){if(!e)throw new y.Z("Missing vastXml");let t;try{t=new St(e)}catch(e){return this.eventController.publish(i.TZ,Mt.Z.VAST_ERROR_VAST_SCHEMA,{message:e.message}),Pt}try{const e=t.querySelector("Ad InLine"),r=t.querySelector("Ad Wrapper");if(this._collectImpressionTrackers(e||r),this._collectVendor(e||r),r){if(this._collectCreativeTrackers(r),this._hasExceededRedirectLimit())return Pt;try{return await this._fetchVast(r.querySelector("VASTAdTagURI").textContent)}catch(e){this._clearRedirectTimeout(),this.eventController.publish(i.TZ,Mt.Z.VAST_WRAPPER_ERROR)}}if(e)return t}catch(e){this.eventController.publish(i.TZ,Mt.Z.VAST_WRAPPER_ERROR)}return Pt}getImpressionTrackers(e){return[...[].slice.call(e.querySelectorAll("Impression")),...this.impressionTrackers]}getVideoClickTrackers(e){return[...[].slice.call(e.querySelectorAll("VideoClicks ClickTracking")),...this.videoClickTrackers]}getAssortedTrackers(e){return[...[].slice.call(e.querySelectorAll("TrackingEvents Tracking")),...this.assortedTrackers]}_collectVendor(e){this.adSystems.push(e.AdSystem||"un")}getBreadcrumbs(){return this.vastWrapperBreadcrumbs}_collectImpressionTrackers(e){const t=[].slice.call(e.querySelectorAll("Impression"));t.length&&(this.impressionTrackers=[...this.impressionTrackers,...t])}_collectCreativeTrackers(e){const t=[].slice.call(e.querySelectorAll("TrackingEvents Tracking")),i=[].slice.call(e.querySelectorAll("VideoClicks ClickTracking"));this.assortedTrackers=[...this.assortedTrackers,...t],this.videoClickTrackers=[...this.videoClickTrackers,...i]}_startRedirectTimeout(){this.timeoutID=setTimeout((()=>{this.eventController.publish(i.TZ,Mt.Z.VAST_WRAPPER_TIMEOUT)}),5e3)}_clearRedirectTimeout(){clearTimeout(this.timeoutID)}_hasExceededRedirectLimit(){return this.getBreadcrumbs().length>=10&&(this.eventController.publish(i.TZ,Mt.Z.VAST_TOO_MANY_REDIRECTS),!0)}_vastWrapperError(e){this.eventController.publish(i.TZ,Mt.Z.VAST_WRAPPER_ERROR,{message:e,diagnosticContext:{...this.vastWrapperBreadcrumbs}})}}const Dt={"video/mp4":!0};class Lt{constructor({placement:e,environment:{renderOptionsMap:t},settings:i},{creative:r,firePix:n,asyncUtil:s,eventController:a}){this.placement=e,this.renderOptionsMap=t,this.settings=i,this.creativeObj=r,this.asyncUtil=s,this.vastParser=new Rt({eventController:a,firePix:n}),this.vastXml=null,this.InLine=null,this.Creative=null}async getVastXml(){this.vastXml=await this.vastParser.getVastXml(this.creativeObj),this.InLine=this.vastXml.querySelector("InLine"),this.Creative=this.InLine.querySelector("Creative")}getAdParameters(){const e=this.Creative.querySelector("AdParameters");return e?e.textContent:null}getAdSystem(){const e=this.InLine.querySelector("AdSystem");return e?e.textContent:null}getDurationMS(){const e=this.Creative.querySelector("Duration")||{};return(0,t.LB)(e.textContent)}getVastClickThrough(){return this.Creative.querySelector("VideoClicks ClickThrough")}getVastClickThroughUrl(){const e=this.getVastClickThrough();return e?e.textContent:null}getMediaFiles(e=this.Creative){return[].slice.call(e.querySelectorAll("MediaFile"))}getImpressionTrackers(){return this.vastParser.getImpressionTrackers(this.Creative.querySelector("Linear"))}getVideoClickTrackers(){return this.vastParser.getVideoClickTrackers(this.Creative.querySelector("Linear"))}getAssortedTrackers(){return this.vastParser.getAssortedTrackers(this.Creative.querySelector("Linear"))}getVastWrapperBreadcrumbs(){return this.vastParser.getBreadcrumbs()}useNextVpaidCreative(){const e=this._getNextVpaidCreative();return e&&(this.Creative=e),e}_getNextVpaidCreative(){const e=[].slice.call(this.InLine.querySelectorAll("Creative")),t=e.indexOf(this.Creative);return e.slice(t+1).find((e=>this._getJavascriptVpaid(e).length>0))}chooseBestMediaFiles({useBitrate:e=!1}={}){const t=this.isVpaid()?this._getJavascriptVpaid():this._getSupportedMediaFiles();if(!t.length)return this.getMediaFiles();if(e)return t.sort(((e,t)=>Tt.byBestBitrateMobile(e,t,this.placement))).slice(0,1);const i=t.slice().sort(((e,t)=>Tt.sortMediaBySize(e,t,this.placement)));return Tt.orderBestMediaFiles(i)}_getJavascriptVpaid(e=this.Creative){return this.getMediaFiles(e).filter((e=>{const t="VPAID"===e.getAttribute("apiFramework"),i=e.getAttribute("type");return t&&("application/x-javascript"===i||"application/javascript"===i)}))}_getSupportedMediaFiles(){return this.getMediaFiles().filter((e=>Dt[e.getAttribute("type")]))}isVpaid(){const e=[].slice.call(this.Creative.querySelectorAll("MediaFile"));return!!e.length&&e.some((e=>"VPAID"===e.getAttribute("apiFramework")))}}var Nt={name:"videoRendererFactoryLoader",isSupported:function(e){return e.isVast()},load:async function({placement:e,environment:t,settings:i,creative:r,firePix:s,errorHandler:a,eventController:o,asyncUtil:c}){const l=new Lt({placement:e,environment:t,settings:i},{creative:r,eventController:o,firePix:s,asyncUtil:c});return r.setVastTag(l),Mt.Z.listen({errorHandler:a,eventController:o}),await l.getVastXml(),n.e(359).then(n.bind(n,218))}};var Ot={name:"scrollRendererFactoryLoader",isSupported:function(e){return e.isScroll()},load:function(){return n.e(916).then(n.bind(n,725))}};var xt={name:"windowRendererFactoryLoader",isSupported:function(e){return e.isWindow()},load:function(){return n.e(778).then(n.bind(n,838))}};var kt=function({creative:e,eventController:r,analytics:n,firePix:s}){const{banner_markup:a,banner_height:o,banner_width:c}=e.params;return{render:function(n){const s=n.domRefs,a=function(){const n=l(),s=document.createElement("iframe"),a="<!DOCTYPE html><html><head></head><body>"+n+"</body></html>";s.className=jt,s.height=o,s.width=c,s.frameBorder="0",s.scrolling="no",s.marginHeight="0",s.marginWidth="0",s.tabIndex=-1,s.setAttribute("allowtransparency","true"),s.setAttribute("hidefocus","true");const d=()=>{var e;const t=null===(e=s.contentWindow)||void 0===e?void 0:e.document;t.open(),t.write(a),t.close(),s.removeEventListener("load",d)};return r.on(i.RU,(()=>{var e,t;"complete"===(null===(e=s.contentWindow)||void 0===e||null===(t=e.document)||void 0===t?void 0:t.readyState)?d():s.addEventListener("load",d)})),(0,t.Nj)(e.params.additional_data.adid,s),s}();return s.adWrapper=a,s.adWrapperWithDims=a,s.mainImage=a,s},_expandClickMacro:l};function l(){const t=e.params.additional_data.pr,i=e.params.additional_data.biid;let r="";"AUDIT"!==t?r=n.getRedirectClickUrl():s.fireDyn({long1:i,string2:"AUDIT_DYN"});const o=u.Z.DISPLAY_CLICK_MACROS;let c=a;return o.forEach((e=>{const{regex:t,level:i}=e;if(t.test(c)){const e=Ie(r,i);c=c.replace(t,e)}})),c}};const jt=u.Z.TL_CLASS_PREFIX+"iframe";var Zt={create:function(e){return new lt.Z({renderers:[kt],eventManagers:[gt.Z],initState:{},supportedDomRefs:[]},e)}};var Ut={load:function({placement:e,environment:t,settings:i,creative:r,firePix:n,errorHandler:s,eventController:a,asyncUtil:o}){const c=function(e,t){const i=e.find((e=>e.isSupported(t)));void 0===i&&function(){throw new y.Z("Supported renderer factory not found.")}();return i}(Ft,r),l=function(e,t){return e.filter((e=>e.isSupported(t)))}(Bt,r).map((e=>e.load())),d=c.load({placement:e,environment:t,settings:i,creative:r,firePix:n,errorHandler:s,eventController:a,asyncUtil:o});return l.unshift(d),Promise.all(l)}};const Ft=[_t,wt,Ct,Nt,Ot,{name:"pharmaRendererFactoryLoader",isSupported:function(e){return e.isPharma()},load:function(){return n.e(951).then(n.bind(n,604))}},xt,{name:"bannerRendererFactoryLoader",isSupported:function(e){return e.isBanner()},load:function(){return new Promise((e=>{e({default:Zt})}))}}],Bt=[{name:"revealConfigFactoryLoader",isSupported:function(e){return e.params.customization&&e.params.customization.reveal},load:function(){return n.e(912).then(n.bind(n,796))}}];class Wt{constructor({topWindow:e}){const i=e.document,r=[i.URL,i.referrer,window.document.URL,window.document.referrer].find(Wt.isTripleLiftTest);if(this.debugFlag=!!r,r){const e=(0,t.EC)(r),{tl_image_id:i,tl_template_id:n,tid:s,tl_dyn_id:a,tl_scu_id:o,tl_preview_id:c,tp_preview_id:l,tl_debug_log:d,view_type:h,tlBidUrl:u}=e.queryKey;this.tlImageId=i,this.tlTemplateId=n||s,this.debugLog=!!d,this.tlBidUrl=!!u&&decodeURIComponent(u),this.forceBidUrl=!(!c&&!l),this.adPreview=!!(c||l||h),this.thirdPartyAdPreview=!!l,this.tlPreviewId=c,this.tpPreviewId=l,this.tlDynId=a||o}}static isTripleLiftTest(e){return"string"==typeof e&&e.toLowerCase().includes("triplelifttest=true")}}var Vt=n(85);class Ht extends Vt.ZP{constructor(e){super(e),this.priority=Vt.jT.SECOND}async run(){this.eventController.publish(i.RB),super.run()}}class zt{constructor(e){(0,p.Z)(this,"eventController",void 0),(0,p.Z)(this,"runners",[]),this.eventController=e,e.on(i.P7,(()=>this.runFallbacks()))}addManager(e){const t=this.runners.findIndex((t=>t.priority===e.priority));-1!==t?this.runners.splice(t,1,e):this.runners.push(e)}async runFallback(e){e.state===Vt.Tl.init&&e.conditionsMet()&&await e.run()}async runFallbacks(){this.runners.sort(((e,t)=>e.priority-t.priority));for(let e=0;e<this.runners.length&&(await this.runFallback(this.runners[e]),!this.runners[e].success);e++);}}var Gt={run:async(...e)=>{try{await async function(e){window.performance&&performance.now||(window.performance=window.performance||{},window.performance.now=Date.now);const r=performance.now(),{cacheHit:s,revision:a="un",scriptWindow:c}=e;let{currentScript:l}=e;const p=a.slice(0,7);let g,f,v,_,I,A,w,C,E,T,O,k,j,W,H,z,G,Q,q,X,$,ne,se,ae,oe,ce,le,de,he,ue,ye,Ie,Ae,we=!1;const Ce=()=>{g=new D,f=new V({eventController:g}),v=new M({scriptWindow:c}),_=new Wt({topWindow:v.topWindow}),I=_.debugFlag,A=new P(e.environment),w=qe(e.placement,{urlParams:_}),C=new ie(e.settings),E=new L({docInfo:v,rev:p,placement:w,debugFlag:I,ebPath:A.ebPath,auctionId:Ae},{eventController:g}),T=new S.Z({environment:A,bundleStartTime:r},{eventController:g,urlParams:_}),O=new ve({settings:C,ttjStartTime:e.ttjStartTime,revision:p,isTestEnv:!!_.tlBidUrl},{eventController:g,firePix:E}),H=new R.Z({firePix:E,urlParams:_,lifecycleManager:f}),z=H.decorate.bind(H),W=new Z({placement:w,environment:A,docInfo:v,settings:C,currentScript:l},{errorHandler:H}),k=new _e(O),j=new zt(g)},be=()=>{if(f.setPhaseAfterInit(),q=e.auctionResponse||W.getHeaderBiddingAuctionResponse(),q&&(O.setIsHeaderBidding(!0),g.publish(i.i2,q)),!q&&W.getAuctionResponsePseudoId()){const e=W.getSupplySourceId();H.fireError("Header bidding response not found for supply source: "+e,R.Z.ERROR)}s||O.log(ve.BUNDLE_LOAD_TIME,r),G=new Ge({docInfo:v,placement:w}),Q=new ge(z,v.topWindow),U.needsBusting(w,v.window)&&U.bust(v.document,W.getScriptSrc())},Me=()=>{const e=W.getDtjTacticId(),i=Ne.getCmpApiWindow(v.topWindow,H);i&&(X=new Ne({win:i,isProxyNeeded:i!==v.topWindow,errorHandler:H})),$=new te({hookFinder:W,docInfo:v,defaultCode:w.defaultCode,pageInfo:G,isFallback:we},{firePix:E,asyncUtil:Q,errorHandler:H}),e||(w.demandEnabled||I||q?(0,t.Z0)()||(ne=new me({placement:w,environment:A,topWindow:v.topWindow,debugFlag:_.debugFlag,gdpr:X}),$.setUserSync(ne)):$.serve("demand_disabled"))},Re=()=>{const{navigator:e}=v;if(!e)throw new y.Z("setBrowserInfo failed: no navigator");const t=new h(e.userAgent);se=t.getBrowserInfo()},De=()=>{ae=ot({win:v.topWindow,pageInfo:G,placement:w,environment:A,browserInfo:se,errorHandler:H,firePix:E,analytics:he,asyncUtil:Q,settings:C,creativePayload:q},g),oe=new fe({placement:w,docInfo:v},{positionService:ae,eventController:g,errorHandler:H,asyncUtil:Q})},Le=async()=>{k.startLap();const e=await m.create(v);ce=new N({auctionFrameWindow:e.contentWindow,errorDecorator:z}),ce.setListeners();if(new x({placement:w,auctionIframe:e},{eventController:g,serveDefault:$,firePix:E,errorDecorator:z,errorHandler:H}).registerAuctionListeners(),!q||we){const t={auctionIframe:e,browserInfo:se,docInfo:v,environment:A,gdpr:X,placement:w,rev:p,isFallback:we};we&&(t.fallbackBannerSize=Ke());const i=new d(t,{errorDecorator:z,errorHandler:H,eventController:g,firePix:E,pageInfo:G,serveDefault:$,hookFinder:W,urlParams:_,asyncUtil:Q});k.log(ve.AUCTION_START),q=await i.getCreative(),k.log(ve.AUCTION_RESPONSE)}},Oe=async()=>{const{settings:{dco_tag_url:e,dco_protocol:t}}=q;if(e&&t===u.Z.DCO_PROTOCOLS.DV_BLOCKING){const e=new Pe(q,{errorHandler:H});await e.callDV()}else if(e){const e=new b({assets:q.assets,settings:q.settings,frame:m.get()},{errorHandler:H});try{const t=await e.getOptimizedAsset();q.assets=[t.asset],q.settings.isFallbackAssets=t.isFallback,t.asset.privacy_url&&(q.settings.adchoices_url=t.asset.privacy_url)}catch{$.serve("dco_error")}}},xe=()=>{$.adRendered=!0,le=new re.Z(H),Object.assign(w,le.getAltTemplate(w.templates,q.settings.template_id,W.getTagTemplateId(),_.tlTemplateId)),w.provenTemplate&&(w.customOptions.unwrappedUnit=!1,w.customOptions.friendlyIframeRender=!0),le.parse(w.templateCode)},ke=()=>{const e=W.currentScript&&(0,t.EC)(W.currentScript.src).queryKey.ct;if(!le)throw new y.Z("templateCode is not valid");if(de=class{static create(e){const{creativePayload:t,environment:i}=e,r=t.settings.format_id,n=i.formats,s=[n.video,n.autoplay,n.outstream_video,n.high_impact_video];return r===n.carousel?new Te(e):s.includes(r)?new Se(e):new Ee(e)}}.create({environment:A,placement:w,pageInfo:G,isSmallScreen:se.isSmallScreen,clickTrackerDTJ:e,debug:I,creativePayload:q,templateDetail:le.templateDetail,tlImageId:_.tlImageId,errorHandler:H}),de.isHdx()&&(w.customOptions.friendlyIframeRender=!0,w.replaceParent=0),de.isNativeLite()&&(w.customOptions.unwrappedUnit=!1,w.customOptions.friendlyIframeRender=!0,w.replaceParent=0),!re.Z.hasMacro(w.templateCode)&&!de.isHdx())throw new y.Z("Format not HDX and template code is not valid.");!G.isViewabilityAware()&&de.needsViewabilityAwareness()&&H.fireError("Position aware format served to unfriendly frame",H.WARNING)},je=()=>{ye=new Y({creativePayload:q,firePix:E}),ue=new pe({docInfo:v,placement:w},{creative:de,auctionIframeWriterOverride:ce,firePix:E,errorHandler:H,eventController:g}),he=new o({environment:A,pageInfo:G},{creative:de,lifecycleManager:f,thirdPartyAnalytics:ue,payableEventEmitter:ye,firePix:E,errorHandler:H,asyncUtil:Q,eventController:g})},Ze=async()=>{k.log(ve.RENDER);try{he.render()}catch(e){H.fireError("analytics error: "+e.toString(),H.ERROR)}W.styleHook();const e={placement:w,environment:A,settings:C,creative:de,firePix:E,errorHandler:H,eventController:g,asyncUtil:Q},r=await Ut.load(e),n=r[0].default,s=r.slice(1).map((e=>e.default)).map((e=>e.create())),a={creative:de,placement:w,environment:A,browserInfo:se,pageInfo:G,docInfo:v,analytics:he,asyncUtil:Q,templateCode:le,positionService:ae,firePix:E,errorHandler:H,eventController:g,viewabilityController:oe,featureConfigs:s,fallbackManager:j},c=n.create(a),l=await c.render();Ie=l.domRefs,le.chosenTemplate.appendChild(Ie.adWrapper);const{childNodes:d}=le.templateWrapEl;for(let e=0;e<d.length;e++){const t=d[e];1===t.nodeType&&K.insertAd(t,W.getHook(),w.customOptions.friendlyIframeRender)}(0,t.qe)(v.topWindow,"resize",document),k.log(ve.AD_ON_PAGE),he.adOnPage(),g.publish(i.RU),o.sendAdReadySignal()},Ue=()=>{const e=Ie.mainImageCsrEl||Ie.mainImage,{adWrapperWithDims:i}=Ie;if(he.appendThirdPartyJs(i,e),he.disclosureRenderResult(),ne&&ne.doSyncIfAllDone(),G.isViewabilityAware()){if(window.IntersectionObserver&&window.IntersectionObserverEntry&&"isIntersecting"in window.IntersectionObserverEntry.prototype&&!G.isMraid()){let e=null;const t={0:(e,t)=>{e[0].isIntersecting&&(he.onePxViewable(),t.disconnect())},[fe.getRequiredPct(i)]:(t,i)=>{t[0].isIntersecting?e=setTimeout((()=>{he.viewable(),i.disconnect()}),1e3):e&&clearTimeout(e)}};Object.entries(t).forEach((([e,t])=>{const r={threshold:parseFloat(e)};new IntersectionObserver(t,r).observe(i)}))}oe.listenForPercentageAdViewability(i,he.viewable.bind(he)),oe.listenForOnePxAdViewability(he.onePxViewable.bind(he))}(0,t.UP)(C.pmdLogRate,(()=>{const t=1e3;Q.timeoutWrap((()=>{ee({adWrapperWithDims:i,mainContent:e,positionService:ae,pageInfo:G,bundleStartTime:r,firePix:E,errorHandler:H})}),t)}))},Fe=()=>{(new F).layout(W.getHook())},Be=async()=>{const e=async()=>{const e=new(0,(await n.e(888).then(n.bind(n,794))).default)({placement:w,docInfo:v,domRefs:Ie,errorHandler:H,pageInfo:G,firePix:E});oe.listenForPercentageAdViewability(Ie.adWrapperWithDims,(()=>{e.run()}))};(0,t.UP)(C.placementCategorizationRate,(()=>{e()}))},We=async()=>{const e=async()=>{const e=new(0,(await n.e(36).then(n.bind(n,325))).default)({docInfo:v,domRefs:Ie,errorHandler:H,pageInfo:G,analytics:he});oe.listenForPercentageAdViewability(Ie.adWrapperWithDims,(()=>{e.run()}))},i={342:1,746:1},r=C.prvSampleRate,s=(de.getParams().prv_sample_rate||0)/100,a=i[w.publisherId]||0,o=Math.max(r,s,a);(0,t.UP)(o,(()=>{f.setPhaseAfterPostRender(),e()}))},Ve=()=>{g.destroy(),l=W.currentScript,Ae=E.auctionId,Ce(),be()},He=async e=>{we=!0,$.setIsFallback(we),Ve(),f.setPhaseAfterInit(),await Le(),await Oe(),$.hasDefaulted||(xe(),ke(),je(),De(),e.conditionsMet()?(Ie.adWrapper.parentNode.removeChild(Ie.adWrapper),await Ze(),Ue(),Fe(),await Be(),await We(),e.verifySuccess()):H.fireError("Fallback render avoided",H.WARNING),e.destroy())},ze=()=>{const e=new Ht(g);e.setCallback((()=>He(e))),j.addManager(e)},Qe=()=>{!w.customOptions.videoErrorFallbackOptOut&&de.isAutoplay()&&ze()},Ye=async()=>{Ce(),be(),Me(),Re(),await Le(),await Oe(),$.hasDefaulted||(xe(),ke(),je(),De(),await Ze(),Ue(),Fe(),await Be(),await We(),Qe())};try{await Ye()}catch(e){if(H)try{H.fireError(e,H.ERROR)}catch(e){Je(e)}else Je(e)}function qe(e,t){const i={};return t.urlParams.adPreview&&(i.friendlyIframeRender=!0),new J({...e,customOptions:{...e.customOptions,...i,is3pAdPreview:t.urlParams.thirdPartyAdPreview}})}function Je(e){const i={e:"Critical: "+(e.message||e),lvl:1};i.inv_code=Xe((()=>w.invCode),null),i.aid=Xe((()=>E.auctionId),null),i.rev=Xe((()=>p),null),i.block=Xe((()=>f.getPhase()),B),console.error("tl: "+(e.stack||e),i);const r=Xe((()=>v.topDocument),document),n=Xe((()=>A.ebPath),"eb2.3lift.com");r.createElement("IMG").src=(0,t.uC)(n,"sce",i)}function Xe(e,t){try{return e()}catch{return t}}function Ke(){let e={width:0,height:0};return de.params.banner_width&&de.params.banner_height&&(e={width:de.params.banner_width,height:de.params.banner_height}),e}}(...e)}catch(e){const t=encodeURIComponent("Fatal: "+(e.message||e));document.createElement("IMG").src="//eb2.3lift.com/sce?lvl=1&block=init&e="+t}}};const Qt="0a2a42d71a280bdb6f205262440bfa38d1e7622f",Yt=window._tlImpressionBusLoader;n.p=Yt.getPublicPath(Qt),Yt.onload(Gt,Qt)}()}();